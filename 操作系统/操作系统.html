<!doctype html>
<html>
    <head>
        <title>操作系统</title>
        <meta charset='utf-8'/>
        <style>
 .ͼ1.cm-focused {outline: 1px dotted #212121;}
.ͼ1 {position: relative !important; box-sizing: border-box; display: flex !important; flex-direction: column;}
.ͼ1 .cm-scroller {display: flex !important; align-items: flex-start !important; font-family: monospace; line-height: 1.4; height: 100%; overflow-x: auto; position: relative; z-index: 0;}
.ͼ1 .cm-content[contenteditable=true] {-webkit-user-modify: read-write-plaintext-only;}
.ͼ1 .cm-content {margin: 0; flex-grow: 2; flex-shrink: 0; display: block; white-space: pre; word-wrap: normal; box-sizing: border-box; padding: 4px 0; outline: none;}
.ͼ1 .cm-lineWrapping {white-space: pre-wrap; white-space: break-spaces; word-break: break-word; overflow-wrap: anywhere; flex-shrink: 1;}
.ͼ2 .cm-content {caret-color: black;}
.ͼ3 .cm-content {caret-color: white;}
.ͼ1 .cm-line {display: block; padding: 0 2px 0 6px;}
.ͼ1 .cm-layer > * {position: absolute;}
.ͼ1 .cm-layer {position: absolute; left: 0; top: 0; contain: size style;}
.ͼ2 .cm-selectionBackground {background: #d9d9d9;}
.ͼ3 .cm-selectionBackground {background: #222;}
.ͼ2.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground {background: #d7d4f0;}
.ͼ3.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground {background: #233;}
.ͼ1 .cm-cursorLayer {pointer-events: none;}
.ͼ1.cm-focused > .cm-scroller > .cm-cursorLayer {animation: steps(1) cm-blink 1.2s infinite;}
@keyframes cm-blink {50% {opacity: 0;}}
@keyframes cm-blink2 {50% {opacity: 0;}}
.ͼ1 .cm-cursor, .ͼ1 .cm-dropCursor {border-left: 1.2px solid black; margin-left: -0.6px; pointer-events: none;}
.ͼ1 .cm-cursor {display: none;}
.ͼ3 .cm-cursor {border-left-color: #444;}
.ͼ1 .cm-dropCursor {position: absolute;}
.ͼ1.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor {display: block;}
.ͼ2 .cm-activeLine {background-color: #cceeff44;}
.ͼ3 .cm-activeLine {background-color: #99eeff33;}
.ͼ2 .cm-specialChar {color: red;}
.ͼ3 .cm-specialChar {color: #f78;}
.ͼ1 .cm-gutters {flex-shrink: 0; display: flex; height: 100%; box-sizing: border-box; left: 0; z-index: 200;}
.ͼ2 .cm-gutters {background-color: #f5f5f5; color: #6c6c6c; border-right: 1px solid #ddd;}
.ͼ3 .cm-gutters {background-color: #333338; color: #ccc;}
.ͼ1 .cm-gutter {display: flex !important; flex-direction: column; flex-shrink: 0; box-sizing: border-box; min-height: 100%; overflow: hidden;}
.ͼ1 .cm-gutterElement {box-sizing: border-box;}
.ͼ1 .cm-lineNumbers .cm-gutterElement {padding: 0 3px 0 5px; min-width: 20px; text-align: right; white-space: nowrap;}
.ͼ2 .cm-activeLineGutter {background-color: #e2f2ff;}
.ͼ3 .cm-activeLineGutter {background-color: #222227;}
.ͼ1 .cm-panels {box-sizing: border-box; position: sticky; left: 0; right: 0;}
.ͼ2 .cm-panels {background-color: #f5f5f5; color: black;}
.ͼ2 .cm-panels-top {border-bottom: 1px solid #ddd;}
.ͼ2 .cm-panels-bottom {border-top: 1px solid #ddd;}
.ͼ3 .cm-panels {background-color: #333338; color: white;}
.ͼ1 .cm-tab {display: inline-block; overflow: hidden; vertical-align: bottom;}
.ͼ1 .cm-widgetBuffer {vertical-align: text-top; height: 1em; width: 0; display: inline;}
.ͼ1 .cm-placeholder {color: #888; display: inline-block; vertical-align: top;}
.ͼ1 .cm-highlightSpace:before {content: attr(data-display); position: absolute; pointer-events: none; color: #888;}
.ͼ1 .cm-highlightTab {background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>'); background-size: auto 100%; background-position: right 90%; background-repeat: no-repeat;}
.ͼ1 .cm-trailingSpace {background-color: #ff332255;}
.ͼ1 .cm-button {vertical-align: middle; color: inherit; font-size: 70%; padding: .2em 1em; border-radius: 1px;}
.ͼ2 .cm-button:active {background-image: linear-gradient(#b4b4b4, #d0d3d6);}
.ͼ2 .cm-button {background-image: linear-gradient(#eff1f5, #d9d9df); border: 1px solid #888;}
.ͼ3 .cm-button:active {background-image: linear-gradient(#111, #333);}
.ͼ3 .cm-button {background-image: linear-gradient(#393939, #111); border: 1px solid #888;}
.ͼ1 .cm-textfield {vertical-align: middle; color: inherit; font-size: 70%; border: 1px solid silver; padding: .2em .5em;}
.ͼ2 .cm-textfield {background-color: white;}
.ͼ3 .cm-textfield {border: 1px solid #555; background-color: inherit;}
.ͼ1 .cm-foldPlaceholder {background-color: #eee; border: 1px solid #ddd; color: #888; border-radius: .2em; margin: 0 1px; padding: 0 1px; cursor: pointer;}
.ͼ1 .cm-foldGutter span {padding: 0 1px; cursor: pointer;}
 #cMenuToolbarModalBar {
  width: auto;
  height: auto;
  padding: 3px;
  display: grid;
  user-select: none;
  border-radius: 6px;
  position: absolute;
  transition: 100ms cubic-bezier(0.92, -0.53, 0.65, 1.21);
  -webkit-transition: 100ms cubic-bezier(0.92, -0.53, 0.65, 1.21);
  min-width: fit-content;
  justify-content: space-around;
  z-index: var(--layer-status-bar);

}

#cMenuToolbarModalBar.cMenuToolbarFlex {
  display: flex;
}

#cMenuToolbarModalBar.cMenuToolbarFlex :is(.cMenuToolbarCommandItem, button[class^=cMenuToolbarCommandsubItem]) {
  min-width: 20px;
}

#cMenuToolbarModalBar .cMenuToolbarCommandItem {
  margin: 2px;
  border: none;
  display: flex;
  cursor: pointer;
  padding: 5px 6px;
  box-shadow: none;
  margin-left: 3px;
  margin-right: 3px;
  position: relative;
  border-radius: 3px;
  font-size: initial !important;
  background-color: var(--background-primary-alt);
  height: auto;
}

#cMenuToolbarModalBar button.cMenuToolbarCommandItem:hover {
  background-color: var(--background-secondary);
}

/* #cMenuToolbarModalBar button.cMenuToolbarCommandItem svg {
  width: 1.3em;
  height: 1.3em;
} */

/*----------------------------------------------------------------
cMenuToolbar SETTINGS BUTTONS
----------------------------------------------------------------*/

.modal.mod-settings button:not(.mod-cta):not(.mod-warning).cMenuToolbarSettingsButton.cMenuToolbarSettingsButtonAdd,
button:not(.mod-cta):not(.mod-warning).cMenuToolbarSettingsButton.cMenuToolbarSettingsButtonAdd {
  background-color: var(--interactive-accent);
}

.modal.mod-settings button:not(.mod-cta):not(.mod-warning).cMenuToolbarSettingsButton.cMenuToolbarSettingsButtonDelete,
button:not(.mod-cta):not(.mod-warning).cMenuToolbarSettingsButton.cMenuToolbarSettingsButtonDelete {
  background-color: #989cab;
}

.modal.mod-settings button:not(.mod-cta):not(.mod-warning).cMenuToolbarSettingsButton.cMenuToolbarSettingsButtonRefresh,
button:not(.mod-cta):not(.mod-warning).cMenuToolbarSettingsButton.cMenuToolbarSettingsButtonRefresh {
  background-color: var(--text-accent);
}

button.cMenuToolbarSettingsButton {
  padding: 4px 14px;
  border-radius: 6px;
}



/*----------------------------------------------------------------
cMenuToolbar SETTING ITEMS
----------------------------------------------------------------*/
.setting-item.cMenuToolbarCommandItem:first-child {
  padding-top: 18px;
}

.cMenuToolbarCommandItem {
  cursor: grab;
  padding: 18px 0 18px 0;
}

.cMenuToolbarSettingsTabsContainer .sortable-fallback {
  cursor: grabbing;
  box-shadow: 0px 3px 32px rgb(31 38 135 / 15%);
}

.cMenuToolbarSettingsTabsContainer .sortable-grab {
  cursor: grabbing !important;
}

.cMenuToolbarSettingsTabsContainer .sortable-ghost {
  opacity: 0.4;
  cursor: grabbing;
}

.cMenuToolbarSettingsTabsContainer .sortable-chosen {
  cursor: grabbing;
  padding: 18px 0 18px 18px;
  background-color: var(--color-base-10, --background-primary);
}

.cMenuToolbarSettingsTabsContainer .sortable-drag {
  cursor: grabbing;
  box-shadow: 0px 3px 32px rgb(31 38 135 / 15%);
}

.cMenuToolbarSettingsTabsContainer {
  border-top: 1px solid var(--background-modifier-border);
  border-bottom: 1px solid var(--background-modifier-border);
}

/*----------------------------------------------------------------
cMenuToolbar CLASS CHANGES
----------------------------------------------------------------*/

#cMenuToolbarModalBar.cMenuToolbarDefaultAesthetic {
  border: 1px solid var(--background-modifier-border);
}

#cMenuToolbarModalBar.cMenuToolbarDefaultAesthetic:not(.top) :is(.cMenuToolbarCommandItem, button[class^=cMenuToolbarCommandsubItem]) {
  min-height: 28px;
}

#cMenuToolbarModalBar.cMenuToolbarDefaultAesthetic:not(.top) button[class^=cMenuToolbarCommandsubItem] {
  margin: auto;
  padding: 6px;
  box-shadow: none;
  border: none;
  background-color: transparent;

  place-items: center;

}

.cMenuToolbarDefaultAesthetic {
  background-color: var(--color-base-10, --background-primary);
}


#cMenuToolbarModalBar.cMenuToolbarGlassAesthetic,
#cMenuToolbarModalBar.cMenuToolbarGlassAesthetic~#cMenuToolbarPopoverBar {
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  box-shadow: none;
  background-color: transparent;
}

#cMenuToolbarModalBar.cMenuToolbarGlassAesthetic:not(.top) button[class^=cMenuToolbarCommandsubItem] {
  margin: auto;
  padding: 0px;
  box-shadow: none;
  border: none;
  display: flex;
  border-radius: 3px;
  font-size: 10px;
  margin-right: 0px;
  position: relative;
  background-color: transparent;
  place-items: center;
  clear: both;
  max-width: 28px;
  max-height: 23px;
}

/*----------------------------------------------------------------
cMenuToolbar ICONS
----------------------------------------------------------------*/

.cMenuToolbarIconPick {
  line-height: normal;
  vertical-align: middle;
  margin-right: 8px;
}

.cMenuToolbarIconPick svg {
  width: 17px;
  height: 17px;
}

/*----------------------------------------------------------------
cMenuToolbar STATUS BAR MENU
----------------------------------------------------------------*/

.cMenuToolbar-statusbar-menu {
  text-align: center;
  width: 200px;
}


.cMenuToolbar-statusbar-menu .menu-item {
  display: flex;
  align-items: center;
  flex-direction: row;
}

.cMenuToolbar-statusbar-menu .menu-item.settings-item {
  font-size: 12px;
  text-align: center;
  line-height: 1;
  border-radius: 5px;
  height: auto;
  padding: 8px 5px 0px 5px;
  margin: 0 auto;
  width: fit-content;
  color: var(--text-faint);
}

.cMenuToolbar-statusbar-menu .menu-item.settings-item .menu-item-title {
  text-align: center;
}

.cMenuToolbar-statusbar-menu .menu-item:hover,
.cMenuToolbar-statusbar-menu .menu-item .selected:hover,
.cMenuToolbar-statusbar-menu .menu-item.selected:not(.is-disabled):not(.is-label) {
  background-color: transparent;
}

.cMenuToolbar-statusbar-menu .menu-item-title {
  margin-right: 10px;
}

.cMenuToolbar-statusbar-menu .slider {
  width: 100%;
}

.cMenuToolbar-statusbar-menu .menu-item.buttonitem {
  padding-top: 10px;
  padding-bottom: 4px;
  height: fit-content;
}

.cMenuToolbar-statusbar-menu .menu-item.buttonitem button.cMenuToolbarSettingsButton {
  margin: 0;
}

.cMenuToolbar-statusbar-menu .menu-item-icon svg path {
  fill: var(--text-muted);
}

.cMenuToolbar-statusbar-menu .menu-item-icon svg {
  stroke: var(--text-muted);
}

.cMenuToolbar-statusbar-menu>.menu-item:is([data-section="ButtonAdd"]) {
  display: inline-flex;
  padding: 0px 0px 5px 5px;
  align-items: center;
}

.cMenuToolbar-statusbar-menu>.menu-item {
  display: inline-flex;
  padding: 0px 0px 5px 5px;
  align-items: center;
}

.cMenuToolbar-statusbar-menu>.menu-item:is([data-section="ButtonAdd"]) .menu-item-icon {
  text-align: center;
}


/*----------------------------------------------------------------
cMenuToolbar STATUS BAR BUTTONS
----------------------------------------------------------------*/

.cMenuToolbar-statusbar-button {
  cursor: pointer;
  display: flex;
  align-items: center;
  line-height: 1;
}

.cMenuToolbar-statusbar-button svg {
  display: flex;
  width: 1.3em;
  height: 1.3em;
}

/*----------------------------------------------------------------
cMenuToolbar SUPPORT
---------------------------------------------`-------------------*/

.cDonationSection {
  width: 60%;
  height: 50vh;
  margin: 0 auto;
  text-align: center;
  color: var(--text-normal);
}


#cMenuToolbarModalBar {
  align-items: center;
  justify-items: center;
  border: none;
  backdrop-filter: none;
}

#cMenuToolbarModalBar.cMenuToolbarGlassAesthetic .cMenuToolbarCommandItem {

  background-color: #ffffff00;
}

#cMenuToolbarModalBar.cMenuToolbarGlassAesthetic [class^=cMenuToolbarCommandsubItem] {

  background-color: #ffffff00;
}

#cMenuToolbarModalBar .cMenuToolbarCommandItem {
  justify-content: center;
  align-content: center;
  place-items: center;

}


/*  #cMenuToolbarModalBar.cMenuToolbarTinyAesthetic .cMenuToolbarCommandItem svg{
     width: 1em;
     height: 1em;
 } */



div.modal-container.cMenuToolbar-Modal:not(.changename) .modal-bg {
  background-color: transparent !important;
  backdrop-filter: none !important;
  position: relative;
}

.modal-container.cMenuToolbar-Modal:not(.changename) .modal {
  padding: 10px 30px;
  min-width: 130px;
  position: absolute;
  bottom: 2em;
  right: 0.5em;
  background-color: rgb(var(--mono-rgb-0), 0.8);
  backdrop-filter: blur(4px);
}

.modal-container.cMenuToolbar-Modal .modal-title {
  display: none;
}

.modal-container.cMenuToolbar-Modal .modal input[type='range'] {
  width: 90%;

}

body.theme-dark .modal-container.cMenuToolbar-Modal .modal input[type='range'] {
  background-color: var(--background-secondary);
}

/*tiny 样式*/
#cMenuToolbarModalBar.cMenuToolbarTinyAesthetic {
  align-items: center;
  justify-items: center;
  border: none;
  backdrop-filter: none;
  background-color: var(--color-base-10, --background-primary);
 
}


#cMenuToolbarModalBar.cMenuToolbarTinyAesthetic .cMenuToolbarCommandItem {
  margin: auto;
  padding: 0px;
  box-shadow: none;
  margin-left: 0px;
  margin-right: 0px;
  position: relative;
  background-color: transparent;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);

}

#cMenuToolbarModalBar .cMenuToolbarCommandItem {
  margin: auto;

  padding: 0px;
  box-shadow: none;

  margin-left: 4px;
  margin-right: 0px;
  position: relative;
  background-color: transparent;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);

}


:is(#cMenuToolbarModalBar).cMenuToolbarTinyAesthetic:not(.top) button[class^=cMenuToolbarCommandsubItem] {
  margin: auto;
  padding: 0px;
  box-shadow: none;
  border: none;
  display: flex;
  border-radius: 3px;
  font-size: 10px;
  margin-right: 0px;
  position: relative;
  background-color: transparent;

  place-items: center;
  clear: both;
  max-width: 28px;
  max-height: 23px;

}

button[class^=cMenuToolbarCommandsubItem]::after {

  content: url("data:image/svg+xml,%3Csvg width='4' height='4' version='1.1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1024 1024' enable-background='new 0 0 1024 1024' xml:space='preserve'%3E%3Cpath fill='%23666' d='M13.24 80.11 l461.75 560.8 q14.56 16.02 36.41 16.02 q21.85 0 36.42 -16.02 l463.2 -560.8 q10.2 -10.19 12.38 -24.75 q2.18 -14.57 -3.64 -27.68 q-5.82 -13.11 -18.21 -20.39 q-12.39 -7.29 -26.95 -7.29 l-924.95 0 q-20.4 0 -34.23 13.11 q-13.84 13.11 -15.29 32.77 q-1.46 19.66 13.11 34.23 Z'/%3E%3C/svg%3E");

  margin-left: 1px;
  margin-top: 6px;

}


:is(#cMenuToolbarModalBar, #cMenuToolbarPopoverBar) button[class^=cMenuToolbarCommandsubItem]>.subitem {
  background-color: var(--color-base-10, --background-primary);
  border-radius: 4px;
  border: 1px solid var(--background-modifier-border);
  
  position: absolute;
  z-index: var(--layer-menu);
  user-select: none;
  transform: translateY(90%) translateX(0%);
  -webkit-transform: translateY(90%) translateX(0%);
  display: flex;

}

:is(#cMenuToolbarModalBar, #cMenuToolbarPopoverBar) button[class^=cMenuToolbarCommandsubItem]>.subitem svg {
  max-width: 1.3em;
  max-height: 1.3em;
}

:is(#cMenuToolbarModalBar, #cMenuToolbarPopoverBar) button[class^=cMenuToolbarCommandsubItem]>.subitem button.menu-item {
  background-color: var(--background-secondary);
  line-height: 2em;
  display: inline-flex;
  box-shadow: none;
  align-items: center;
}

:is(#cMenuToolbarModalBar, #cMenuToolbarPopoverBar) button[class^=cMenuToolbarCommandsubItem]>.subitem button:hover {
  background-color: var(--interactive-hover);
  box-shadow: var(--input-shadow-hover);
}


:is(#cMenuToolbarModalBar, #cMenuToolbarPopoverBar) button[class^=cMenuToolbarCommandsubItem]>.subitem .menu-item {
  margin-left: 2px;
  margin-right: 2px;
  padding: 0px 4px 0px 4px;
}

:is(#cMenuToolbarModalBar, #cMenuToolbarPopoverBar) button[class^=cMenuToolbarCommandsubItem]>.subitem {

  visibility: hidden;
  transition: all 0.3s linear;
  -webkit-transition: all 0.3s linear;
}





:is(#cMenuToolbarModalBar, #cMenuToolbarPopoverBar) button.cMenuToolbarCommandsubItem-font-color .triangle-icon {
  position: absolute;
  margin-left: 18px;
  bottom: 8%;
  background-size: 4px 4px;
  background-image: url("data:image/svg+xml,%3Csvg width='4' height='4' version='1.1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1024 1024' enable-background='new 0 0 1024 1024' xml:space='preserve'%3E%3Cpath fill='%23666' d='M13.24 80.11 l461.75 560.8 q14.56 16.02 36.41 16.02 q21.85 0 36.42 -16.02 l463.2 -560.8 q10.2 -10.19 12.38 -24.75 q2.18 -14.57 -3.64 -27.68 q-5.82 -13.11 -18.21 -20.39 q-12.39 -7.29 -26.95 -7.29 l-924.95 0 q-20.4 0 -34.23 13.11 q-13.84 13.11 -15.29 32.77 q-1.46 19.66 13.11 34.23 Z'/%3E%3C/svg%3E");

  width: 16px;
  height: 20px;
  background-position: center;

  background-repeat: no-repeat;
  min-width: unset;
  border-left: 2px solid transparent;
}

:is(#cMenuToolbarModalBar, #cMenuToolbarPopoverBar):not(.top) button.cMenuToolbarCommandsubItem-font-color .triangle-icon {
  margin-left: 16px;

}

:is(#cMenuToolbarModalBar, #cMenuToolbarPopoverBar):not(.top) button.cMenuToolbarCommandsubItem-font-color .x-color-picker-wrapper {
  top: auto;
  bottom: calc(100%);
}

:is(#cMenuToolbarModalBar, #cMenuToolbarPopoverBar):not(.top) button[class^=cMenuToolbarCommandsubItem]:not(.cMenuToolbarSecond)>.subitem {
  bottom: calc(100% + 2.8em);
}


:is(#cMenuToolbarModalBar, #cMenuToolbarPopoverBar) button.cMenuToolbarCommandsubItem-font-color .subitem {
  visibility: hidden;
  transition: all 0.3s linear;
  -webkit-transition: all 0.3s linear;
}

:is(#cMenuToolbarModalBar, #cMenuToolbarPopoverBar) button.cMenuToolbarCommandsubItem-font-color .subitem:hover {
  visibility: visible;
  transition: all 0.3s linear;
  -webkit-transition: all 0.3s linear;
}


:is(#cMenuToolbarModalBar, #cMenuToolbarPopoverBar) button[class^=cMenuToolbarCommandsubItem]:hover>.subitem {

  visibility: visible;
  transition: all 0.3s linear;
  -webkit-transition: all 0.3s linear;
}

/* :is(#cMenuToolbarModalBar,#cMenuToolbarPopoverBar) button[class^=cMenuToolbarCommandsubItem] >.subitem:hover  {
  visibility:visible;
  transition: all 0.3s linear;
  -webkit-transition:  all 0.3s linear;
 } */

.cMenuToolbarCommandsubItem-font-color button {
  background-color: transparent;
}

.cMenuToolbarCommandsubItem-font-color button:hover {
  background-color: var(--interactive-normal);
}

.cMenuToolbarSettingsTabsContainer .cMenuToolbarCommandItem .setting-item-info {

  flex: 30%;
  margin: 0;
}

.cMenuToolbarSettingsTabsContainer .cMenuToolbarSettingsTabsContainer_sub {
  border-left: 1px solid var(--background-modifier-border);
  flex-flow: column;
  min-height: 45px;
  display: flex;
  padding: 0;
  margin-left: 10px;
  flex: 70%;
}

.cMenuToolbarSettingsTabsContainer .cMenuToolbarSettingsTabsContainer_sub:empty {
  border: 2px dashed rgba(var(--interactive-accent-rgb), 0.5);
}

.cMenuToolbarSettingsTabsContainer .cMenuToolbarSettingsTabsContainer_sub:empty::before {
  content: "✖️Drag it here";
  margin: auto;
  font-size: 12px;
}

.cMenuToolbarSettingsTabsContainer .cMenuToolbarSettingsTabsContainer_sub .cMenuToolbarCommandItem {
  flex: auto;
  margin-left: 2em;
  ;
}

.cMenuToolbarSettingsTabsContainer .cMenuToolbarSettingsTabsContainer_sub .setting-item-control {
  flex: 0;
}

.cMenuToolbarSettingsTabsContainer .cMenuToolbarCommandSubItem>.setting-item-info {
  flex: 70px;
}

.cMenuToolbarCommandSubItem>.setting-item-control {

  justify-content: flex-start;
}

.modal.mod-settings button:not(.mod-cta):not(.mod-warning).cMenuToolbarSettingsButton.cMenuToolbarSettingsButtonaddsub {
  background-color: var(--background-secondary-alt);
}


.setting-item button.cMenuToolbarSettingsIcon {
  display: block;
  transform: translateX(-30%);
  -webkit-transform: translateX(-30%);
}

.setting-item button.cMenuToolbarSettingsIcon:empty::before {
  content: "❗";
}

.setting-item button.cMenuToolbarSettingsIcon svg {
  max-width: 1.5em;
  max-height: 1.5em;
}

.modal.mod-settings button:not(.mod-cta):not(.mod-warning).cMenuToolbarSettingsIcon:hover {
  background-color: var(--interactive-accent-hover);
}

.modal.mod-settings button:not(.mod-cta):not(.mod-warning).cMenuToolbarSettingsIcon {
  background-color: transparent;
  box-shadow: 0 1px 1px 0px var(--background-modifier-border);
}

@media screen and (min-width: 781px) {
  .cMenuToolbar-Modal .wideInputPromptInputEl {
    width: 40rem;
    max-width: 100%;
    height: 20rem;
    background-color: rgb(var(--mono-rgb-0), 0.8);
  }
}

.cMenuToolbarcustomIcon svg {
  max-width: 1.3em;
  max-height: 1.3em;
  display: flex;
}


.cMenuToolbarSettingsButton svg {
  max-width: 1.3em;
  max-height: 1.3em;
  display: flex;
}

.cmdr-page-header {
  min-width: 1em;
  ;
}


.x-color-picker-wrapper {
  right: 0px;
  top: 1.8em;
  min-width: 1px;
  padding: 10px;
  box-shadow: 0 8px 10px 1px rgba(0, 0, 0, 0.14);
  position: absolute;
  width: fit-content;
  font-weight: 400;
  font-family: Source Sans Pro, sans-serif;
  border-radius: 4px;
  background-color: var(--color-base-10, --background-primary);
}

.markdown-source-view.mod-cm6 .x-color-picker-wrapper table.x-color-picker-table#x-color-picker-table {
  width: unset;
  border-collapse: separate;
  border-spacing: 6px;
  margin: auto !important;
}

.x-color-picker-wrapper table.x-color-picker-table#x-backgroundcolor-picker-table {
  width: unset;
  border-collapse: separate;
  border-spacing: 6px;
  margin: auto !important;
}

.x-color-picker-wrapper .x-color-picker-table th {
  border: 0;
  text-align: left;
  font-weight: normal;
  background: transparent !important;
  color: #718096;
}

.x-color-picker-wrapper #x-color-picker-table td {
  font-size: 1px;
  padding: 9px;
  cursor: pointer;
  border: solid 1px var(--background-modifier-border);
}

.x-color-picker-wrapper #x-backgroundcolor-picker-table td {
  font-size: 1px;
  border-radius: 50%;
  padding: 9px;
  cursor: pointer;
  border: solid 1px var(--background-modifier-border);
}

.x-color-picker-wrapper .x-color-picker-table tr td:hover {
  box-shadow: 0 3px 6px -4px rgba(0, 0, 0, .12), 0 6px 16px 0 rgba(0, 0, 0, .08), 0 9px 28px 8px rgba(0, 0, 0, .05);
}

.x-color-picker-wrapper tbody>tr:hover {
  background-color: transparent !important;
}

/**top**/
#cMenuToolbarModalBar.top {
  display: flex;
  flex-wrap: nowrap;
  position: relative;
  height: 38px;
  align-items: center;
  transition: all 0.2s linear;
  -webkit-transition: all 0.2s linear;

}

#cMenuToolbarModalBar.top.autohide {
  opacity: 0;
}


#cMenuToolbarModalBar.top.autohide:hover {
  opacity: 1;
  transition: all 0.5s linear;
}


#cMenuToolbarModalBar.top :is(.cMenuToolbarCommandItem, button[class^=cMenuToolbarCommandsubItem]):not(.cMenuToolbar-Divider-Line) {
  font-size: 10px;
  margin-right: 0px;
  clear: both;
  opacity: 1;
  flex-shrink: 0;
  height: 26px;
  padding: 0;
  border: none;
  background: transparent;
  cursor: pointer;
  outline: none;
  box-shadow: none;
  border-radius: 2px;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  transition: all 0.2s linear;
  -webkit-transition: all 0.2s linear;




}

#cMenuToolbarModalBar.top button.cMenuToolbarCommandItem:hover {
  background-color: var(--interactive-hover);
}



#cMenuToolbarPopoverBar {

  padding: 0 10px;
  display: inline-flex;
  align-items: center;
  width: fit-content;
  z-index: var(--layer-status-bar);
  background-color: var(--color-base-10, --background-primary);
  background-clip: padding-box;
  border-radius: 6px;

  margin-left: auto;
  margin-right: 25px;
  transition: all 0.1s linear;
  -webkit-transition: all 0.1s linear;
  margin-top: 32px;
  position: absolute;
  right: 0;
}

#cMenuToolbarPopoverBar :is(.cMenuToolbarCommandItem, button[class^=cMenuToolbarCommandsubItem]) {

  height: 26px;
  margin-left: 4px;
  font-size: 10px;
  margin-right: 4px;
  clear: both;
  opacity: 1;
  flex-shrink: 0;
  height: 26px;
  padding: 0;
  border: none;
  background: transparent;
  cursor: pointer;
  outline: none;
  box-shadow: none;
  border-radius: 2px;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  transition: all 0.2s linear;
  -webkit-transition: all 0.2s linear;

}

#cMenuToolbarPopoverBar :is(.cMenuToolbarCommandItem, button[class^=cMenuToolbarCommandsubItem]):hover {
  background-color: var(--interactive-hover);
}

#cMenuToolbarModalBar .more-menu {
  display: flex;
  align-items: center;
  box-shadow: none;
  margin-left: 4px;
  border-left: 1px inset var(--background-modifier-form-field);
  height: 24px;
  opacity: 0.8;
}

/*Divider-Line**/

.cMenuToolbarSettingsTabsContainer .cMenuToolbar-Divider-Line {
  padding: 0;

  line-height: 0px;
  border-left: 200px solid rgba(var(--interactive-accent-rgb), 0.05);
  border-right: 200px solid rgba(var(--interactive-accent-rgb), 0.05);
  text-align: center;
  background: rgba(var(--interactive-accent-rgb), 0.2);
}

.cMenuToolbarSettingsTabsContainer .cMenuToolbar-Divider-Line .setting-item-control button:not(:last-child) {
  display: none;
}

.cMenuToolbarSettingsTabsContainer .cMenuToolbar-Divider-Line .setting-item-info {
  flex: 1 1 auto;
}

.cMenuToolbarSettingsTabsContainer .cMenuToolbar-Divider-Line .setting-item-control {
  justify-content: flex-start;
}

.cMenuToolbarSettingsTabsContainer .cMenuToolbar-Divider-Line .setting-item-info .setting-item-name {
  font-size: 12px;
  text-align: right;

}

.cMenuToolbarSettingsTabsContainer .cMenuToolbar-Divider-Line .setting-item-control button:last-child {
  padding: 0;
  background-color: transparent !important;
}

.cMenuToolbarSettingsTabsContainer .cMenuToolbar-Divider-Line .setting-item-control button:last-child svg {
  display: none;
}

.cMenuToolbarSettingsTabsContainer .cMenuToolbar-Divider-Line .setting-item-control button:last-child::before {
  content: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 1024 1024' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M511.674077 66.707284c-246.52265 0-446.347744 199.835328-446.347744 446.347744s199.825095 446.356954 446.347744 446.356954c246.50423 0 446.348768-199.844537 446.348768-446.356954S758.177284 66.707284 511.674077 66.707284zM744.967424 667.159826c21.8701 21.8701 21.8701 57.310264 0 79.199807-21.8701 21.851681-57.30924 21.851681-79.198783-0.019443L511.674077 592.264045 357.56007 746.359632c-21.8701 21.8701-57.30924 21.851681-79.17934-0.019443s-21.8701-57.290821 0-79.160921L432.493713 513.065262 278.379707 358.950232c-21.8701-21.86089-21.8701-57.328683 0-79.18855 21.8701-21.87931 57.30924-21.87931 79.17934 0l154.114007 154.104797 154.095587-154.104797c21.889543-21.87931 57.32766-21.87931 79.198783-0.010233 21.8701 21.8701 21.8701 57.348126 0 79.207993L590.89128 513.065262 744.967424 667.159826z' fill='%23666666'/%3E%3C/svg%3E");
}

:is(#cMenuToolbarModalBar, #cMenuToolbarPopoverBar) button.cMenuToolbarCommandItem.cMenuToolbar-Divider-Line {
  min-width: unset;
  flex-shrink: 0;
  display: inline-flex;
  width: 0.6px;
  background-color: var(--background-modifier-border);
  height: 22px;
  opacity: 0.8;
  margin: 0;
}

.theme-dark :is(#cMenuToolbarModalBar, #cMenuToolbarPopoverBar) button.cMenuToolbarCommandItem.cMenuToolbar-Divider-Line {

  background-color: #4f4f5188;

}

:is(#cMenuToolbarModalBar, #cMenuToolbarPopoverBar) button.cMenuToolbarCommandItem.cMenuToolbar-Divider-Line svg {
  display: none;
}

.workspace-tabs.mod-stacked .workspace-tab-header:not(.is-active)+.workspace-leaf #cMenuToolbarModalBar {
  opacity: 0;
}

:is(.cm-line, p) span[style^="background:rgba"] {
  color: var(--text-normal);
}

:is(.cm-line, p) span[style^="background:#"] {
  color: black;
}

.setting-item.toolbar-cta:after {
  content: "";
  position: absolute;
  top: -10%;
  width: 104%;
  left: -2%;
  height: 120%;
  outline: 2px solid var(--text-accent);
  border-radius: 1em;
  pointer-events: none;
}

.setting-item.toolbar-cta {
  position: relative;
} /* no content */
.checklist-plugin-main {
  --checklist-checkboxSize: 20px;
  --checklist-checkboxCheckedSize: 12px;
  --checklist-checkboxBorder: 2px solid var(--text-muted);
  --checklist-checkboxFill: var(--text-muted);
  --checklist-listItemBorderRadius: 8px;
  --checklist-listItemMargin: 0 0 12px;
  --checklist-listItemBackground: var(--interactive-normal);
  --checklist-listItemBackground--hover: var(--interactive-hover);
  --checklist-listItemMargin--compact: 0 0 8px;
  --checklist-listItemBoxShadow: none;
  --checklist-headerMargin: 0 0 8px;
  --checklist-headerGap: 4px;
  --checklist-headerFontSize: 18px;
  --checklist-headerFontWeight: 600;
  --checklist-iconSize: 24px;
  --checklist-iconFill: var(--text-normal);
  --checklist-iconFill--accent: #777;
  --checklist-textColor: var(--text-muted);
  --checklist-accentColor: var(--text-accent);
  --checklist-accentColor--active: var(--text-accent-hover);
  --checklist-pageMargin: 0 0 4px;
  --checklist-loaderSize: 16px;
  --checklist-loaderBorderColor: var(--text-muted) var(--text-muted) var(--text-normal);
  --checklist-buttonPadding: 0 5px;
  --checklist-buttonBoxShadow: none;
  --checklist-countPadding: 0 6px;
  --checklist-countBackground: var(--interactive-normal);
  --checklist-countFontSize: 13px;
  --checklist-togglePadding: 8px 8px 8px 12px;
  --checklist-contentPadding: 8px 12px 8px 0;
  --checklist-contentPadding--compact: 4px 8px;
  --checklist-togglePadding--compact: 4px 8px;
  --checklist-countBorderRadius: 4px;
  --checklist-tagBaseColor: var(--text-faint);
  --checklist-tagSubColor: #bbb;
  --checklist-groupMargin: 8px;
  --checklist-contentFontSize: var(--editor-font-size);
  --checklist-searchBackground: var(--background-primary);
}

.checklist-plugin-main button {
  margin: initial;
}

.checklist-plugin-main p {
  margin: initial;
  word-break: break-word;
}
 :root {
    --tasks-details-icon: url("data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z'/></svg>");

}

.plugin-tasks-query-explanation{
    /* Prevent long explanation lines wrapping, so they are more readable,
       especially on small screens.

       A horizontal scroll bar will be displayed, if the explanation
       is too wide to fit.
     */
    --code-white-space: pre;
}

.tasks-count {
    color: var(--text-faint);
    padding-left: 20px;
}

/* Tooltip pop up above the description in short mode */
.tooltip.pop-up {
    animation: pop-up-animation 200ms forwards ease-in-out;
}
@keyframes pop-up-animation {
  0% {
    opacity: 0;
    transform: translateY(-100%) scale(1);
  }
  20% {
    opacity: 0.7;
    transform: translateY(-100%) scale(1.02);
  }
  40% {
    opacity: 1;
    transform: translateY(-100%) scale(1.05);
  }
  100% {
    opacity: 1;
    transform: translateY(-100%) scale(1);
  }
}

/* Pencil icon. */
.tasks-edit {
    background-color: var(--text-faint);
    mask-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20aria-hidden%3D%22true%22%20focusable%3D%22false%22%20width%3D%221em%22%20height%3D%221em%22%20style%3D%22-ms-transform%3A%20rotate(360deg)%3B%20-webkit-transform%3A%20rotate(360deg)%3B%20transform%3A%20rotate(360deg)%3B%22%20preserveAspectRatio%3D%22xMidYMid%20meet%22%20viewBox%3D%220%200%201536%201536%22%3E%3Cpath%20d%3D%22M363%201408l91-91l-235-235l-91%2091v107h128v128h107zm523-928q0-22-22-22q-10%200-17%207l-542%20542q-7%207-7%2017q0%2022%2022%2022q10%200%2017-7l542-542q7-7%207-17zm-54-192l416%20416l-832%20832H0v-416zm683%2096q0%2053-37%2090l-166%20166l-416-416l166-165q36-38%2090-38q53%200%2091%2038l235%20234q37%2039%2037%2091z%22%20fill%3D%22%23626262%22%2F%3E%3C%2Fsvg%3E");
    -webkit-mask-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20aria-hidden%3D%22true%22%20focusable%3D%22false%22%20width%3D%221em%22%20height%3D%221em%22%20style%3D%22-ms-transform%3A%20rotate(360deg)%3B%20-webkit-transform%3A%20rotate(360deg)%3B%20transform%3A%20rotate(360deg)%3B%22%20preserveAspectRatio%3D%22xMidYMid%20meet%22%20viewBox%3D%220%200%201536%201536%22%3E%3Cpath%20d%3D%22M363%201408l91-91l-235-235l-91%2091v107h128v128h107zm523-928q0-22-22-22q-10%200-17%207l-542%20542q-7%207-7%2017q0%2022%2022%2022q10%200%2017-7l542-542q7-7%207-17zm-54-192l416%20416l-832%20832H0v-416zm683%2096q0%2053-37%2090l-166%20166l-416-416l166-165q36-38%2090-38q53%200%2091%2038l235%20234q37%2039%2037%2091z%22%20fill%3D%22%23626262%22%2F%3E%3C%2Fsvg%3E");
    mask-size: contain;
    -webkit-mask-size: contain;
    display: inline-block;
    width: 1em;
    height: 1em;
    vertical-align: middle;
    margin-left: 0.5em;
    cursor: pointer;
}

/* Urgency score */
.tasks-urgency {
    font-size: var(--font-ui-smaller);
    font-family: var(--font-interface);
    padding: 2px 6px;
    border-radius: var(--radius-s);
    color: var(--text-normal);
    background-color: var(--background-secondary);
    margin-left: 0.5em;
    line-height: 1;
}

.internal-link.internal-link-short-mode {
    text-decoration: none;
}

.tasks-list-text {
    position: relative;
}

.tasks-list-text .tooltip {
    position: absolute;
    top: 0px;
    left: 0px;
    white-space: nowrap;
}

/* Hide tags that Obsidian recognises, if `hide tags` instruction was used. */
.tasks-layout-hide-tags .task-description a.tag {
    display: none;
}

.tasks-setting-important {
    color: red;
    font-weight: bold;
}

/**------------------------------------------------------------------------
 **                            MODAL
 *------------------------------------------------------------------------**/

.tasks-modal-section + .tasks-modal-section {
    margin-top: 16px;
}

.tasks-modal-section label {
    display: inline-block;
    margin-bottom: 4px;
}

.tasks-modal-section label > span {
    display: inline-block;
}

.tasks-modal .with-accesskeys .accesskey-first::first-letter,
.tasks-modal .with-accesskeys .accesskey {
    text-decoration: underline;
    text-underline-offset: 1pt;
}

.tasks-modal-buttons {
    display: grid;
    grid-template-columns: 3fr 1fr;
    column-gap: .5em;
}

.tasks-modal label + input[type="checkbox"] {
    margin-left: 0.67em;
    top: 2px;
}

.tasks-modal input[type="text"] {
    width: 100%;
}

.tasks-modal textarea {
    width: 100%;
    min-height: calc(var(--input-height) * 2);
    resize: vertical;
}

.tasks-modal-priorities {
    display: grid;
    grid-template-columns: 4em 8em 8em 8em;
    grid-column-gap: 1.33em;
}

.tasks-modal-priorities span {
    line-height: 1.41;
    white-space: nowrap;
}

.tasks-modal-priorities label {
    border-radius: var(--input-radius);
    padding: 2px 3px;
    grid-column: 1;
    grid-row-start: 1;
    grid-row-end: 7;
}

.tasks-modal-priorities input:focus + label {
    box-shadow: 0 0 0 2px var(--background-modifier-border-focus);
    border-color: var(--background-modifier-border-focus);
}

.tasks-modal-priorities input:checked + label > span {
    font-weight: bold;
}

.tasks-modal-priorities input:not(:checked) + label > span:nth-child(4) {
    filter: grayscale(100%) opacity(60%);
}

.tasks-modal-dates {
    display: grid;
    grid-template-columns: 5.5em auto;
    column-gap: .5em;
    row-gap: 5px;
}

.tasks-modal-dates > label {
    grid-column: 1;
    margin-top: 6px;
}

.tasks-modal-dates > input, .tasks-modal-dates > code {
    grid-column: 2;
    align-items: stretch;
}

.tasks-modal-dates > code {
    margin-bottom: 5px;
}

.tasks-modal-dates > div {
    grid-column-start: 1;
    grid-column-end: 3;
}

.tasks-modal-status {
    display: flex;
    justify-content: space-between;
}

.tasks-modal-error {
    border: 1px solid red !important;
}

.tasks-modal button:disabled {
    pointer-events: none !important;
    opacity: 0.3 !important;
}

@media (max-width: 649px) {
    .tasks-modal-priorities {
        grid-template-columns: 4em 7.5em 5em;
        margin-bottom: -10px;
    }
    .tasks-modal-priorities > label {
        grid-row: 1 / span 7;
    }
    .tasks-modal-dates {
        grid-template-columns: 1fr;
    }
    .tasks-modal-dates > label {
        margin: 0;
    }
    .tasks-modal-dates > input, .tasks-modal-dates > code {
        grid-column: 1;
    }
    .tasks-modal-dates > div {
        grid-column-end: 1;
    }
    .tasks-modal-status {
        display: block;
    }
}

@media (max-width: 399px) {
    .tasks-modal-priorities {
        grid-template-columns: 4em auto;
    }
    .tasks-modal-priorities > label {
        grid-row: 1 / span 7;
    }
}

@media (max-width: 259px) {
    .tasks-modal-priorities {
        grid-template-columns: 1fr;
        margin-bottom: 0;
    }
    .tasks-modal-priorities > label {
        grid-row: 1;
    }
}

/**------------------------------------------------------------------------
 **                            SETTINGS
 *------------------------------------------------------------------------**/

.tasks-settings-is-invalid {
    /* Dark red text on pale background*/
    color: var(--text-error) !important;
    background-color: rgba(var(--background-modifier-error-rgb), 0.2) !important;
}


 .tasks-settings .additional {
    margin: 6px 12px;
}
.tasks-settings .additional > .setting-item {
    border-top: 0;
    padding-top: 9px;
}


.tasks-settings details > summary {
    outline: none;
    display: block !important;
    list-style: none !important;
    list-style-type: none !important;
    min-height: 1rem;
    border-top-left-radius: 0.1rem;
    border-top-right-radius: 0.1rem;
    cursor: pointer;
    position: relative;
}

.tasks-settings details > summary::-webkit-details-marker,
.tasks-settings details > summary::marker {
    display: none !important;
}

.tasks-settings details > summary > .collapser {
    position: absolute;
    top: 50%;
    right: 8px;
    transform: translateY(-50%);
    content: "";
}

.tasks-settings details > summary > .collapser > .handle {
    transform: rotate(0deg);
    transition: transform 0.25s;
    background-color: currentColor;
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-size: contain;
    mask-size: contain;
    -webkit-mask-image: var(--tasks-details-icon);
    mask-image: var(--tasks-details-icon);
    width: 20px;
    height: 20px;
}

.tasks-settings details[open] > summary > .collapser > .handle {
    transform: rotate(90deg);
}

.tasks-nested-settings .setting-item {
    border: 0px;
    padding-bottom: 0;
}
.tasks-nested-settings {
    padding-bottom: 18px;
}
.tasks-nested-settings[open] .setting-item-heading,
.tasks-nested-settings:not(details) .setting-item-heading {
    border-top: 0px;
    border-bottom: 1px solid var(--background-modifier-border);
}

.tasks-settings .row-for-status {
    margin-top: 0px;
    margin-bottom: 0px;
}
 .choices{position:relative;margin-bottom:24px;font-size:16px}.choices:focus{outline:none}.choices:last-child{margin-bottom:0}.choices.is-disabled .choices__inner,.choices.is-disabled .choices__input{background-color:#eaeaea;cursor:not-allowed;-webkit-user-select:none;-ms-user-select:none;user-select:none}.choices.is-disabled .choices__item{cursor:not-allowed}.choices [hidden]{display:none!important}.choices[data-type*=select-one]{cursor:pointer}.choices[data-type*=select-one] .choices__inner{padding-bottom:7.5px}.choices[data-type*=select-one] .choices__input{display:block;width:100%;padding:10px;border-bottom:1px solid #dddddd;background-color:#fff;margin:0}.choices[data-type*=select-one] .choices__button{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyMSAyMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yLjU5Mi4wNDRsMTguMzY0IDE4LjM2NC0yLjU0OCAyLjU0OEwuMDQ0IDIuNTkyeiIvPjxwYXRoIGQ9Ik0wIDE4LjM2NEwxOC4zNjQgMGwyLjU0OCAyLjU0OEwyLjU0OCAyMC45MTJ6Ii8+PC9nPjwvc3ZnPg==);padding:0;background-size:8px;position:absolute;top:50%;right:0;margin-top:-10px;margin-right:25px;height:20px;width:20px;border-radius:10em;opacity:.5}.choices[data-type*=select-one] .choices__button:hover,.choices[data-type*=select-one] .choices__button:focus{opacity:1}.choices[data-type*=select-one] .choices__button:focus{box-shadow:0 0 0 2px #00bcd4}.choices[data-type*=select-one] .choices__item[data-value=""] .choices__button{display:none}.choices[data-type*=select-one]:after{content:"";height:0;width:0;border-style:solid;border-color:#333333 transparent transparent transparent;border-width:5px;position:absolute;right:11.5px;top:50%;margin-top:-2.5px;pointer-events:none}.choices[data-type*=select-one].is-open:after{border-color:transparent transparent #333333 transparent;margin-top:-7.5px}.choices[data-type*=select-one][dir=rtl]:after{left:11.5px;right:auto}.choices[data-type*=select-one][dir=rtl] .choices__button{right:auto;left:0;margin-left:25px;margin-right:0}.choices[data-type*=select-multiple] .choices__inner,.choices[data-type*=text] .choices__inner{cursor:text}.choices[data-type*=select-multiple] .choices__button,.choices[data-type*=text] .choices__button{position:relative;display:inline-block;margin:0 -4px 0 8px;padding-left:16px;border-left:1px solid #008fa1;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyMSAyMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yLjU5Mi4wNDRsMTguMzY0IDE4LjM2NC0yLjU0OCAyLjU0OEwuMDQ0IDIuNTkyeiIvPjxwYXRoIGQ9Ik0wIDE4LjM2NEwxOC4zNjQgMGwyLjU0OCAyLjU0OEwyLjU0OCAyMC45MTJ6Ii8+PC9nPjwvc3ZnPg==);background-size:8px;width:8px;line-height:1;opacity:.75;border-radius:0}.choices[data-type*=select-multiple] .choices__button:hover,.choices[data-type*=select-multiple] .choices__button:focus,.choices[data-type*=text] .choices__button:hover,.choices[data-type*=text] .choices__button:focus{opacity:1}.choices__inner{display:inline-block;vertical-align:top;width:100%;background-color:#f9f9f9;padding:7.5px 7.5px 3.75px;border:1px solid #dddddd;border-radius:2.5px;font-size:14px;min-height:44px;overflow:hidden}.is-focused .choices__inner,.is-open .choices__inner{border-color:#b7b7b7}.is-open .choices__inner{border-radius:2.5px 2.5px 0 0}.is-flipped.is-open .choices__inner{border-radius:0 0 2.5px 2.5px}.choices__list{margin:0;padding-left:0;list-style:none}.choices__list--single{display:inline-block;padding:4px 16px 4px 4px;width:100%}[dir=rtl] .choices__list--single{padding-right:4px;padding-left:16px}.choices__list--single .choices__item{width:100%}.choices__list--multiple{display:inline}.choices__list--multiple .choices__item{display:inline-block;vertical-align:middle;border-radius:20px;padding:4px 10px;font-size:12px;font-weight:500;margin-right:3.75px;margin-bottom:3.75px;background-color:#00bcd4;border:1px solid #00a5bb;color:#fff;word-break:break-all;box-sizing:border-box}.choices__list--multiple .choices__item[data-deletable]{padding-right:5px}[dir=rtl] .choices__list--multiple .choices__item{margin-right:0;margin-left:3.75px}.choices__list--multiple .choices__item.is-highlighted{background-color:#00a5bb;border:1px solid #008fa1}.is-disabled .choices__list--multiple .choices__item{background-color:#aaa;border:1px solid #919191}.choices__list--dropdown{visibility:hidden;z-index:1;position:absolute;width:100%;background-color:#fff;border:1px solid #dddddd;top:100%;margin-top:-1px;border-bottom-left-radius:2.5px;border-bottom-right-radius:2.5px;overflow:hidden;word-break:break-all;will-change:visibility}.choices__list--dropdown.is-active{visibility:visible}.is-open .choices__list--dropdown{border-color:#b7b7b7}.is-flipped .choices__list--dropdown{top:auto;bottom:100%;margin-top:0;margin-bottom:-1px;border-radius:.25rem .25rem 0 0}.choices__list--dropdown .choices__list{position:relative;max-height:300px;overflow:auto;-webkit-overflow-scrolling:touch;will-change:scroll-position}.choices__list--dropdown .choices__item{position:relative;padding:10px;font-size:14px}[dir=rtl] .choices__list--dropdown .choices__item{text-align:right}@media (min-width: 640px){.choices__list--dropdown .choices__item--selectable{padding-right:100px}.choices__list--dropdown .choices__item--selectable:after{content:attr(data-select-text);font-size:12px;opacity:0;position:absolute;right:10px;top:50%;transform:translateY(-50%)}[dir=rtl] .choices__list--dropdown .choices__item--selectable{text-align:right;padding-left:100px;padding-right:10px}[dir=rtl] .choices__list--dropdown .choices__item--selectable:after{right:auto;left:10px}}.choices__list--dropdown .choices__item--selectable.is-highlighted{background-color:#f2f2f2}.choices__list--dropdown .choices__item--selectable.is-highlighted:after{opacity:.5}.choices__item{cursor:default}.choices__item--selectable{cursor:pointer}.choices__item--disabled{cursor:not-allowed;-webkit-user-select:none;-ms-user-select:none;user-select:none;opacity:.5}.choices__heading{font-weight:600;font-size:12px;padding:10px;border-bottom:1px solid #f7f7f7;color:gray}.choices__button{text-indent:-9999px;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;background-color:transparent;background-repeat:no-repeat;background-position:center;cursor:pointer}.choices__button:focus{outline:none}.choices__input{display:inline-block;vertical-align:baseline;background-color:#f9f9f9;font-size:14px;margin-bottom:5px;border:0;border-radius:0;max-width:100%;padding:4px 0 4px 2px}.choices__input:focus{outline:0}[dir=rtl] .choices__input{padding-right:2px;padding-left:0}.choices__placeholder{opacity:.5}.flatpickr-calendar{background:transparent;opacity:0;display:none;text-align:center;visibility:hidden;padding:0;-webkit-animation:none;animation:none;direction:ltr;border:0;font-size:14px;line-height:24px;border-radius:5px;position:absolute;width:307.875px;-webkit-box-sizing:border-box;box-sizing:border-box;-ms-touch-action:manipulation;touch-action:manipulation;background:#fff;-webkit-box-shadow:1px 0 0 #e6e6e6,-1px 0 0 #e6e6e6,0 1px 0 #e6e6e6,0 -1px 0 #e6e6e6,0 3px 13px rgba(0,0,0,.08);box-shadow:1px 0 #e6e6e6,-1px 0 #e6e6e6,0 1px #e6e6e6,0 -1px #e6e6e6,0 3px 13px #00000014}.flatpickr-calendar.open,.flatpickr-calendar.inline{opacity:1;max-height:640px;visibility:visible}.flatpickr-calendar.open{display:inline-block;z-index:99999}.flatpickr-calendar.animate.open{-webkit-animation:fpFadeInDown .3s cubic-bezier(.23,1,.32,1);animation:fpFadeInDown .3s cubic-bezier(.23,1,.32,1)}.flatpickr-calendar.inline{display:block;position:relative;top:2px}.flatpickr-calendar.static{position:absolute;top:calc(100% + 2px)}.flatpickr-calendar.static.open{z-index:999;display:block}.flatpickr-calendar.multiMonth .flatpickr-days .dayContainer:nth-child(n+1) .flatpickr-day.inRange:nth-child(7n+7){-webkit-box-shadow:none!important;box-shadow:none!important}.flatpickr-calendar.multiMonth .flatpickr-days .dayContainer:nth-child(n+2) .flatpickr-day.inRange:nth-child(7n+1){-webkit-box-shadow:-2px 0 0 #e6e6e6,5px 0 0 #e6e6e6;box-shadow:-2px 0 #e6e6e6,5px 0 #e6e6e6}.flatpickr-calendar .hasWeeks .dayContainer,.flatpickr-calendar .hasTime .dayContainer{border-bottom:0;border-bottom-right-radius:0;border-bottom-left-radius:0}.flatpickr-calendar .hasWeeks .dayContainer{border-left:0}.flatpickr-calendar.hasTime .flatpickr-time{height:40px;border-top:1px solid #e6e6e6}.flatpickr-calendar.noCalendar.hasTime .flatpickr-time{height:auto}.flatpickr-calendar:before,.flatpickr-calendar:after{position:absolute;display:block;pointer-events:none;border:solid transparent;content:"";height:0;width:0;left:22px}.flatpickr-calendar.rightMost:before,.flatpickr-calendar.arrowRight:before,.flatpickr-calendar.rightMost:after,.flatpickr-calendar.arrowRight:after{left:auto;right:22px}.flatpickr-calendar.arrowCenter:before,.flatpickr-calendar.arrowCenter:after{left:50%;right:50%}.flatpickr-calendar:before{border-width:5px;margin:0 -5px}.flatpickr-calendar:after{border-width:4px;margin:0 -4px}.flatpickr-calendar.arrowTop:before,.flatpickr-calendar.arrowTop:after{bottom:100%}.flatpickr-calendar.arrowTop:before{border-bottom-color:#e6e6e6}.flatpickr-calendar.arrowTop:after{border-bottom-color:#fff}.flatpickr-calendar.arrowBottom:before,.flatpickr-calendar.arrowBottom:after{top:100%}.flatpickr-calendar.arrowBottom:before{border-top-color:#e6e6e6}.flatpickr-calendar.arrowBottom:after{border-top-color:#fff}.flatpickr-calendar:focus{outline:0}.flatpickr-wrapper{position:relative;display:inline-block}.flatpickr-months{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.flatpickr-months .flatpickr-month{background:transparent;color:#000000e6;fill:#000000e6;height:34px;line-height:1;text-align:center;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;overflow:hidden;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.flatpickr-months .flatpickr-prev-month,.flatpickr-months .flatpickr-next-month{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-decoration:none;cursor:pointer;position:absolute;top:0;height:34px;padding:10px;z-index:3;color:#000000e6;fill:#000000e6}.flatpickr-months .flatpickr-prev-month.flatpickr-disabled,.flatpickr-months .flatpickr-next-month.flatpickr-disabled{display:none}.flatpickr-months .flatpickr-prev-month i,.flatpickr-months .flatpickr-next-month i{position:relative}.flatpickr-months .flatpickr-prev-month.flatpickr-prev-month,.flatpickr-months .flatpickr-next-month.flatpickr-prev-month{left:0}.flatpickr-months .flatpickr-prev-month.flatpickr-next-month,.flatpickr-months .flatpickr-next-month.flatpickr-next-month{right:0}.flatpickr-months .flatpickr-prev-month:hover,.flatpickr-months .flatpickr-next-month:hover{color:#959ea9}.flatpickr-months .flatpickr-prev-month:hover svg,.flatpickr-months .flatpickr-next-month:hover svg{fill:#f64747}.flatpickr-months .flatpickr-prev-month svg,.flatpickr-months .flatpickr-next-month svg{width:14px;height:14px}.flatpickr-months .flatpickr-prev-month svg path,.flatpickr-months .flatpickr-next-month svg path{-webkit-transition:fill .1s;transition:fill .1s;fill:inherit}.numInputWrapper{position:relative;height:auto}.numInputWrapper input,.numInputWrapper span{display:inline-block}.numInputWrapper input{width:100%}.numInputWrapper input::-ms-clear{display:none}.numInputWrapper input::-webkit-outer-spin-button,.numInputWrapper input::-webkit-inner-spin-button{margin:0;-webkit-appearance:none}.numInputWrapper span{position:absolute;right:0;width:14px;padding:0 4px 0 2px;height:50%;line-height:50%;opacity:0;cursor:pointer;border:1px solid rgba(57,57,57,.15);-webkit-box-sizing:border-box;box-sizing:border-box}.numInputWrapper span:hover{background:rgba(0,0,0,.1)}.numInputWrapper span:active{background:rgba(0,0,0,.2)}.numInputWrapper span:after{display:block;content:"";position:absolute}.numInputWrapper span.arrowUp{top:0;border-bottom:0}.numInputWrapper span.arrowUp:after{border-left:4px solid transparent;border-right:4px solid transparent;border-bottom:4px solid rgba(57,57,57,.6);top:26%}.numInputWrapper span.arrowDown{top:50%}.numInputWrapper span.arrowDown:after{border-left:4px solid transparent;border-right:4px solid transparent;border-top:4px solid rgba(57,57,57,.6);top:40%}.numInputWrapper span svg{width:inherit;height:auto}.numInputWrapper span svg path{fill:#00000080}.numInputWrapper:hover{background:rgba(0,0,0,.05)}.numInputWrapper:hover span{opacity:1}.flatpickr-current-month{font-size:135%;line-height:inherit;font-weight:300;color:inherit;position:absolute;width:75%;left:12.5%;padding:7.48px 0 0;line-height:1;height:34px;display:inline-block;text-align:center;-webkit-transform:translate3d(0,0,0);transform:translate(0)}.flatpickr-current-month span.cur-month{font-family:inherit;font-weight:700;color:inherit;display:inline-block;margin-left:.5ch;padding:0}.flatpickr-current-month span.cur-month:hover{background:rgba(0,0,0,.05)}.flatpickr-current-month .numInputWrapper{width:6ch;width:7ch\fffd;display:inline-block}.flatpickr-current-month .numInputWrapper span.arrowUp:after{border-bottom-color:#000000e6}.flatpickr-current-month .numInputWrapper span.arrowDown:after{border-top-color:#000000e6}.flatpickr-current-month input.cur-year{background:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;color:inherit;cursor:text;padding:0 0 0 .5ch;margin:0;display:inline-block;font-size:inherit;font-family:inherit;font-weight:300;line-height:inherit;height:auto;border:0;border-radius:0;vertical-align:initial;-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield}.flatpickr-current-month input.cur-year:focus{outline:0}.flatpickr-current-month input.cur-year[disabled],.flatpickr-current-month input.cur-year[disabled]:hover{font-size:100%;color:#00000080;background:transparent;pointer-events:none}.flatpickr-current-month .flatpickr-monthDropdown-months{appearance:menulist;background:transparent;border:none;border-radius:0;box-sizing:border-box;color:inherit;cursor:pointer;font-size:inherit;font-family:inherit;font-weight:300;height:auto;line-height:inherit;margin:-1px 0 0;outline:none;padding:0 0 0 .5ch;position:relative;vertical-align:initial;-webkit-box-sizing:border-box;-webkit-appearance:menulist;-moz-appearance:menulist;width:auto}.flatpickr-current-month .flatpickr-monthDropdown-months:focus,.flatpickr-current-month .flatpickr-monthDropdown-months:active{outline:none}.flatpickr-current-month .flatpickr-monthDropdown-months:hover{background:rgba(0,0,0,.05)}.flatpickr-current-month .flatpickr-monthDropdown-months .flatpickr-monthDropdown-month{background-color:transparent;outline:none;padding:0}.flatpickr-weekdays{background:transparent;text-align:center;overflow:hidden;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;height:28px}.flatpickr-weekdays .flatpickr-weekdaycontainer{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}span.flatpickr-weekday{cursor:default;font-size:90%;background:transparent;color:#0000008a;line-height:1;margin:0;text-align:center;display:block;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;font-weight:bolder}.dayContainer,.flatpickr-weeks{padding:1px 0 0}.flatpickr-days{position:relative;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start;width:307.875px}.flatpickr-days:focus{outline:0}.dayContainer{padding:0;outline:0;text-align:left;width:307.875px;min-width:307.875px;max-width:307.875px;-webkit-box-sizing:border-box;box-sizing:border-box;display:inline-block;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-wrap:wrap;-ms-flex-pack:justify;-webkit-justify-content:space-around;justify-content:space-around;-webkit-transform:translate3d(0,0,0);transform:translate(0);opacity:1}.dayContainer+.dayContainer{-webkit-box-shadow:-1px 0 0 #e6e6e6;box-shadow:-1px 0 #e6e6e6}.flatpickr-day{background:none;border:1px solid transparent;border-radius:150px;-webkit-box-sizing:border-box;box-sizing:border-box;color:#393939;cursor:pointer;font-weight:400;width:14.2857143%;-webkit-flex-basis:14.2857143%;-ms-flex-preferred-size:14.2857143%;flex-basis:14.2857143%;max-width:39px;height:39px;line-height:39px;margin:0;display:inline-block;position:relative;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;text-align:center}.flatpickr-day.inRange,.flatpickr-day.prevMonthDay.inRange,.flatpickr-day.nextMonthDay.inRange,.flatpickr-day.today.inRange,.flatpickr-day.prevMonthDay.today.inRange,.flatpickr-day.nextMonthDay.today.inRange,.flatpickr-day:hover,.flatpickr-day.prevMonthDay:hover,.flatpickr-day.nextMonthDay:hover,.flatpickr-day:focus,.flatpickr-day.prevMonthDay:focus,.flatpickr-day.nextMonthDay:focus{cursor:pointer;outline:0;background:#e6e6e6;border-color:#e6e6e6}.flatpickr-day.today{border-color:#959ea9}.flatpickr-day.today:hover,.flatpickr-day.today:focus{border-color:#959ea9;background:#959ea9;color:#fff}.flatpickr-day.selected,.flatpickr-day.startRange,.flatpickr-day.endRange,.flatpickr-day.selected.inRange,.flatpickr-day.startRange.inRange,.flatpickr-day.endRange.inRange,.flatpickr-day.selected:focus,.flatpickr-day.startRange:focus,.flatpickr-day.endRange:focus,.flatpickr-day.selected:hover,.flatpickr-day.startRange:hover,.flatpickr-day.endRange:hover,.flatpickr-day.selected.prevMonthDay,.flatpickr-day.startRange.prevMonthDay,.flatpickr-day.endRange.prevMonthDay,.flatpickr-day.selected.nextMonthDay,.flatpickr-day.startRange.nextMonthDay,.flatpickr-day.endRange.nextMonthDay{background:#569ff7;-webkit-box-shadow:none;box-shadow:none;color:#fff;border-color:#569ff7}.flatpickr-day.selected.startRange,.flatpickr-day.startRange.startRange,.flatpickr-day.endRange.startRange{border-radius:50px 0 0 50px}.flatpickr-day.selected.endRange,.flatpickr-day.startRange.endRange,.flatpickr-day.endRange.endRange{border-radius:0 50px 50px 0}.flatpickr-day.selected.startRange+.endRange:not(:nth-child(7n+1)),.flatpickr-day.startRange.startRange+.endRange:not(:nth-child(7n+1)),.flatpickr-day.endRange.startRange+.endRange:not(:nth-child(7n+1)){-webkit-box-shadow:-10px 0 0 #569ff7;box-shadow:-10px 0 #569ff7}.flatpickr-day.selected.startRange.endRange,.flatpickr-day.startRange.startRange.endRange,.flatpickr-day.endRange.startRange.endRange{border-radius:50px}.flatpickr-day.inRange{border-radius:0;-webkit-box-shadow:-5px 0 0 #e6e6e6,5px 0 0 #e6e6e6;box-shadow:-5px 0 #e6e6e6,5px 0 #e6e6e6}.flatpickr-day.flatpickr-disabled,.flatpickr-day.flatpickr-disabled:hover,.flatpickr-day.prevMonthDay,.flatpickr-day.nextMonthDay,.flatpickr-day.notAllowed,.flatpickr-day.notAllowed.prevMonthDay,.flatpickr-day.notAllowed.nextMonthDay{color:#3939394d;background:transparent;border-color:transparent;cursor:default}.flatpickr-day.flatpickr-disabled,.flatpickr-day.flatpickr-disabled:hover{cursor:not-allowed;color:#3939391a}.flatpickr-day.week.selected{border-radius:0;-webkit-box-shadow:-5px 0 0 #569ff7,5px 0 0 #569ff7;box-shadow:-5px 0 #569ff7,5px 0 #569ff7}.flatpickr-day.hidden{visibility:hidden}.rangeMode .flatpickr-day{margin-top:1px}.flatpickr-weekwrapper{float:left}.flatpickr-weekwrapper .flatpickr-weeks{padding:0 12px;-webkit-box-shadow:1px 0 0 #e6e6e6;box-shadow:1px 0 #e6e6e6}.flatpickr-weekwrapper .flatpickr-weekday{float:none;width:100%;line-height:28px}.flatpickr-weekwrapper span.flatpickr-day,.flatpickr-weekwrapper span.flatpickr-day:hover{display:block;width:100%;max-width:none;color:#3939394d;background:transparent;cursor:default;border:none}.flatpickr-innerContainer{display:block;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden}.flatpickr-rContainer{display:inline-block;padding:0;-webkit-box-sizing:border-box;box-sizing:border-box}.flatpickr-time{text-align:center;outline:0;display:block;height:0;line-height:40px;max-height:40px;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.flatpickr-time:after{content:"";display:table;clear:both}.flatpickr-time .numInputWrapper{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;width:40%;height:40px;float:left}.flatpickr-time .numInputWrapper span.arrowUp:after{border-bottom-color:#393939}.flatpickr-time .numInputWrapper span.arrowDown:after{border-top-color:#393939}.flatpickr-time.hasSeconds .numInputWrapper{width:26%}.flatpickr-time.time24hr .numInputWrapper{width:49%}.flatpickr-time input{background:transparent;-webkit-box-shadow:none;box-shadow:none;border:0;border-radius:0;text-align:center;margin:0;padding:0;height:inherit;line-height:inherit;color:#393939;font-size:14px;position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield}.flatpickr-time input.flatpickr-hour{font-weight:bold}.flatpickr-time input.flatpickr-minute,.flatpickr-time input.flatpickr-second{font-weight:400}.flatpickr-time input:focus{outline:0;border:0}.flatpickr-time .flatpickr-time-separator,.flatpickr-time .flatpickr-am-pm{height:inherit;float:left;line-height:inherit;color:#393939;font-weight:bold;width:2%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center}.flatpickr-time .flatpickr-am-pm{outline:0;width:18%;cursor:pointer;text-align:center;font-weight:400}.flatpickr-time input:hover,.flatpickr-time .flatpickr-am-pm:hover,.flatpickr-time input:focus,.flatpickr-time .flatpickr-am-pm:focus{background:#eee}.flatpickr-input[readonly]{cursor:pointer}@-webkit-keyframes fpFadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-20px,0);transform:translateY(-20px)}to{opacity:1;-webkit-transform:translate3d(0,0,0);transform:translate(0)}}@keyframes fpFadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-20px,0);transform:translateY(-20px)}to{opacity:1;-webkit-transform:translate3d(0,0,0);transform:translate(0)}}.workspace-leaf-content[data-type=kanban] .view-content{padding:0}.workspace-leaf-content[data-type=kanban]>.view-header{display:flex}.kanban-plugin{--lane-width: 272px}.kanban-plugin{contain:content;height:100%;width:100%;position:relative;display:flex;flex-direction:column}.kanban-plugin.something-is-dragging{cursor:grabbing;cursor:-webkit-grabbing}.kanban-plugin.something-is-dragging *{pointer-events:none}.kanban-plugin__item button,.kanban-plugin__lane button,.kanban-plugin button{line-height:1;padding:10px 12px;margin:0;transition:.1s color,.1s background-color}.kanban-plugin__search-wrapper{width:100%;position:sticky;top:0;left:0;padding:10px 13px;display:flex;justify-content:flex-end;align-items:center;z-index:2;background-color:var(--background-secondary);border-bottom:1px solid var(--background-modifier-border)}button.kanban-plugin__search-cancel-button{display:flex;line-height:1;padding:6px;border:1px solid var(--background-modifier-border);background:var(--background-secondary-alt);color:var(--text-muted);margin:0 0 0 5px;font-size:16px}button.kanban-plugin__search-cancel-button .kanban-plugin__icon{display:flex}.kanban-plugin__icon{display:inline-block;line-height:1}.kanban-plugin__icon>svg{width:1em;height:1em}.kanban-plugin__board{display:flex;width:100%;height:100%}.kanban-plugin__board>div{display:flex;align-items:flex-start;justify-content:flex-start;padding:1rem;width:fit-content;height:100%}.kanban-plugin__board.is-adding-lane>div{padding-right:calc(250px + 1rem)}.kanban-plugin__lane-wrapper{display:flex;flex-shrink:0;margin-right:10px;max-height:100%;width:var(--lane-width)}.kanban-plugin__lane{width:100%;display:flex;flex-direction:column;background-color:var(--background-secondary);border-radius:6px;border:1px solid var(--background-modifier-border)}.kanban-plugin__placeholder.kanban-plugin__lane-placeholder{height:100%;flex-grow:1;margin-right:5px}.kanban-plugin__lane.is-hidden{display:none}.kanban-plugin__lane button{padding:8px 10px}.kanban-plugin__lane-form-wrapper{position:absolute;top:1rem;right:1rem;width:250px;background-color:var(--background-secondary);border-radius:6px;border:2px solid hsla(var(--interactive-accent-hsl),.7);z-index:var(--layer-popover);box-shadow:0 .5px 1px .5px #0000001a,0 2px 10px #0000001a,0 10px 20px #0000001a}.kanban-plugin__lane-input-wrapper{padding:10px}.kanban-plugin__item-input-actions,.kanban-plugin__lane-input-actions{display:flex;align-items:flex-start;justify-content:flex-start;padding:0 10px 10px}.kanban-plugin__item-input-actions button,.kanban-plugin__lane-input-actions button{display:block;margin-right:5px}.kanban-plugin__item-action-add,.kanban-plugin__lane-action-add{background-color:var(--interactive-accent);color:var(--text-on-accent)}.kanban-plugin__item-action-add:hover,.kanban-plugin__lane-action-add:hover{background-color:var(--interactive-accent-hover)}.kanban-plugin__lane-header-wrapper{padding:8px 12px 8px 8px;display:flex;align-items:center;flex-shrink:0;flex-grow:0;border-bottom:1px solid var(--background-modifier-border)}.will-prepend .kanban-plugin__lane-header-wrapper{border-bottom:none}.kanban-plugin__lane-grip{cursor:grab;flex-grow:0;margin-right:5px;color:var(--text-faint)}.kanban-plugin__lane-grip:active{cursor:grabbing}.kanban-plugin__lane-grip>svg{display:block;height:1rem}.kanban-plugin__lane-title{font-weight:600;font-size:.875rem;flex-grow:1;width:100%;display:flex;flex-direction:column}.kanban-plugin__lane-title-text{flex-grow:1}div.kanban-plugin__markdown-preview-view>div>*{overflow-wrap:anywhere}div.kanban-plugin__lane-title-count{border-radius:3px;color:var(--text-muted);display:block;font-size:13px;line-height:1;padding:4px;margin-left:5px}div.kanban-plugin__lane-title-count.wip-exceeded{font-weight:bold;color:var(--text-normal);background-color:rgba(var(--background-modifier-error-rgb),.25)}.kanban-plugin__item button.kanban-plugin__item-prefix-button,.kanban-plugin__item button.kanban-plugin__item-postfix-button,.kanban-plugin__lane button.kanban-plugin__lane-settings-button{font-size:13px;line-height:1;color:var(--text-muted);padding:4px;display:flex;margin-left:5px;background-color:transparent;margin-right:-4px}.kanban-plugin__item button.kanban-plugin__item-prefix-button.is-enabled,.kanban-plugin__item button.kanban-plugin__item-postfix-button.is-enabled,.kanban-plugin__lane button.kanban-plugin__lane-settings-button.is-enabled{color:var(--text-accent)}.kanban-plugin__item button.kanban-plugin__item-prefix-button:hover,.kanban-plugin__item button.kanban-plugin__item-postfix-button:hover,.kanban-plugin__lane button.kanban-plugin__lane-settings-button:hover{background-color:transparent;color:var(--text-normal)}.kanban-plugin__item button.kanban-plugin__item-prefix-button{margin:4px 7px 4px 0;padding:0}.kanban-plugin__lane-action-wrapper,.kanban-plugin__item-edit-archive-button,.kanban-plugin__item-settings-actions .kanban-plugin__icon,.kanban-plugin__item-edit-archive-button>.kanban-plugin__icon,.kanban-plugin__item-prefix-button>.kanban-plugin__icon,.kanban-plugin__item-postfix-button>.kanban-plugin__icon,.kanban-plugin__lane-settings-button>.kanban-plugin__icon{display:flex}.kanban-plugin__lane-settings-button-wrapper{display:flex}button.kanban-plugin__lane-settings-button+button.kanban-plugin__lane-settings-button{margin-left:2px}.kanban-plugin__lane-settings-button svg{width:1em;height:1em}.kanban-plugin__lane-items-wrapper{margin:4px;height:100%}.kanban-plugin__lane-items{padding:4px;margin:0 4px;display:flex;flex-direction:column}.kanban-plugin__lane-items>div{margin-top:4px}.kanban-plugin__lane-items>.kanban-plugin__placeholder{flex-grow:1}.kanban-plugin__lane-items>.kanban-plugin__placeholder:only-child{height:2.55em;border:3px dashed rgba(var(--text-muted-rgb),.1);margin-bottom:4px;border-radius:6px;transition:border .2s ease}.is-sorting .kanban-plugin__lane-items>.kanban-plugin__placeholder:only-child{border-color:hsla(var(--interactive-accent-hsl),.6)}.kanban-plugin__item-button-wrapper{border-top:1px solid var(--background-modifier-border);padding:8px;flex-shrink:0;flex-grow:0}.kanban-plugin__item-button-wrapper>button{text-align:left;width:100%}.kanban-plugin__lane-header-wrapper+.kanban-plugin__item-button-wrapper{border-top:none;border-bottom:1px solid var(--background-modifier-border);padding:4px 8px 8px}.kanban-plugin__item-form{border-top:1px solid var(--background-modifier-border);padding:8px}.kanban-plugin__item-form .kanban-plugin__item-input-wrapper{padding:6px 8px;border:1px solid var(--background-modifier-border);background-color:var(--background-primary);border-radius:var(--input-radius);min-height:var(--input-height)}.kanban-plugin__lane-header-wrapper+.kanban-plugin__item-form{border-top:none;border-bottom:1px solid var(--background-modifier-border);padding:4px 8px 8px}.kanban-plugin__item-input-wrapper{display:flex;flex-direction:column;flex-grow:1}.kanban-plugin button.kanban-plugin__item-submit-button{background-color:var(--background-secondary-alt);flex-grow:0;flex-shrink:1;width:auto;margin-top:5px;line-height:1;font-size:14px}button.kanban-plugin__new-item-button{background-color:transparent;color:var(--text-muted)}.kanban-plugin__new-item-button:hover{color:var(--text-on-accent);background-color:var(--interactive-accent-hover)}.kanban-plugin__drag-container>.kanban-plugin__item-wrapper .kanban-plugin__item{border-color:var(--interactive-accent);box-shadow:var(--shadow-s),0 0 0 2px hsla(var(--interactive-accent-hsl),.2)}.kanban-plugin__item{font-size:.875rem;border:1px solid var(--background-modifier-border);border-radius:var(--input-radius);overflow:hidden;transition:.3s opacity cubic-bezier(.25,1,.5,1)}.kanban-plugin__item.is-search-hit{box-shadow:0 15px 25px #0003,0 0 0 1px var(--background-modifier-border)}.kanban-plugin__item.is-search-miss{font-size:.75rem;opacity:.5}.kanban-plugin__item.is-search-miss .kanban-plugin__item-metadata-wrapper{display:none}.kanban-plugin__item-content-wrapper{background:var(--background-primary)}.kanban-plugin__item-title-wrapper{background:var(--background-primary);display:flex;padding:6px 8px;align-items:center}.kanban-plugin__item-title-wrapper:not(:only-child){border-bottom:1px solid var(--background-modifier-border)}.kanban-plugin__item-title{width:100%;line-height:var(--line-height-tight);overflow:hidden}.kanban-plugin__markdown-preview-view{font-family:var(--font-text, var(--default-font));font-size:.875rem;line-height:var(--line-height-tight);padding:unset;width:unset;height:unset;position:unset;overflow-y:unset;overflow-wrap:unset;color:unset;user-select:unset;-webkit-user-select:unset}.kanban-plugin__markdown-preview-view p,.kanban-plugin__markdown-preview-view ul,.kanban-plugin__markdown-preview-view ol,.kanban-plugin__markdown-preview-view blockquote{margin-block-start:.66em;margin-block-end:.66em}.kanban-plugin__markdown-preview-view blockquote{margin-inline-start:0;margin-inline-end:0}.kanban-plugin__markdown-preview-view ul ol,.kanban-plugin__markdown-preview-view ol ul,.kanban-plugin__markdown-preview-view ul ul,.kanban-plugin__markdown-preview-view ol ol{margin-block-start:0em;margin-block-end:0em}.kanban-plugin__markdown-preview-view>div>*{overflow-x:auto;overflow-wrap:break-word}.kanban-plugin__markdown-preview-view>div>*:first-child,.kanban-plugin__markdown-preview-view>div>.frontmatter-container+*{margin-top:0}.kanban-plugin__markdown-preview-view>div>*:last-child{margin-bottom:0}.kanban-plugin__markdown-preview-view ul,.kanban-plugin__markdown-preview-view ol{padding-inline-start:24px}.kanban-plugin__meta-value .kanban-plugin__markdown-preview-view p,.kanban-plugin__meta-value .kanban-plugin__markdown-preview-view{font-size:inherit;color:inherit;line-height:inherit}.kanban-plugin__markdown-preview-view.inline p,.kanban-plugin__markdown-preview-view.inline{display:inline-block}.kanban-plugin__markdown-preview-view .frontmatter,.kanban-plugin__markdown-preview-view .frontmatter-container{display:none}.kanban-plugin__markdown-preview-view .file-link span{display:inline-flex;align-items:center;justify-content:center;color:var(--text-faint);margin-left:2px;position:relative;top:3px}.kanban-plugin__embed-link-wrapper{padding:2px;float:right}.kanban-plugin__item-metadata-wrapper:not(:empty){background-color:var(--background-primary-alt);padding:6px 8px}.kanban-plugin__item-metadata:not(:empty){padding-top:5px;font-size:12px;font-weight:500;color:var(--text-muted)}.kanban-plugin__item-metadata>span{display:block}.kanban-plugin__item-metadata .is-button{cursor:var(--cursor)}.kanban-plugin__item-metadata .is-button:hover{color:var(--text-normal)}.kanban-plugin__item-metadata-date-relative:first-letter{text-transform:uppercase}.kanban-plugin__item-metadata a{text-decoration:none}.kanban-plugin__item-metadata-time:before{content:" \2022  "}.kanban-plugin__item-metadata-time.is-button:hover:before{color:var(--text-muted)}.kanban-plugin__item-tags:not(:empty){padding-top:2px}.kanban-plugin__item-tag{display:inline-block;margin-right:4px}.kanban-plugin__item-tags .kanban-plugin__item-tag{font-size:12px;background-color:var(--tag-background-color, hsla(var(--interactive-accent-hsl), .1));color:var(--tag-color, var(--text-accent));margin:3px 3px 0 0}.kanban-plugin__item-tag.is-search-match,.kanban-plugin__item-tags .kanban-plugin__item-tag.is-search-match{background-color:var(--text-highlight-bg);color:var(--text-normal)}.kanban-plugin__meta-table{width:100%;margin:0;line-height:1.5;font-size:.75rem}.kanban-plugin__meta-table td{vertical-align:top;padding:3px 0;width:10%}.kanban-plugin__meta-table td+td{width:90%}.kanban-plugin__meta-table td:only-child{width:100%}.kanban-plugin__meta-table td.kanban-plugin__meta-key{white-space:nowrap;padding-right:5px;color:var(--text-muted)}.kanban-plugin__meta-table td.kanban-plugin__meta-key.is-search-match>span{background-color:var(--text-highlight-bg);color:var(--text-normal)}.kanban-plugin__meta-value{white-space:pre-wrap;display:flex}.kanban-plugin__meta-value>.is-search-match,.kanban-plugin__meta-value.is-search-match{background-color:var(--text-highlight-bg);color:var(--text-normal)}.kanban-plugin__item-prefix-button-wrapper,.kanban-plugin__item-postfix-button-wrapper{display:flex;flex-grow:0;flex-shrink:0;align-self:start}.kanban-plugin__item-prefix-button-wrapper{flex-direction:column}.kanban-plugin__item-prefix-button-wrapper input[type=checkbox]{margin:4px 7px 4px 0;width:15px;height:15px;filter:hue-rotate(42deg)}.kanban-plugin__item-prefix-button-wrapper input[type=checkbox]+button{margin-top:10px}button.kanban-plugin__item-postfix-button{visibility:hidden;opacity:0;transition:.1s opacity;display:flex;align-self:flex-start}button.kanban-plugin__item-postfix-button.is-enabled,.kanban-plugin__item:hover button.kanban-plugin__item-postfix-button{visibility:visible;opacity:1}.kanban-plugin__item-settings-actions{padding:5px;display:flex}.kanban-plugin__item-settings-actions>button{line-height:1;display:flex;align-items:center;justify-content:center;font-size:.75rem;width:100%}.kanban-plugin__lane-action-wrapper button>.kanban-plugin__icon,.kanban-plugin__item-settings-actions button>.kanban-plugin__icon{margin-right:5px}.kanban-plugin__item-settings-actions>button:first-child,.kanban-plugin__lane-action-wrapper>button:first-child{margin-right:2.5px}.kanban-plugin__item-settings-actions>button:last-child,.kanban-plugin__lane-action-wrapper>button:last-child{margin-left:2.5px}.kanban-plugin__archive-lane-button,.kanban-plugin__item-button-archive{color:var(--text-muted);border:1px solid var(--background-modifier-border)}.kanban-plugin__archive-lane-button:hover,.kanban-plugin__item-button-archive:hover{color:var(--text-normal)}.kanban-plugin__item-button-delete{border:1px solid rgba(var(--background-modifier-error-rgb),.15);color:rgba(var(--background-modifier-error-rgb),1)}.kanban-plugin__item-button-delete:hover{background-color:rgba(var(--background-modifier-error-rgb),.2);color:var(--text-error)}.theme-dark .kanban-plugin__item-button-delete{background-color:transparent;border:1px solid rgba(var(--background-modifier-error-rgb),1);color:var(--text-error)}.theme-dark .kanban-plugin__item-button-delete:hover{background-color:rgba(var(--background-modifier-error-rgb),1);color:var(--text-error)}.kanban-plugin__checkbox-wrapper{border-top:1px solid var(--background-modifier-border);border-bottom:1px solid var(--background-modifier-border);padding:10px;margin-bottom:10px;display:flex;align-items:center}.kanban-plugin__checkbox-wrapper .checkbox-container{flex-shrink:0;flex-grow:0;margin-left:15px}.kanban-plugin__checkbox-label{font-size:.8125rem;line-height:1.4}.kanban-plugin__lane-setting-wrapper>div{border-top:none;border-bottom:none;padding:10px 15px;margin-bottom:0}.kanban-plugin__lane-setting-wrapper>div:last-child{border-bottom:1px solid var(--background-modifier-border);margin-bottom:10px}.kanban-plugin__action-confirm-wrapper{border:1px solid rgba(var(--background-modifier-error-rgb),.2);background-color:rgba(var(--background-modifier-error-rgb),.1);border-radius:4px;padding:10px;margin:5px 10px}.theme-dark .kanban-plugin__action-confirm-wrapper{border:1px solid rgba(var(--background-modifier-error-rgb),1)}.kanban-plugin__delete-lane-button,.kanban-plugin__archive-lane-button{display:flex;align-items:center;justify-content:center;font-size:.75rem;width:50%}.kanban-plugin__delete-lane-button{border:1px solid rgba(var(--background-modifier-error-rgb),.15);color:rgba(var(--background-modifier-error-rgb),1)}.kanban-plugin__delete-lane-button:hover{background-color:rgba(var(--background-modifier-error-rgb),.2);color:var(--text-error)}.theme-dark .kanban-plugin__delete-lane-button{background-color:transparent;border:1px solid rgba(var(--background-modifier-error-rgb),1);color:var(--text-error)}.theme-dark .kanban-plugin__delete-lane-button:hover{background-color:rgba(var(--background-modifier-error-rgb),1);color:var(--text-error)}.kanban-plugin__action-confirm-text{font-size:.875rem;color:var(--text-error);margin-bottom:10px;line-height:1.4}button.kanban-plugin__confirm-action-button{border:1px solid rgba(var(--background-modifier-error-rgb),.2);margin-right:5px;color:var(--text-error)}button.kanban-plugin__confirm-action-button:hover{background-color:rgba(var(--background-modifier-error-rgb),.5)}button.kanban-plugin__cancel-action-button{border:1px solid var(--background-modifier-border)}.kanban-plugin__grow-wrap{width:100%;display:grid}.kanban-plugin__grow-wrap:after{content:attr(data-replicated-value) " ";white-space:pre-wrap;visibility:hidden}.kanban-plugin__grow-wrap>textarea{resize:none;overflow:hidden;tab-size:2}.kanban-plugin__grow-wrap>textarea:focus{border:none;box-shadow:none}.kanban-plugin__grow-wrap>textarea,.kanban-plugin__grow-wrap:after{border:none;border-radius:0;padding:0;font:inherit;line-height:var(--line-height-tight);grid-area:1 / 1 / 2 / 2;font-size:.875rem;overflow:hidden;overflow-wrap:break-word;white-space:pre-wrap}.kanban-plugin__autocomplete{font-size:.875rem;border:1px solid var(--background-modifier-border);background-color:var(--background-primary);list-style:none;padding:0;margin:0;min-width:20ch;max-width:40ch;max-height:200px;border-radius:6px;box-shadow:0 15px 25px #0003;overflow-x:hidden;overflow-y:auto}.kanban-plugin__autocomplete li{margin:0}.kanban-plugin__autocomplete li em{opacity:.6}.kanban-plugin .textcomplete-footer,.kanban-plugin .textcomplete-header{display:none}.kanban-plugin__autocomplete-item-active,.kanban-plugin__autocomplete-item{border-top:1px solid var(--background-modifier-border);padding:4px 6px;cursor:var(--cursor)}.kanban-plugin__autocomplete .textcomplete-header+.kanban-plugin__autocomplete-item,.kanban-plugin__autocomplete .textcomplete-header+.kanban-plugin__autocomplete-item-active{border-top:none}.kanban-plugin__autocomplete-item:hover,.kanban-plugin__autocomplete-item-active{color:var(--text-on-accent);background-color:var(--interactive-accent-hover)}.kanban-plugin__file-suggestion-wrapper{display:flex;line-height:1.2}.kanban-plugin__file-suggestion-icon{flex-shrink:0;flex-grow:0;padding-right:4px}.kanban-plugin__file-suggestion-subtitle{font-size:.875em;color:var(--text-muted)}.kanban-plugin__autocomplete-item:hover .kanban-plugin__file-suggestion-subtitle,.kanban-plugin__autocomplete-item-active .kanban-plugin__file-suggestion-subtitle{color:var(--text-on-accent)}.modal.kanban-plugin__board-settings-modal{width:var(--modal-width);height:var(--modal-height);max-height:var(--modal-max-height);max-width:var(--modal-max-width);padding:0;display:flex;flex-direction:column}.modal.kanban-plugin__board-settings-modal .modal-content{padding:30px 50px;height:100%;overflow-y:auto;overflow-x:hidden;margin:0}.kanban-plugin__board-settings-modal .setting-item{flex-wrap:wrap;justify-content:space-between}.kanban-plugin__board-settings-modal .setting-item-info{max-width:400px;min-width:300px;width:50%}.kanban-plugin__board-settings-modal .setting-item-control{min-width:300px;flex-shrink:0}.kanban-plugin__board-settings-modal .choices{width:100%;text-align:left}.kanban-plugin__board-settings-modal .choices[data-type*=select-one] .choices__inner{background-color:var(--background-primary);border-color:var(--background-modifier-border);padding:0;min-height:0}.kanban-plugin__board-settings-modal .choices[data-type*=select-one] .choices__input{background-color:var(--background-primary);border-bottom-color:var(--background-modifier-border);font-size:14px}.kanban-plugin__board-settings-modal .choices__input{border-radius:0;border-top:none;border-left:none;border-right:none}.kanban-plugin__board-settings-modal .choices__list[role=listbox]{overflow-x:hidden}.kanban-plugin__board-settings-modal .choices__list--single{padding:4px 20px 4px 6px}.kanban-plugin__board-settings-modal .is-open .choices__list--dropdown,.kanban-plugin__board-settings-modal .choices__list--dropdown{background-color:var(--background-primary);border-color:var(--background-modifier-border);word-break:normal;max-height:200px;display:flex;flex-direction:column}.kanban-plugin__board-settings-modal .choices__list--dropdown .choices__item--selectable:after{display:none}.kanban-plugin__board-settings-modal .choices__list--dropdown .choices__item--selectable{padding:4px 6px}.kanban-plugin__board-settings-modal .choices__list--dropdown .choices__item.is-highlighted{background-color:var(--background-primary-alt)}.kanban-plugin__board-settings-modal .choices__placeholder{opacity:1;color:var(--text-muted)}.kanban-plugin__board-settings-modal .error{border-color:var(--background-modifier-error-hover)!important}.kanban-plugin__date-picker{position:absolute;z-index:var(--layer-popover);--cell-size: 2.4em}.kanban-plugin__date-picker .flatpickr-input{width:0;height:0;opacity:0;border:none;padding:0;display:block;margin-bottom:-1px}.kanban-plugin__date-picker .flatpickr-current-month{color:var(--text-normal);font-weight:600;font-size:inherit;width:100%;position:static;height:auto;display:flex;align-items:center;justify-content:center;padding:0}.kanban-plugin__date-picker .flatpickr-current-month .numInputWrapper span.arrowUp:after{border-bottom-color:var(--text-normal)}.kanban-plugin__date-picker .flatpickr-current-month .numInputWrapper span.arrowDown:after{border-top-color:var(--text-normal)}.flatpickr-months .flatpickr-prev-month svg path,.flatpickr-months .flatpickr-next-month svg path{fill:currentColor}.kanban-plugin__date-picker .flatpickr-calendar{font-size:13px;overflow:hidden;background-color:var(--background-primary);width:calc(var(--cell-size) * 7 + 8px);box-shadow:0 0 0 1px var(--background-modifier-border),0 15px 25px #0003}.kanban-plugin__date-picker .flatpickr-months{font-size:13px;padding:2px 2px 4px;align-items:center}.kanban-plugin__date-picker .flatpickr-months .flatpickr-current-month input.cur-year,.kanban-plugin__date-picker .flatpickr-months select{border-radius:4px;padding:4px}.kanban-plugin__date-picker .flatpickr-months .numInputWrapper{border-radius:4px}.kanban-plugin__date-picker .flatpickr-months .flatpickr-month{width:100%;height:auto}.kanban-plugin__date-picker .flatpickr-months .flatpickr-prev-month,.kanban-plugin__date-picker .flatpickr-months .flatpickr-next-month{color:var(--text-normal);fill:currentColor;border-radius:4px;display:flex;align-items:center;justify-content:center;line-height:1;height:auto;padding:5px;position:static;flex-shrink:0}.kanban-plugin__date-picker .flatpickr-months .flatpickr-prev-month:hover,.kanban-plugin__date-picker .flatpickr-months .flatpickr-next-month:hover{background-color:var(--background-primary-alt);color:var(--text-normal)}.kanban-plugin__date-picker .flatpickr-months .flatpickr-prev-month:hover svg,.kanban-plugin__date-picker .flatpickr-months .flatpickr-next-month:hover svg{fill:currentColor}.kanban-plugin__date-picker .flatpickr-current-month .flatpickr-monthDropdown-months{color:var(--text-normal);font-weight:inherit;margin-right:5px}.kanban-plugin__date-picker .flatpickr-current-month input.cur-year{color:var(--text-normal);font-weight:inherit}.kanban-plugin__date-picker .flatpickr-weekdays{height:auto;padding:8px 0 12px}.kanban-plugin__date-picker span.flatpickr-weekday{font-weight:400;color:var(--text-muted)}.kanban-plugin__date-picker .flatpickr-innerContainer{padding:4px}.kanban-plugin__date-picker .flatpickr-day{color:var(--text-normal);display:inline-flex;align-items:center;justify-content:center;width:var(--cell-size);height:var(--cell-size);line-height:1;border-radius:6px}.kanban-plugin__date-picker .flatpickr-day.today{border-color:var(--interactive-accent)}.kanban-plugin__date-picker .flatpickr-day.today:hover{color:var(--text-normal);border-color:var(--interactive-accent);background-color:var(--background-primary-alt)}.kanban-plugin__date-picker .flatpickr-day.selected{border-color:var(--interactive-accent);background-color:var(--interactive-accent);color:var(--text-on-accent)}.kanban-plugin__date-picker .flatpickr-day.selected:hover{border-color:var(--interactive-accent);background-color:var(--interactive-accent)}.kanban-plugin__date-picker .flatpickr-days{width:calc(var(--cell-size) * 7)}.kanban-plugin__date-picker .dayContainer{width:calc(var(--cell-size) * 7);min-width:calc(var(--cell-size) * 7);max-width:calc(var(--cell-size) * 7)}.kanban-plugin__date-picker .flatpickr-day.inRange,.kanban-plugin__date-picker .flatpickr-day.prevMonthDay.inRange,.kanban-plugin__date-picker .flatpickr-day.nextMonthDay.inRange,.kanban-plugin__date-picker .flatpickr-day.today.inRange,.kanban-plugin__date-picker .flatpickr-day.prevMonthDay.today.inRange,.kanban-plugin__date-picker .flatpickr-day.nextMonthDay.today.inRange,.kanban-plugin__date-picker .flatpickr-day:hover,.kanban-plugin__date-picker .flatpickr-day.prevMonthDay:hover,.kanban-plugin__date-picker .flatpickr-day.nextMonthDay:hover,.kanban-plugin__date-picker .flatpickr-day:focus,.kanban-plugin__date-picker .flatpickr-day.prevMonthDay:focus,.kanban-plugin__date-picker .flatpickr-day.nextMonthDay:focus{background-color:var(--background-primary-alt);border-color:var(--background-primary-alt)}.kanban-plugin__date-picker .flatpickr-day.flatpickr-disabled,.kanban-plugin__date-picker .flatpickr-day.flatpickr-disabled:hover,.kanban-plugin__date-picker .flatpickr-day.prevMonthDay,.kanban-plugin__date-picker .flatpickr-day.nextMonthDay,.kanban-plugin__date-picker .flatpickr-day.notAllowed,.kanban-plugin__date-picker .flatpickr-day.notAllowed.prevMonthDay,.kanban-plugin__date-picker .flatpickr-day.notAllowed.nextMonthDay{color:var(--text-faint)}.kanban-plugin__time-picker{position:absolute;max-height:250px;overflow:auto;border-radius:4px;border:1px solid var(--background-modifier-border);box-shadow:0 2px 8px var(--background-modifier-box-shadow);background:var(--background-primary);color:var(--text-normal);font-size:14px;z-index:var(--layer-menu)}.kanban-plugin__time-picker-item{display:flex;align-items:center;color:var(--text-muted);cursor:var(--cursor);line-height:1;padding:6px 8px}.kanban-plugin__time-picker-check{visibility:hidden;display:inline-flex;margin-right:5px}.kanban-plugin__time-picker-item.is-hour{color:var(--text-normal);font-weight:600}.kanban-plugin__time-picker-item.is-selected .kanban-plugin__time-picker-check{visibility:visible}.kanban-plugin__time-picker-item:hover,.kanban-plugin__time-picker-item.is-selected{background:var(--background-secondary)}.kanban-plugin mark{background-color:var(--text-highlight-bg)}.kanban-plugin__draggable-setting-container{border-top:0;padding:0;flex-direction:column}.kanban-plugin__draggable-setting-container>div{width:100%;margin-right:0!important}.kanban-plugin__setting-item-wrapper{border-top:1px solid var(--background-modifier-border)}.kanban-plugin__draggable-setting-container>.kanban-plugin__placeholder{border-top:1px solid var(--background-modifier-border)}.kanban-plugin__setting-item{background-color:var(--background-secondary);width:100%;font-size:16px;display:flex;align-items:flex-start;padding:12px;color:var(--text-muted)}.kanban-plugin__drag-container .kanban-plugin__setting-item{border:1px solid hsla(var(--interactive-accent-hsl),.8);box-shadow:0 15px 25px #0003,0 0 0 2px hsla(var(--interactive-accent-hsl),.8)}.kanban-plugin__setting-controls-wrapper{flex-grow:1;flex-shrink:1}.kanban-plugin__setting-input-wrapper{display:flex;flex-wrap:wrap;margin-bottom:1rem}.kanban-plugin__setting-input-wrapper>div{margin-right:10px}.kanban-plugin__setting-toggle-wrapper>div{display:flex;align-items:center;line-height:1;margin-bottom:10px}.kanban-plugin__setting-toggle-wrapper .checkbox-container{margin-right:10px}.kanban-plugin__setting-button-wrapper{display:flex;justify-content:flex-end;flex-grow:1;flex-shrink:0;max-width:25px}.kanban-plugin__setting-button-wrapper>div{margin-left:12px}.kanban-plugin__setting-key-input-wrapper{margin:1rem 0}.kanban-plugin__setting-key-input-wrapper>input{margin-right:10px}.kanban-plugin__date-color-input-wrapper,.kanban-plugin__tag-color-input-wrapper{display:flex;flex-direction:column;flex-grow:1;gap:1rem}.kanban-plugin__add-tag-color-button{align-self:baseline;margin:0}.kanban-plugin__date-color-wrapper,.kanban-plugin__tag-color-input .kanban-plugin__item-tags{background-color:var(--background-primary);padding:10px;margin:0;border-radius:4px}.kanban-plugin__tag-color-input .kanban-plugin__item-tag{margin-top:0;font-size:13px;font-weight:500;line-height:1.5}.kanban-plugin__item-metadata>.kanban-plugin__item-metadata-date-wrapper .is-button:hover,.kanban-plugin__item-metadata>.kanban-plugin__item-metadata-date-wrapper{display:inline-block;color:var(--date-color, var(--text-muted));line-height:1}.kanban-plugin__item-metadata>.kanban-plugin__item-metadata-date-wrapper.has-background{background-color:var(--date-background-color, transparent);margin-top:4px;border-radius:var(--tag-radius);padding:var(--tag-padding-y) var(--tag-padding-x)}.kanban-plugin__date-color-input-wrapper input[type=number]{width:75px;padding:.6em .8em;height:auto;border-radius:.5em}.kanban-plugin__date-color-input-wrapper .kanban-plugin__setting-item-label{margin-bottom:0}.kanban-plugin__date-color-config{padding:0 0 10px;display:flex;flex-wrap:wrap;gap:5px;align-items:center}.kanban-plugin__date-color-wrapper{display:inline-block;margin-top:10px}.kanban-plugin__date-color-wrapper .kanban-plugin__item-metadata{padding:0}.kanban-plugin__metadata-setting-desc{font-size:14px}.kanban-plugin__setting-button-spacer{visibility:hidden}.kanban-plugin__setting-item-label{font-size:12px;font-weight:bold;margin-bottom:5px}.kanban-plugin__setting-toggle-wrapper .kanban-plugin__setting-item-label{margin-bottom:0}.kanban-plugin__hitbox{border:2px dashed tomato}.kanban-plugin__placeholder{flex-grow:0;flex-shrink:0;width:0;height:0;pointer-events:none}.kanban-plugin__placeholder[data-axis=horizontal]{height:100%}.kanban-plugin__placeholder[data-axis=vertical]{width:100%}body:not(.native-scrollbars) .kanban-plugin__scroll-container::-webkit-scrollbar{background-color:transparent;width:16px;height:16px}body:not(.native-scrollbars) .kanban-plugin__scroll-container::-webkit-scrollbar-thumb{border:4px solid transparent;background-clip:content-box}.kanban-plugin__scroll-container{will-change:transform}.kanban-plugin__scroll-container.kanban-plugin__horizontal{overflow-y:hidden;overflow-x:auto}.kanban-plugin__scroll-container.kanban-plugin__vertical{overflow-y:auto;overflow-x:hidden}.kanban-plugin__drag-container{contain:layout size;z-index:10000;pointer-events:none;position:fixed;top:0;left:0}.kanban-plugin__loading{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.sk-pulse{width:60px;height:60px;background-color:var(--text-faint);border-radius:100%;animation:sk-pulse 1.2s infinite cubic-bezier(.455,.03,.515,.955)}@keyframes sk-pulse{0%{transform:scale(0)}to{transform:scale(1);opacity:0}}.kanban-plugin__color-picker-wrapper{position:relative}.kanban-plugin__color-picker{position:absolute;top:-5px;left:0;transform:translateY(-100%)}
 
/* @settings

name: Floating TOC
id: floating-toc-styles
settings:
    - 
        id: floating-toc-font-color-header
        title:  color setting
        title.zh: 颜色相关设置
        type: heading
        level: 2
        collapsed: true
    - 
        id: floating-toc-header-settings
        title: Headers
        title.zh: 大纲标题（H1-H6）
        type: heading
        level: 3
        collapsed: true
    -
        id: floating-toc-remove-heading-indicator
        title: Remove H1-H6 Indicators after Headings 
        title.zh: 移除标题后的H1-H6
        type: class-toggle
        default: false
    -
        id: toggle-floating-toc-header-color 
        title: toggle header color 
        title.zh: 是否开启标题颜色
        type: class-toggle
        default: false
    -
        id: floating-toc-color-h1
        title: Header 1
        type: variable-themed-color
        opacity: true
        format: hex
        default-light: '#'
        default-dark: '#'
    -
        id: floating-toc-color-h2
        title: Header 2
        type: variable-themed-color
        opacity: true
        format: hex
        default-light: '#'
        default-dark: '#'
    -
        id: floating-toc-color-h3
        title: Header 3
        type: variable-themed-color
        opacity: true
        format: hex
        default-light: '#'
        default-dark: '#'
    -
        id: floating-toc-color-h4
        title: Header 4
        type: variable-themed-color
        opacity: true
        format: hex
        default-light: '#'
        default-dark: '#'
    -
      id: floating-toc-color-h5
      title: Header 5
      type: variable-themed-color
      opacity: true
      format: hex
      default-light: '#'
      default-dark: '#'
    -
      id: floating-toc-color-h6
      title: Header 6
      type: variable-themed-color
      opacity: true
      format: hex
      default-light: '#'
      default-dark: '#'
    -
        id: floating-toc-settings
        title:  Other color settings
        title.zh: 其他颜色设置
        type: heading
        level: 3
        collapsed: true
    -
        id: floating-toc-font-color
        title: font color
        title.zh: 目录字体颜色
        type: variable-themed-color
        format: hex
        opacity: false
        default-light: '#f5f6f8'
        default-dark: '#1b1b1b'
    - 
        id: floating-toc-hover-color
        title: hover color
        title.zh: 鼠标聚焦hover色
        description: The header color when the mouse is over the line .
        description.zh: 当鼠标在条目上方时，标题颜色。
        type: variable-themed-color
        format: hex
        opacity: false
        default-light: '#f5f6f8'
        default-dark: '#1b1b1b'
    - 
        id: floating-toc-header-background-color
        title: Header background color
        title.zh: 标题背景色
        type: variable-themed-color
        format: hex
        opacity: true
        default-light: '#ffffff8c'
        default-dark: '#202020c4'
    - 
        id: floating-toc-background-color
        title:  toc background color
        title.zh: 目录背景色
        type: variable-themed-color
        format: hex
        opacity: true
        default-light: '#dddddd4d'
        default-dark: '#20202066'
    -
        id: floating-toc-highlight-color
        title: highlight color
        title.zh: 高亮颜色
        description: Click on the header background color and the indicator color when scrolling .
        description.zh: 点击标题背景色和同步滚动时的指示器颜色
        type: variable-color
        format: hex
        alt-format:
            -
                id: floating-toc-highlight-color-rgb
                format: rgb-values
        default: '#ff8000'
    - 
        id: floating-toc-line-color
        title: Indicator line color
        title.zh: 指示条颜色
        type: variable-themed-color
        format: hex
        opacity: true
        default-light: '#7a9486'
        default-dark: '#84a83a'
    - 
        id: floating-toc-layout-header
        title:  layout settings
        title.zh: 版面相关设置
        type: heading
        level: 2
        collapsed: true
    -  
        id: enable-heading-nowrap
        title:  Header single line display
        title.zh: 目录标题单行显示
        type: class-toggle
        default: false
    -  
        id: floating-toc-font-size
        title: font size
        title.zh: 字体大小
        type: variable-number
        format: rem
        default: 0.7
    - 
        id: floating-toc-line-height
        title: line height
        title.zh: 目录行间距
        type: variable-number
        format: rem
        default: 1.5
    -
        id: floating-toc-position
        title: TOC Position relative to the edge
        title.zh: TOC距离边界的相对位置
        type: variable-number-slider
        default: 0
        format: px
        min: -100
        max: 100
        step: 1
    -
        id: indicator-bar-position
        title: Indicator bar position relative to the edge
        title.zh: 指示条的相对位置
        type: variable-number-slider
        default: 0
        format: em
        min: -3
        max: 3
        step: 0.1
    -  
        id: floating-toc-appearance-header
        title:  Appearance settings
        title.zh: 外观设置
        type: heading
        level: 2
        collapsed: true
    -
        id: enable-outline-style
        title: enable outline style
        title.zh: 显示层级线
        type: class-select
        allowEmpty: false
        default: default-outline-style
        options:
          - 
            label: Default
            value: default-outline-style
          - 
            label: curves
            value: float-curves-outline-style
          - 
            label: line
            value: float-outline-style
    -  
        id: enable-bar-icon
        title:  Replace the indicator bar with an icon
        title.zh: 用图标代替指示条
        type: class-toggle
        default: false
    -
        id: enable-bar-heading-text
        title:  Show heading text next to indicator bar (including parent)
        title.zh: 在指示条旁边显示标题上下级
        type: class-toggle
        default: false
    - 
        id: focus-heading
        title: Focus on the current heading
        title.zh: 突出显示当前标题
        description: Focus on  the header corresponding to the current scrollbar, other headers will be faded . Set the fade level here.
        description.zh: 重点突出当前滚动条对应的标题，其他标题将淡化显示。这里调整淡化程度。
        type: variable-number-slider
        default: 0.9
        min: 0
        max: 1
        step: 0.1
    - 
        id: floating-toc-response-time
        title: Response Time
        title.zh: 浮动目录响应速度
        description: Adjust the eject sensitivity. The larger the value, the less sensitive it is
        description.zh: 调整浮动目录弹出灵敏度。值越大越不灵敏
        type: variable-number-slider
        level: 1
        format: s
        default: 0.3
        min: 0
        max: 1
        step: 0.1
    -
        id: floating-background-settings
        title:  Notes background blur effect settings
        title.zh: 笔记背景模糊效果设置
        type: heading
        level: 3
        collapsed: true
    - 
        id: enable-background-blur-dept
        title:  Activate Blurred background 
        title.zh: 开启触发目录后笔记背景模糊效果
        type: class-toggle
        default: false
    - 
        id: background-blur-depth
        title: Blurred background after opening the toc
        title.zh: 触发目录背景模糊程度
        description: To adjust the radius of blur
        description.zh: 调整背景模糊程度
        type: variable-number-slider
        default: 2
        format: px
        min: 0
        max: 30
        step: 1
    -
        id: floating-toc
        title: If you have ideas or feedback,  welcome to commit issues on github 😁
        title.zh:  有任何想法可以跟我交流😁，欢迎来访，QQ群:908688452
        type: heading
        level: 1
        collapsed: true
*/

.theme-light,
.theme-dark {
  --background-blur-depth:2px;
  --floating-toc-font-color: var(--text-normal);
  --floating-toc-hover-color: var(--text-accent-hover);
  --floating-toc-font-size: 0.7rem;
  --floating-toc-highlight-color: var(--text-highlight-bg-active);
  --floating-toc-highlight-color-rgb: 255,128,0;
  --floating-toc-line-color: var(--text-accent);
  --floating-toc-line-height: 1.5rem;
  --floating-toc-response-time: 0.3s;
  --floating-toc-position:0px;
  --focus-heading:0.9;
 
}
.theme-light{
  --floating-toc-header-background-color:var(--background-primary);
  --floating-toc-background-color: rgba(221, 221, 221, 0.3);
}
.theme-dark{
  --floating-toc-header-background-color: rgb(32 32 32 / 77%);
  --floating-toc-background-color: rgba(32, 32, 32, 0.4);
}


div.workspace-leaf-content[data-type="style-settings"] div.style-settings-heading[data-id="floating-toc"] {
  margin-top: 10px;
  margin-bottom: 0;
  pointer-events: none;
  cursor: text;
  border-top: 2px solid var(--background-modifier-border);
  pointer-events: none;
}

.style-settings-heading[data-id="floating-toc"] .setting-item-control,
.style-settings-heading[data-id="floating-toc"] .style-settings-collapse-indicator {
  display: none;
}

.style-settings-heading[data-id="floating-toc"] .setting-item-name::before {
  display: inline-block;
  width: 20px;
  height: fit-content;
  padding-right: 8px;
  font-family: "Segoe UI Emoji", "Apple Color Emoji", sans-serif;
  font-weight: initial;
  color: unset;
  content: "❤️";
}


.heading-list-item.located .line-wrap .line {
  background: rgb(var(--floating-toc-highlight-color-rgb),0.8);
  height: 2.5px;
}

.heading-list-item.located .text-wrap:not(.located) .text {
  color: var(--floating-toc-highlight-color);
}

.heading-list-item .text-wrap.located .text {
  background-color: rgba(var(--floating-toc-highlight-color-rgb),0.4);
}

.heading-list-item {

  z-index: 1;
  font-size: var(--floating-toc-font-size);
  min-height: var(--floating-toc-line-height);
  padding: 0;
  white-space: nowrap;
  position: relative;
}

.heading-list-item .line-wrap {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 1.5rem;
  z-index: -1;
  animation: lineAppear-72a6a55b 250ms cubic-bezier(0.34, 1.56, 0.64, 1) both;
}

@keyframes lineAppear-72a6a55b {
  0% {
    transform: translateX(1rem);
  }

  100% {
    transform: translateX(0rem);
  }
}

.heading-list-item .line-wrap .line {
  position: absolute;
  top: 50%;
  margin-top: calc(2px / -2);
  height: 2px;
  width: 1.5rem;
  background: var(--floating-toc-line-color);
}

.heading-list-item .text-wrap {
  z-index: 9999;
  opacity: 0;
  pointer-events: none;
  height: 100%;
  display: inline-flex;
  align-items: center;
  animation: textAppear-72a6a55b 250ms cubic-bezier(0.34, 1.56, 0.64, 1);
  position: relative;
}

@keyframes textAppear-72a6a55b {
  0% {
    transform: translateX(-1rem);
  }

  100% {
    transform: translateX(0rem);
  }
}

.heading-list-item .text-wrap .text {
  padding: 0.25rem;
  border-radius: 0.5rem;
  text-decoration: none;
  cursor: pointer;
  color: var(--floating-toc-font-color);
  backdrop-filter: blur(5px);
  background: var(--floating-toc-header-background-color);
}
 
body.enable-heading-nowrap .floating-toc-div.pin .floating-toc .heading-list-item>.text-wrap {
  max-width: unset;
}
body.enable-heading-nowrap .heading-list-item .text-wrap .text {
  max-width: 14rem;
  overflow: hidden;
  text-overflow: ellipsis;
}
.heading-list-item .text-wrap .text:hover {
  color: var(--floating-toc-hover-color);
  font-weight: bold;
}

.heading-list-item .text-wrap .text:hover::after {
  font-size: 8px;
}


.heading-list-item:hover .line-wrap .line {
  opacity: 0;
  pointer-events: none;
}

.heading-list-item:hover .text-wrap {
  opacity: 1;
  pointer-events: all;
}
.heading-list-item[data-level="2"] .text-wrap {
  margin-left: 0.5rem;
}
.heading-list-item[data-level="3"] .text-wrap {
  margin-left: 1rem;
}
.heading-list-item[data-level="4"] .text-wrap {
  margin-left: 1.5rem;
}
.heading-list-item[data-level="5"] .text-wrap {
  margin-left: 2rem;
}
.heading-list-item[data-level="6"] .text-wrap {
  margin-left: 2.5rem;
}

.heading-list-item[data-level="1"] {
  padding-left: 0rem;
}

.heading-list-item[data-level="1"] .text::after {
  content: "H1";
  font-size: 6px;
  margin-left: 1px;
  color: var(--text-muted);
  font-weight: normal !important;
  padding: 1px 2px 1px 2px;
}

.heading-list-item[data-level="2"] {
  padding-left: 0.5rem;
}

.heading-list-item[data-level="2"] .text::after {
  content: "H2";
  font-size: 6px;
  margin-left: 1px;
  color: var(--text-muted);
  font-weight: normal !important;
  padding: 1px 2px 1px 2px;
}

.heading-list-item[data-level="3"] {
  padding-left: 0.8rem;
}

.heading-list-item[data-level="3"] .text::after {
  content: "H3";
  font-size: 6px;
  margin-left: 1px;
  color: var(--text-muted);
  font-weight: normal !important;
  padding: 1px 2px 1px 2px;
}

.heading-list-item[data-level="4"] {
  padding-left: 1.1rem;
}

.heading-list-item[data-level="4"] .text::after {
  content: "H4";
  font-size: 6px;
  margin-left: 1px;
  color: var(--text-muted);
  font-weight: normal !important;
  padding: 1px 2px 1px 2px;
}

.heading-list-item[data-level="5"] {
  padding-left: 1.4rem;
}

.heading-list-item[data-level="5"] .text::after {
  content: "H5";
  font-size: 6px;
  margin-left: 1px;
  color: var(--text-muted);
  font-weight: normal !important;
  padding: 1px 2px 1px 2px;
}

.heading-list-item[data-level="6"] {
  padding-left: 1.6rem;
}

.heading-list-item[data-level="6"] .text::after {
  content: "H6";
  font-size: 6px;
  margin-left: 1px;
  color: var(--text-muted);
  font-weight: normal !important;
  padding: 1px 2px 1px 2px;
}


.floating-toc {
  overflow: hidden;
  list-style: none;
  margin: 0;
  padding: 0.1rem;
  position: absolute;
  top: 95px;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  bottom: 40px;
  /* width: 13rem; */
  scroll-behavior: smooth;
  min-height: max-content;
  max-height: calc(100% - 135px) ;
  left:var(--floating-toc-position);
}

.floating-toc-div.pin .floating-toc,
.floating-toc:hover {
  z-index: 2;
  align-items: flex-start;
  min-width: 6rem;
  max-width: 70%;
  width: auto;
  overflow-y: auto;
  background: var(--floating-toc-background-color);
}

.floating-toc-div.pin .floating-toc::-webkit-scrollbar,
.floating-toc:hover::-webkit-scrollbar {
  display: none;
}


body:not(.enable-heading-nowrap) .floating-toc-div.pin .floating-toc .heading-list-item,
body:not(.enable-heading-nowrap) .floating-toc:hover .heading-list-item {
  min-height: auto;
}

 
.floating-toc-div.pin .floating-toc .heading-list-item
{
  max-width: fit-content;
}

body.enable-heading-nowrap .floating-toc-div.pin .floating-toc .heading-list-item>.text-wrap,
body.enable-heading-nowrap .floating-toc:hover .heading-list-item>.text-wrap {
  white-space: nowrap;
}
.floating-toc-div.pin .floating-toc .heading-list-item>.text-wrap,
.floating-toc:hover .heading-list-item>.text-wrap {
  min-width: 12rem;
  white-space: normal;
  opacity: 1;
  transition-delay: var(--floating-toc-response-time);
  transition-property: opacity;
  transition-timing-function: ease-in-out;
  -webkit-transition-delay: var(--floating-toc-response-time);
  -webkit-transition-property: opacity;
  -webkit-transition-timing-function: ease-in-out;
}


.floating-toc-div.pin .heading-list-item>.line-wrap,
.floating-toc:hover .heading-list-item>.line-wrap {
  display: none;

}

.workspace-leaf-content .floating-toc-div.floating-left+.markdown-source-view .cm-editor {
  padding-left: 2rem;
}

.workspace-leaf-content .floating-toc-div.floating-left~.markdown-reading-view .markdown-preview-view {
  padding-left: 4rem;
}

.floating-toc-div.floating-left+.markdown-source-view .cm-panels {
  margin-left: -2rem;
}

/****right*********/
.floating-toc-div.pin .floating-toc .heading-list-item>.text-wrap a>a,
.floating-toc-div .floating-toc:hover .heading-list-item>.text-wrap a>a {

  pointer-events: none;
}

.floating-toc-div.pin .floating-toc .heading-list-item>.text-wrap a>a.external-link,
.floating-toc-div .floating-toc:hover .heading-list-item>.text-wrap a>a.external-link {

  background-image: none;
}



.workspace-leaf-content .floating-toc-div.floating-right~.markdown-reading-view .markdown-preview-view {
  padding-right: 2rem;
  
}

.floating-toc-div.floating-right .floating-toc {
  right: calc(0.5rem + var(--floating-toc-position));
  align-items: flex-end;
  left: unset;
}

.floating-toc-div.floating-right .heading-list-item {
  text-align: right;
}

.floating-toc-div.floating-right .heading-list-item .line-wrap {
  right: 0.5rem;
}


.floating-toc-div.floating-right .heading-list-item[data-level="1"] .line-wrap {
  padding-left: 0.5rem;
}

.floating-toc-div.floating-right .heading-list-item[data-level="2"] .line-wrap {
  padding-left: 0.7rem;
}

.floating-toc-div.floating-right .heading-list-item[data-level="3"] .line-wrap {
  padding-left: 0.9rem;
}

.floating-toc-div.floating-right .heading-list-item[data-level="4"] .line-wrap {
  padding-left: 1.1rem;
}

.floating-toc-div.floating-right .heading-list-item[data-level="5"] .line-wrap {
  padding-left: 1.3rem;
}

.floating-toc-div.floating-right .heading-list-item[data-level="6"] .line-wrap {
  padding-left: 1.5rem;
}

.floating-toc-div.floating-right.pin .floating-toc .heading-list-item>.text-wrap,
.floating-toc-div.floating-right .floating-toc:hover .heading-list-item>.text-wrap {
  justify-content: flex-end;
  text-align: right;
  display: inline-flex;
}

/****pin button***/

.floating-right.floating-toc-div .toolbar.pin {
  right: 10px;
 
}


.floating-toc-div.pin .toolbar.pin {
  opacity: 1;
  display: block;
}


.floating-toc-div .toolbar.pin:hover {
  opacity: 1;

}
.floating-toc-div .toolbar button:hover {
  box-shadow: none;
  color: var( --interactive-accent-hover);
}

@keyframes shake {

  0%,
  100% {
    -webkit-transform: translateX(0);
  }

  10%,
  30%,
  50%,
  70%,
  90% {
    -webkit-transform: translateX(-0.1px);
  }

  20%,
  40%,
  60%,
  80% {
    -webkit-transform: translateX(0.1px);
  }
}
.floating-toc-div .toolbar.pin.hide {
 display: none;
}

.floating-toc-div .toolbar
{
  display: list-item;
  opacity: 0.3;
  z-index: 2;
  background-color: transparent;
  position: fixed;
  top: 75px;
  margin-left: 10px;
}

.floating-toc-div .toolbar  button
{
  margin: 0;
  padding: 0 10px;
  background-color:transparent;
  margin-right: 5px;
  width: 10px;
  display: inline-grid;
  box-shadow: none;

}

.floating-toc-div .toolbar  button svg{
  width: 12px;
  height: 12px;
}

.floating-toc-div.pin .floating-toc {
  padding: 0 1rem;
}

.floating-toc-div.pin .floating-toc .heading-list-item>.text-wrap {
  max-width: 40%;
}


body.enable-background-blur-dept .workspace-leaf-content .floating-toc-div.hover:not(.pin)+.markdown-source-view .cm-editor
{
  
  filter: blur(var(--background-blur-depth));
  -webkit-filter: blur(var(--background-blur-depth));
  background: var(--floating-toc-background-color);
}
body.enable-background-blur-dept .workspace-leaf-content .floating-toc-div.hover:not(.pin) ~.markdown-reading-view .markdown-preview-view
{
  filter: blur(var(--background-blur-depth));
  -webkit-filter: blur(var(--background-blur-depth));
  background: var(--floating-toc-background-color);
}

body.enable-background-blur-dept .floating-toc-div.hover:not(.pin) .heading-list-item .text-wrap:not(.located) .text {
  background: transparent;
  
   
}

body.enable-background-blur-dept .floating-toc-div.pin .floating-toc,
body.enable-background-blur-dept .floating-toc:hover {
  background: transparent;
}


/****alignLeft**/

.floating-right.floating-toc-div.alignLeft .toolbar.pin {
  right: 4rem;
}
.floating-toc-div.floating-right.alignLeft.pin .floating-toc .heading-list-item>.text-wrap, 
.floating-toc-div.floating-right.alignLeft .floating-toc:hover .heading-list-item>.text-wrap
{
   max-width: 12rem;
    text-overflow: ellipsis;
justify-content: flex-start;
text-align: left;
}


.floating-right.alignLeft .heading-list-item[data-level="2"] .text-wrap {
  padding-left: 1rem;
}
.floating-right.alignLeft .heading-list-item[data-level="3"] .text-wrap {
  padding-left: 2rem;
}
.floating-right.alignLeft .heading-list-item[data-level="4"] .text-wrap {
  padding-left: 3rem;
}

.floating-right.alignLeft .heading-list-item[data-level="5"] .text-wrap {
  padding-left: 3.5rem;
}
.floating-right.alignLeft .heading-list-item[data-level="6"] .text-wrap {
  padding-left: 4rem;
}

.heading-list-item.located  .text::before
{
  content: "•";
  margin-right: 2px;
}
.heading-list-item.focus  .text::before
{
  content: "▾";
  margin-right: 2px;
}
.floating-toc-div:not(:is(.hover,.pin)) .heading-list-item
{
  width: 2rem;
  overflow: hidden;
  margin-left: var(--indicator-bar-position);
}
.floating-toc-div:hover .heading-list-item
{
  width: unset;
}
.floating-toc-div:not(:is(.hover)) .heading-list-item:not(:is(.located,.focus))
{
opacity: var(--focus-heading);
}

 

/****enable-bar-heading-text**/

body.enable-bar-heading-text .floating-toc-div:not(:is(.hover,.pin)) .heading-list-item:is(.located,.focus)
{
width:unset;
}
body.enable-bar-heading-text  .floating-toc-div:not(:is(.hover,.pin)) .heading-list-item:is(.located,.focus) .text-wrap
{
  opacity: 1;
  margin-left: 10px;
 
}
body.enable-bar-heading-text .floating-toc-div:not(:is(.hover,.pin)) .heading-list-item:is(.located,.focus) .text-wrap .text
{
  max-width: 12rem;
  overflow:hidden;
	text-overflow:ellipsis;
	white-space:nowrap;
  color: var(--text-normal);
}

body.enable-bar-heading-text .floating-toc-div:not(:is(.hover,.pin)) .heading-list-item:is(.located,.focus) .text-wrap .text::before
{
content: '';
margin-left: 0.2rem;
}

.heading-list-item.focus .text-wrap .text {
  font-weight:bolder;
}
/******/
 .heading-list-item:not(.focus,.located) .text-wrap .text {
  font-weight:normal;
}

.workspace-tabs.mod-stacked  .workspace-tab-header:not(.is-active) + .workspace-leaf .floating-toc-div
{
  opacity: 0;
}

/******/


/**第二个tabs右侧*/
.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both~.markdown-reading-view .markdown-preview-view {
  padding-right: 2rem;
  
}
.workspace-tabs~.workspace-tabs.mod-top-right-space .floating-toc-div.floating-both:not(.alignLeft) .heading-list-item[data-level] .text-wrap::before
{
  display: none;
}
.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both .floating-toc {
  right: calc(0.5rem + var(--floating-toc-position));
  align-items: flex-end;
  left: unset;
}

.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both .heading-list-item {
  text-align: right;
}

.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both .heading-list-item .line-wrap {
  right: 0.5rem;
}


.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both .heading-list-item[data-level="1"] .line-wrap {
  padding-left: 0.5rem;
}

.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both .heading-list-item[data-level="2"] .line-wrap {
  padding-left: 0.7rem;
}

.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both .heading-list-item[data-level="3"] .line-wrap {
  padding-left: 0.9rem;
}

.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both .heading-list-item[data-level="4"] .line-wrap {
  padding-left: 1.1rem;
}

.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both .heading-list-item[data-level="5"] .line-wrap {
  padding-left: 1.3rem;
}

.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both .heading-list-item[data-level="6"] .line-wrap {
  padding-left: 1.5rem;
}

.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both.pin .floating-toc .heading-list-item>.text-wrap,
.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both .floating-toc:hover .heading-list-item>.text-wrap {
  justify-content: flex-end;
  text-align: right;
  display: inline-flex;
}

.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-tabs 
.floating-toc-div.floating-both~.markdown-reading-view .markdown-preview-view {
  padding-right: 2rem;
  
}
/**垂直分割后第二个tabs*/

.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs 
.floating-toc-div.floating-both:not(.alignLeft) .heading-list-item[data-level] .text-wrap::before
{
  display: none;
}

.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs 
 .floating-toc-div.floating-both .floating-toc {
  right: calc(0.5rem + var(--floating-toc-position));
  align-items: flex-end;
  left: unset;
}

.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs 
 .floating-toc-div.floating-both .heading-list-item {
  text-align: right;
}

.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs 
 .floating-toc-div.floating-both .heading-list-item .line-wrap {
  right: 0.5rem;
}


.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs  
.floating-toc-div.floating-both .heading-list-item[data-level="1"] .line-wrap {
  padding-left: 0.5rem;
}

.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs  
.floating-toc-div.floating-both .heading-list-item[data-level="2"] .line-wrap {
  padding-left: 0.7rem;
}

.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs  
.floating-toc-div.floating-both .heading-list-item[data-level="3"] .line-wrap {
  padding-left: 0.9rem;
}

.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs  
.floating-toc-div.floating-both .heading-list-item[data-level="4"] .line-wrap {
  padding-left: 1.1rem;
}

.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs  
.floating-toc-div.floating-both .heading-list-item[data-level="5"] .line-wrap {
  padding-left: 1.3rem;
}

.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs 
 .floating-toc-div.floating-both .heading-list-item[data-level="6"] .line-wrap {
  padding-left: 1.5rem;
}

.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs  
.floating-toc-div.floating-both.pin .floating-toc .heading-list-item>.text-wrap,
.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs 
 .floating-toc-div.floating-both .floating-toc:hover .heading-list-item>.text-wrap {
  justify-content: flex-end;
  text-align: right;
  display: inline-flex;
}


/**垂直分割 然后水平分割的tabs*/


.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs 
.floating-toc-div.floating-both:not(.alignLeft) .heading-list-item[data-level] .text-wrap::before
{
  display: none;
}

.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs 
 .floating-toc-div.floating-both .floating-toc {
  right: calc(0.5rem + var(--floating-toc-position));
  align-items: flex-end;
  left: unset;
}

.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs 
 .floating-toc-div.floating-both .heading-list-item {
  text-align: right;
}

.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs 
 .floating-toc-div.floating-both .heading-list-item .line-wrap {
  right: 0.5rem;
}


.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs  
.floating-toc-div.floating-both .heading-list-item[data-level="1"] .line-wrap {
  padding-left: 0.5rem;
}

.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs  
.floating-toc-div.floating-both .heading-list-item[data-level="2"] .line-wrap {
  padding-left: 0.7rem;
}

.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs  
.floating-toc-div.floating-both .heading-list-item[data-level="3"] .line-wrap {
  padding-left: 0.9rem;
}

.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs  
.floating-toc-div.floating-both .heading-list-item[data-level="4"] .line-wrap {
  padding-left: 1.1rem;
}

.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs  
.floating-toc-div.floating-both .heading-list-item[data-level="5"] .line-wrap {
  padding-left: 1.3rem;
}

.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs 
 .floating-toc-div.floating-both .heading-list-item[data-level="6"] .line-wrap {
  padding-left: 1.5rem;
}

.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs  
.floating-toc-div.floating-both.pin .floating-toc .heading-list-item>.text-wrap,
.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs 
 .floating-toc-div.floating-both .floating-toc:hover .heading-list-item>.text-wrap {
  justify-content: flex-end;
  text-align: right;
  display: inline-flex;
}
/***/

/**两个垂直分割 水平分割的tabs*/
.workspace-split.mod-horizontal  ~.workspace-split.mod-horizontal>.workspace-tabs 
.floating-toc-div.floating-both:not(.alignLeft) .heading-list-item[data-level] .text-wrap::before
{
  display: none;
}

.workspace-split.mod-horizontal  ~.workspace-split.mod-horizontal>.workspace-tabs 
 .floating-toc-div.floating-both .floating-toc {
  right: calc(0.5rem + var(--floating-toc-position));
  align-items: flex-end;
  left: unset;
}
.workspace-split.mod-horizontal  ~.workspace-split.mod-horizontal>.workspace-tabs 
 .floating-toc-div.floating-both:is(.pin,.hover) .floating-toc {
  right: calc(-2.5rem + var(--floating-toc-position));
  align-items: unset;
  left: unset;
}
.workspace-split.mod-vertical   ~.workspace-split.mod-horizontal>.workspace-tabs 
 .floating-toc-div.floating-both .heading-list-item {
  text-align: right;
}

.workspace-split.mod-vertical  ~.workspace-split.mod-horizontal>.workspace-tabs 
 .floating-toc-div.floating-both .heading-list-item .line-wrap {
  right: 0.5rem;
}


.workspace-split.mod-vertical   ~.workspace-split.mod-horizontal>.workspace-tabs  
.floating-toc-div.floating-both .heading-list-item[data-level="1"] .line-wrap {
  padding-left: 0.5rem;
}

.workspace-split.mod-vertical    ~.workspace-split.mod-horizontal>.workspace-tabs  
.floating-toc-div.floating-both .heading-list-item[data-level="2"] .line-wrap {
  padding-left: 0.7rem;
}

.workspace-split.mod-vertical    ~.workspace-split.mod-horizontal>.workspace-tabs  
.floating-toc-div.floating-both .heading-list-item[data-level="3"] .line-wrap {
  padding-left: 0.9rem;
}

.workspace-split.mod-vertical    ~.workspace-split.mod-horizontal>.workspace-tabs  
.floating-toc-div.floating-both .heading-list-item[data-level="4"] .line-wrap {
  padding-left: 1.1rem;
}

.workspace-split.mod-vertical    ~.workspace-split.mod-horizontal>.workspace-tabs  
.floating-toc-div.floating-both .heading-list-item[data-level="5"] .line-wrap {
  padding-left: 1.3rem;
}

.workspace-split.mod-vertical    ~.workspace-split.mod-horizontal>.workspace-tabs 
 .floating-toc-div.floating-both .heading-list-item[data-level="6"] .line-wrap {
  padding-left: 1.5rem;
}

.workspace-split.mod-vertical    ~.workspace-split.mod-horizontal>.workspace-tabs  
.floating-toc-div.floating-both.pin .floating-toc .heading-list-item>.text-wrap,
.workspace-split.mod-vertical    ~.workspace-split.mod-horizontal>.workspace-tabs 
 .floating-toc-div.floating-both .floating-toc:hover .heading-list-item>.text-wrap {
  justify-content: flex-end;
  text-align: right;
  display: inline-flex;
}


/***/

/**第二个tabs右侧*/


.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both.alignLeft .toolbar.pin {
  right: 4rem;
}
.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both.alignLeft.pin .floating-toc .heading-list-item>.text-wrap, 
.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both.alignLeft .floating-toc:hover .heading-list-item>.text-wrap
{
   max-width: 12rem;
    text-overflow: ellipsis;
justify-content: flex-start;
text-align: left;
}


.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both.alignLeft .heading-list-item[data-level="2"] .text-wrap {
  padding-left: 1rem;
}
.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both.alignLeft .heading-list-item[data-level="3"] .text-wrap {
  padding-left: 2rem;
}
.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both.alignLeft .heading-list-item[data-level="4"] .text-wrap {
  padding-left: 3rem;
}

.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both.alignLeft .heading-list-item[data-level="5"] .text-wrap {
  padding-left: 3.5rem;
}
.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both.alignLeft .heading-list-item[data-level="6"] .text-wrap {
  padding-left: 4rem;
}

.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both.alignLeft 
.heading-list-item[data-level='2'] + .heading-list-item[data-level='2']  .text-wrap::before
{
  left: 0.6rem;
}
.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both.alignLeft 
.heading-list-item[data-level='3'] + .heading-list-item[data-level='3']  .text-wrap::before 
{
  left: 1.6rem;
}
.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both.alignLeft 
.heading-list-item[data-level='4'] + .heading-list-item[data-level='4']  .text-wrap::before 
{
  left: 2.6rem;
}
.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both.alignLeft 
 .heading-list-item[data-level='5'] + .heading-list-item[data-level='5']  .text-wrap::before 
 {
  left: 3.1rem;
}
.workspace-tabs~.workspace-tabs.mod-top-right-space  .floating-toc-div.floating-both.alignLeft 
 .heading-list-item[data-level='6'] + .heading-list-item[data-level='6']  .text-wrap::before 
 {
    left: 3.6rem;
}

/**垂直分割 然后水平分割的tabs*/

.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs  .floating-toc-div.floating-both.alignLeft .toolbar.pin {
  right: 4rem;
}
.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs  .floating-toc-div.floating-both.alignLeft.pin .floating-toc .heading-list-item>.text-wrap, 
.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs  .floating-toc-div.floating-both.alignLeft .floating-toc:hover .heading-list-item>.text-wrap
{
   max-width: 12rem;
    text-overflow: ellipsis;
justify-content: flex-start;
text-align: left;
}


.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs  .floating-toc-div.floating-both.alignLeft .heading-list-item[data-level="2"] .text-wrap {
  padding-left: 1rem;
}
.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs  .floating-toc-div.floating-both.alignLeft .heading-list-item[data-level="3"] .text-wrap {
  padding-left: 2rem;
}
.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs  .floating-toc-div.floating-both.alignLeft .heading-list-item[data-level="4"] .text-wrap {
  padding-left: 3rem;
}

.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs  .floating-toc-div.floating-both.alignLeft .heading-list-item[data-level="5"] .text-wrap {
  padding-left: 3.5rem;
}
.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs  .floating-toc-div.floating-both.alignLeft .heading-list-item[data-level="6"] .text-wrap {
  padding-left: 4rem;
}

.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs  .floating-toc-div.floating-both.alignLeft 
.heading-list-item[data-level='2'] + .heading-list-item[data-level='2']  .text-wrap::before
{
  left: 0.6rem;
}
.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs  .floating-toc-div.floating-both.alignLeft 
.heading-list-item[data-level='3'] + .heading-list-item[data-level='3']  .text-wrap::before 
{
  left: 1.6rem;
}
.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs  .floating-toc-div.floating-both.alignLeft 
.heading-list-item[data-level='4'] + .heading-list-item[data-level='4']  .text-wrap::before 
{
  left: 2.6rem;
}
.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs  .floating-toc-div.floating-both.alignLeft 
 .heading-list-item[data-level='5'] + .heading-list-item[data-level='5']  .text-wrap::before 
 {
  left: 3.1rem;
}
.workspace-split.mod-vertical  .workspace-tabs  ~.workspace-split.mod-horizontal>.workspace-tabs  .floating-toc-div.floating-both.alignLeft 
 .heading-list-item[data-level='6'] + .heading-list-item[data-level='6']  .text-wrap::before 
 {
    left: 3.6rem;
}

/***floating-both.alignLeft***/


.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs .floating-toc-div.floating-both.alignLeft .toolbar.pin {
  right: 4rem;
}
.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs .floating-toc-div.floating-both.alignLeft.pin .floating-toc .heading-list-item>.text-wrap, 
.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs .floating-toc-div.floating-both.alignLeft .floating-toc:hover .heading-list-item>.text-wrap
{
   max-width: 12rem;
    text-overflow: ellipsis;
justify-content: flex-start;
text-align: left;
}


.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs .floating-toc-div.floating-both.alignLeft .heading-list-item[data-level="2"] .text-wrap {
  padding-left: 1rem;
}
.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs .floating-toc-div.floating-both.alignLeft .heading-list-item[data-level="3"] .text-wrap {
  padding-left: 2rem;
}
.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs .floating-toc-div.floating-both.alignLeft .heading-list-item[data-level="4"] .text-wrap {
  padding-left: 3rem;
}

.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs .floating-toc-div.floating-both.alignLeft .heading-list-item[data-level="5"] .text-wrap {
  padding-left: 3.5rem;
}
.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs .floating-toc-div.floating-both.alignLeft .heading-list-item[data-level="6"] .text-wrap {
  padding-left: 4rem;
}

.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs .floating-toc-div.floating-both.alignLeft 
.heading-list-item[data-level='2'] + .heading-list-item[data-level='2']  .text-wrap::before
{
  left: 0.6rem;
}
.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs .floating-toc-div.floating-both.alignLeft 
.heading-list-item[data-level='3'] + .heading-list-item[data-level='3']  .text-wrap::before 
{
  left: 1.6rem;
}
.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs .floating-toc-div.floating-both.alignLeft 
.heading-list-item[data-level='4'] + .heading-list-item[data-level='4']  .text-wrap::before 
{
  left: 2.6rem;
}
.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs .floating-toc-div.floating-both.alignLeft 
 .heading-list-item[data-level='5'] + .heading-list-item[data-level='5']  .text-wrap::before 
 {
  left: 3.1rem;
}
.workspace-split.mod-vertical > .workspace-tabs  ~.workspace-tabs .floating-toc-div.floating-both.alignLeft 
 .heading-list-item[data-level='6'] + .heading-list-item[data-level='6']  .text-wrap::before 
 {
    left: 3.6rem;
}



 

/*****/
.setting-item-heading.float-cta:after {
  content: "";
  position: absolute;
  top: -10%;
  width: 104%;
  left: -2%;
  height: 120%;
  outline: 2px solid var(--text-accent);
  border-radius: 1em;
  pointer-events: none;
}
.setting-item-heading.float-cta {
  position: relative;
}
 

.floating-toc-remove-heading-indicator .heading-list-item[data-level] .text::after {
  display: none;
}

body:not(.toggle-floating-toc-header-color) .setting-item[data-id^="floating-toc-color-"]
{
  display: none;
}

body.toggle-floating-toc-header-color .floating-toc-div .floating-toc 
.heading-list-item[data-level="1"] a.text
{
 color:var(--floating-toc-color-h1,var(--h1-color));
}
body.toggle-floating-toc-header-color .floating-toc-div .floating-toc 
.heading-list-item[data-level="2"] a.text
{
  color:var(--floating-toc-color-h2,var(--h2-color));
}
body.toggle-floating-toc-header-color .floating-toc-div .floating-toc 
.heading-list-item[data-level="3"] a.text
{
  color:var(--floating-toc-color-h3,var(--h3-color));
}
body.toggle-floating-toc-header-color .floating-toc-div .floating-toc 
.heading-list-item[data-level="4"] a.text
{
  color:var(--floating-toc-color-h4,var(--h4-color));
}
body.toggle-floating-toc-header-color .floating-toc-div .floating-toc 
.heading-list-item[data-level="5"] a.text
{
  color:var(--floating-toc-color-h5,var(--h5-color));
}
body.toggle-floating-toc-header-color .floating-toc-div .floating-toc 
.heading-list-item[data-level="6"] a.text
{
  color:var(--floating-toc-color-h6,var(--h6-color));
}

/**************/

.enable-bar-icon .floating-toc-div:not(.hover)  .floating-toc:before {
  content: '';
  height: 12px;
  z-index: 10;
  background-repeat: no-repeat;
  cursor: var(--cursor);
  text-align: right;
  padding: 4px 20px;
  margin-bottom: 2px;
  border-radius: 5px;
  font-weight: 500;
  font-size: var(--font-adaptive-small);
}
.enable-bar-icon .floating-toc-div:not(.hover) .floating-toc:before {
  opacity: .35;
  background-position: center center;
  background-size: 18px;
  background-image: url("data:image/svg+xml,%3Csvg t='1671519666455' class='icon' viewBox='0 0 1024 1024' version='1.1' xmlns='http://www.w3.org/2000/svg' p-id='11772' width='16' height='16'%3E%3Cpath d='M887.212102 264.644379 320.083527 264.644379c-29.826306 0-54.012148-23.896246-54.012148-53.723575s24.185842-53.723575 54.012148-53.723575l567.127552 0c29.827329 0 54.012148 23.896246 54.012148 53.723575S917.039431 264.644379 887.212102 264.644379zM887.212102 562.426483 320.083527 562.426483c-29.826306 0-54.012148-24.408923-54.012148-54.235229 0-29.828352 24.185842-54.235229 54.012148-54.235229l567.127552 0c29.827329 0 54.012148 24.406876 54.012148 54.235229C941.22425 538.018583 917.039431 562.426483 887.212102 562.426483zM887.212102 859.18528 320.083527 859.18528c-29.826306 0-54.012148-24.407899-54.012148-54.235229s24.185842-54.235229 54.012148-54.235229l567.127552 0c29.827329 0 54.012148 24.407899 54.012148 54.235229S917.039431 859.18528 887.212102 859.18528zM153.565003 257.94377l-47.261397 0c-13.05534 0-23.630187-10.601452-23.630187-23.655769l0-47.234791c0-13.080923 10.574846-23.630187 23.630187-23.630187l47.261397 0c13.054317 0 23.630187 10.549264 23.630187 23.630187l0 47.234791C177.19519 247.341295 166.61932 257.94377 153.565003 257.94377L153.565003 257.94377zM153.565003 852.076372l-47.261397 0c-13.05534 0-23.630187-10.600429-23.630187-23.655769l0-47.233768c0-13.080923 10.574846-23.63121 23.630187-23.63121l47.261397 0c13.054317 0 23.630187 10.550287 23.630187 23.63121l0 47.233768C177.19519 841.475943 166.61932 852.076372 153.565003 852.076372L153.565003 852.076372zM153.565003 541.507034l-47.261397 0c-13.05534 0-23.630187-10.601452-23.630187-23.655769l0-47.234791c0-13.080923 10.574846-23.630187 23.630187-23.630187l47.261397 0c13.054317 0 23.630187 10.549264 23.630187 23.630187l0 47.234791C177.19519 530.905582 166.61932 541.507034 153.565003 541.507034L153.565003 541.507034z' fill='white' p-id='11773'%3E%3C/path%3E%3C/svg%3E");
}
.theme-light.enable-bar-icon  .floating-toc-div:not(.hover) .floating-toc:before {
    background-image: url("data:image/svg+xml,%3Csvg t='1671519666455' class='icon' viewBox='0 0 1024 1024' version='1.1' xmlns='http://www.w3.org/2000/svg' p-id='11772' width='16' height='16'%3E%3Cpath d='M887.212102 264.644379 320.083527 264.644379c-29.826306 0-54.012148-23.896246-54.012148-53.723575s24.185842-53.723575 54.012148-53.723575l567.127552 0c29.827329 0 54.012148 23.896246 54.012148 53.723575S917.039431 264.644379 887.212102 264.644379zM887.212102 562.426483 320.083527 562.426483c-29.826306 0-54.012148-24.408923-54.012148-54.235229 0-29.828352 24.185842-54.235229 54.012148-54.235229l567.127552 0c29.827329 0 54.012148 24.406876 54.012148 54.235229C941.22425 538.018583 917.039431 562.426483 887.212102 562.426483zM887.212102 859.18528 320.083527 859.18528c-29.826306 0-54.012148-24.407899-54.012148-54.235229s24.185842-54.235229 54.012148-54.235229l567.127552 0c29.827329 0 54.012148 24.407899 54.012148 54.235229S917.039431 859.18528 887.212102 859.18528zM153.565003 257.94377l-47.261397 0c-13.05534 0-23.630187-10.601452-23.630187-23.655769l0-47.234791c0-13.080923 10.574846-23.630187 23.630187-23.630187l47.261397 0c13.054317 0 23.630187 10.549264 23.630187 23.630187l0 47.234791C177.19519 247.341295 166.61932 257.94377 153.565003 257.94377L153.565003 257.94377zM153.565003 852.076372l-47.261397 0c-13.05534 0-23.630187-10.600429-23.630187-23.655769l0-47.233768c0-13.080923 10.574846-23.63121 23.630187-23.63121l47.261397 0c13.054317 0 23.630187 10.550287 23.630187 23.63121l0 47.233768C177.19519 841.475943 166.61932 852.076372 153.565003 852.076372L153.565003 852.076372zM153.565003 541.507034l-47.261397 0c-13.05534 0-23.630187-10.601452-23.630187-23.655769l0-47.234791c0-13.080923 10.574846-23.630187 23.630187-23.630187l47.261397 0c13.054317 0 23.630187 10.549264 23.630187 23.630187l0 47.234791C177.19519 530.905582 166.61932 541.507034 153.565003 541.507034L153.565003 541.507034z' fill='%23272636' p-id='11773'%3E%3C/path%3E%3C/svg%3E");
  }
  .enable-bar-icon  .floating-toc-div:not(.pin)  .floating-toc:not(:hover) li
 {
  display: none;
 }
 .enable-bar-icon  .floating-toc-div.pin  .floating-toc:before 
 {
  display: none;
 }

/******/


.floating-toc-div.floating-right:not(.alignLeft) .heading-list-item[data-level] .text-wrap::before
{
  display: none;
}
.floating-toc-div.floating-right 
.heading-list-item[data-level='2'] + .heading-list-item[data-level='2']  .text-wrap::before
{
  left: 0.6rem;
}
.floating-toc-div.floating-right 
.heading-list-item[data-level='3'] + .heading-list-item[data-level='3']  .text-wrap::before 
{
  left: 1.6rem;
}
.floating-toc-div.floating-right 
.heading-list-item[data-level='4'] + .heading-list-item[data-level='4']  .text-wrap::before 
{
  left: 2.6rem;
}
.floating-toc-div.floating-right 
 .heading-list-item[data-level='5'] + .heading-list-item[data-level='5']  .text-wrap::before 
 {
  left: 3.1rem;
}
 .floating-toc-div.floating-right 
 .heading-list-item[data-level='6'] + .heading-list-item[data-level='6']  .text-wrap::before 
 {
    left: 3.6rem;
}

body.float-curves-outline-style 
.heading-list-item[data-level='2'] + .heading-list-item[data-level='2']  .text-wrap::before, 
body.float-curves-outline-style 
.heading-list-item[data-level='3'] + .heading-list-item[data-level='3']  .text-wrap::before ,
body.float-curves-outline-style 
.heading-list-item[data-level='4'] + .heading-list-item[data-level='4']  .text-wrap::before ,
body.float-curves-outline-style 
 .heading-list-item[data-level='5'] + .heading-list-item[data-level='5']  .text-wrap::before ,
 body.float-curves-outline-style 
 .heading-list-item[data-level='6'] + .heading-list-item[data-level='6']  .text-wrap::before 
 {
    content: " ";
    position: absolute;
    top: calc(calc(var(--nav-item-size) * 1.8) / 2 * -1.5);
    left: -10px;
    bottom: calc(100% - (calc(var(--nav-item-size) * 1.8) + 8px) / 2 - 1px);
    width: 16px;
    border-bottom-left-radius: var(--radius-m);
    border-bottom: 1.5px solid hsla(var(--color-accent-hsl), 0.9);
    border-left: 2px solid hsla(var(--color-accent-hsl), 0.9);
}

body.float-outline-style 
.heading-list-item[data-level='2'] + .heading-list-item[data-level='2']  .text-wrap::before, 
body.float-outline-style 
.heading-list-item[data-level='3'] + .heading-list-item[data-level='3']  .text-wrap::before ,
body.float-outline-style 
.heading-list-item[data-level='4'] + .heading-list-item[data-level='4']  .text-wrap::before ,
body.float-outline-style 
 .heading-list-item[data-level='5'] + .heading-list-item[data-level='5']  .text-wrap::before ,
 body.float-outline-style 
 .heading-list-item[data-level='6'] + .heading-list-item[data-level='6']  .text-wrap::before 
 {
    content: " ";
      position: absolute;
      display: block;
      left: -4px;
      top: -1.3em;
      bottom: 1em;
      border-right: 1px solid var(--text-muted);
   
 }
 /*********/


 .floating-toc-div.hide
 {
  display:none;
 } /* @settings
name: CodeMirror Options
id: CodeMirror Options
settings:
  - 
    id: cm-embeds
    title: Embed Rendering
    type: heading
    level: 1
    collapsed: false
  - 
    id: cm5-minimal-embeds
    title: Minimal Page & Header Embeds in Edit Mode
    description: This will remove all padding, margin, border, and background from Page & Header embeds in Edit Mode. It will also hide the link icon until the embed is hovered over.
    type: class-toggle
  - 
    id: cm-header-theme
    title: Syntax Highlighting Theme
    type: heading
    level: 1
    collapsed: false
  -
    id: cm-theme-selection
    title: Theme
    type: class-select
    allowEmpty: false
    default: cm-theme-custom
    options:
      - 
        label: Solarized Light
        value: cm-theme-solarized-light
      - 
        label: Material Palenight
        value: cm-theme-material-palenight
      - 
        label: Dracula
        value: cm-theme-dracula
      - 
        label: Custom
        value: cm-theme-custom
  - 
    id: cm-header-styles
    title: Syntax Highlighting Styling
    type: heading
    level: 1
    collapsed: true
  -
    id: cm-font-monospace
    title: Code Block Font
    type: variable-text
    default: 'Jetbrains Mono, SFMono-Regular, Consolas, "Roboto Mono",
    monospace'
  -
    id: cm-font-size
    title: Code Block Font Size
    type: variable-text
    default: '16px'
  -
    id: cm-line-height
    title: Code Block Line Height
    type: variable-number
    default: 1.5
  -
    id: cm-font-weight
    title: Code Block Font Weight
    type: variable-number
    default: 500
  -
    id: cm-wrap-lines
    title: Code Block Wrap Lines in Peview
    type: variable-select
    default: 'pre-wrap'
    options:
        - 
          label: Wrap Lines
          value: pre-wrap
        -
          label: Do Not Wrap Lines
          value: pre
  - 
    id: cm-header-colors
    title: Syntax Highlighting Custom Colors (select theme "Custom" to enable)
    type: heading
    level: 1
    collapsed: true
  -
    id: cm-background-color
    title: Code Block Background Color
    type: variable-themed-color
    format: hex
    default-light: '#292d3e'
    default-dark: '#292d3e'
  -
    id: cm-active-line-background-color
    title: Code Block Active Line Background-Color
    type: variable-themed-color
    format: hex
    default-light: '#353a50'
    default-dark: '#353a50'
  -
    id: cm-foreground-color
    title: Code Block Foreground Color
    type: variable-themed-color
    format: hex
    default-light: '#d4d4d4'
    default-dark: '#d4d4d4'
  -
    id: cm-keyword
    title: Code Block Keyword Color
    type: variable-themed-color
    format: hex
    default-light: '#c792ea'
    default-dark: '#c792ea'
  -
    id: cm-atom
    title: Code Block Atom Color
    type: variable-themed-color
    format: hex
    default-light: '#f78c6c'
    default-dark: '#f78c6c'
  -
    id: cm-number
    title: Code Block Number Color
    type: variable-themed-color
    format: hex
    default-light: '#ff5370'
    default-dark: '#ff5370'
  -
    id: cm-type
    title: Code Block Type Color
    type: variable-themed-color
    format: hex
    default-light: '#decb6b'
    default-dark: '#decb6b'
  -
    id: cm-def
    title: Code Block Definition Color
    type: variable-themed-color
    format: hex
    default-light: '#82aaff'
    default-dark: '#82aaff'
  -
    id: cm-definition
    title: Code Block Definition-2 Color
    type: variable-themed-color
    format: hex
    default-light: '#82aaff'
    default-dark: '#82aaff'
  -
    id: cm-property
    title: Code Block Property Color
    type: variable-themed-color
    format: hex
    default-light: '#c792ea'
    default-dark: '#c792ea'
  -
    id: cm-variable
    title: Code Block Variable Color
    type: variable-themed-color
    format: hex
    default-light: '#f07178'
    default-dark: '#f07178'
  -
    id: cm-variable-2
    title: Code Block Variable-2 Color
    type: variable-themed-color
    format: hex
    default-light: '#eeffff'
    default-dark: '#eeffff'
  -
    id: cm-variable-3
    title: Code Block Variable-3 Color
    type: variable-themed-color
    format: hex
    default-light: '#f07178'
    default-dark: '#f07178'
  -
    id: cm-callee
    title: Code Block Callee Color
    type: variable-themed-color
    format: hex
    default-light: '#89ddff'
    default-dark: '#89ddff'
  -
    id: cm-qualifier
    title: Code Block Qualifier Color
    type: variable-themed-color
    format: hex
    default-light: '#decb6b'
    default-dark: '#decb6b'
  -
    id: cm-operator
    title: Code Block Operator Color
    type: variable-themed-color
    format: hex
    default-light: '#89ddff'
    default-dark: '#89ddff'
  -
    id: cm-hr
    title: Code Block HR Color
    type: variable-themed-color
    format: hex
    default-light: '#98e342'
    default-dark: '#98e342'
  -
    id: cm-link
    title: Code Block Link Color
    type: variable-themed-color
    format: hex
    default-light: '#696d70'
    default-dark: '#696d70'
  -
    id: cm-error-bg
    title: Code Block Error Color
    type: variable-themed-color
    format: hex
    default-light: '#ff5370'
    default-dark: '#ff5370'
  -
    id: cm-header
    title: Code Block Header Color
    type: variable-themed-color
    format: hex
    default-light: '#da7dae'
    default-dark: '#da7dae'
  -
    id: cm-builtin
    title: Code Block Builtin Color
    type: variable-themed-color
    format: hex
    default-light: '#ffcb6b'
    default-dark: '#ffcb6b'
  -
    id: cm-meta
    title: Code Block Meta Color
    type: variable-themed-color
    format: hex
    default-light: '#ffcb6b'
    default-dark: '#ffcb6b'
  -
    id: cm-matching-bracket
    title: Code Block Matching Bracket Color
    type: variable-themed-color
    format: hex
    default-light: '#ffffff'
    default-dark: '#ffffff'
  -
    id: cm-tag
    title: Code Block Tag Color
    type: variable-themed-color
    format: hex
    default-light: '#ff5370'
    default-dark: '#ff5370'
  -
    id: cm-tag-in-comment
    title: Code Block Tag in Comment Color
    type: variable-themed-color
    format: hex
    default-light: '#ff5370'
    default-dark: '#ff5370'
  -
    id: cm-string-2
    title: Code Block String-2 Color
    type: variable-themed-color
    format: hex
    default-light: '#f07178'
    default-dark: '#f07178'
  -
    id: cm-bracket
    title: Code Block Bracket Color
    type: variable-themed-color
    format: hex
    default-light: '#ff5370'
    default-dark: '#ff5370'
  -
    id: cm-comment
    title: Code Block Comment Color
    type: variable-themed-color
    format: hex
    default-light: '#676e95'
    default-dark: '#676e95'
  -
    id: cm-string
    title: Code Block String Color
    type: variable-themed-color
    format: hex
    default-light: '#c3e88d'
    default-dark: '#c3e88d'
  -
    id: cm-attribute
    title: Code Block Attribute Color
    type: variable-themed-color
    format: hex
    default-light: '#c792ea'
    default-dark: '#c792ea'
  -
    id: cm-attribute-in-comment
    title: Code Block Attribute In Comment Color
    type: variable-themed-color
    format: hex
    default-light: '#c792ea'
    default-dark: '#c792ea'

*/

:root {
  --cm-font-weight: 500;
  --cm-font-size: var(--editor-font-size);
  --cm-font-monospace: Jetbrains Mono, SFMono-Regular, Consolas, "Roboto Mono", monospace;
  --cm-wrap-lines: pre-wrap;
  --cm-line-height: 1.5;
}

:root,
.unified-cm-highlighting.cm-theme-custom {
  /* material: palenight theme */
  --cm-keyword: #c792ea;
  --cm-atom: #f78c6c;
  --cm-number: #ff5370;
  --cm-type: #decb6b;
  --cm-def: #82aaff;
  --cm-property: #c792ea;
  --cm-variable: #f07178;
  --cm-variable-2: #eeffff;
  --cm-variable-3: #f07178;
  --cm-definition: #82aaff;
  --cm-callee: #89ddff;
  --cm-qualifier: #decb6b;
  --cm-operator: #89ddff;
  --cm-hr: #98e342;
  --cm-link: #696d70;
  --cm-error-bg: #ff5370;
  --cm-header: #da7dae;
  --cm-builtin: #ffcb6b;
  --cm-meta: #ffcb6b;
  --cm-matching-bracket: #ffffff;
  --cm-tag: #ff5370;
  --cm-tag-in-comment: #ff5370;
  --cm-string-2: #f07178;
  --cm-bracket: #ff5370;
  --cm-comment: #676e95;
  --cm-string: #c3e88d;
  --cm-attribute: #c792ea;
  --cm-attribute-in-comment: #c792ea;
  --cm-background-color: #292d3e;
  --cm-active-line-background-color: #353a50;
  --cm-foreground-color: #d4d4d4;
}

body.unified-cm-highlighting.theme-light.cm-theme-dracula,
body.unified-cm-highlighting.theme-dark.cm-theme-dracula {
  --cm-background: #282a36;
  --cm-foreground: #f8f8f2;
  --cm-comment: #6272a4;
  --cm-string: #f1fa8c;
  --cm-string-2: #f1fa8c;
  --cm-number: #bd93f9;
  --cm-variable: #50fa7b;
  --cm-variable-2: #ffffff;
  --cm-def: #50fa7b;
  --cm-operator: #ff79c6;
  --cm-keyword: #ff79c6;
  --cm-atom: #bd93f9;
  --cm-meta: #f8f8f2;
  --cm-tag: #ff79c6;
  --cm-attribute: #50fa7b;
  --cm-qualifier: #50fa7b;
  --cm-property: #66d9ef;
  --cm-builtin: #50fa7b;
  --cm-variable-3: #ffb86c;
  --cm-type: #ffb86c;
  --cm-activeline-background: #414458;
  --cm-matchingbracket: #fffff;
}

body.unified-cm-highlighting.theme-light.cm-theme-material-palenight,
body.unified-cm-highlighting.theme-dark.cm-theme-material-palenight {
  /* material: palenight theme */
  --cm-keyword: #c792ea;
  --cm-atom: #f78c6c;
  --cm-number: #ff5370;
  --cm-type: #decb6b;
  --cm-def: #82aaff;
  --cm-property: #c792ea;
  --cm-variable: #f07178;
  --cm-variable-2: #eeffff;
  --cm-variable-3: #f07178;
  --cm-definition: #82aaff;
  --cm-callee: #89ddff;
  --cm-qualifier: #decb6b;
  --cm-operator: #89ddff;
  --cm-hr: #98e342;
  --cm-link: #696d70;
  --cm-error-bg: #ff5370;
  --cm-header: #da7dae;
  --cm-builtin: #ffcb6b;
  --cm-meta: #ffcb6b;
  --cm-matching-bracket: #ffffff;
  --cm-tag: #ff5370;
  --cm-tag-in-comment: #ff5370;
  --cm-string-2: #f07178;
  --cm-bracket: #ff5370;
  --cm-comment: #676e95;
  --cm-string: #c3e88d;
  --cm-attribute: #c792ea;
  --cm-attribute-in-comment: #c792ea;
  --cm-background-color: #292d3e;
  --cm-active-line-background-color: #353a50;
  --cm-foreground-color: #d4d4d4;
}

body.unified-cm-highlighting.theme-light.cm-theme-solarized-light,
body.unified-cm-highlighting.theme-dark.cm-theme-solarized-light {
  /* solarized */
  --cm-keyword: #cb4b16;
  --cm-atom: #d33682;
  --cm-number: #d33682;
  --cm-type: #6c71c4;
  --cm-def: #2aa198;
  --cm-property: #2aa198;
  --cm-variable: #839496;
  --cm-variable-2: #b58900;
  --cm-variable-3: #6c71c4;
  --cm-definition: #82aaff;
  --cm-callee: #89ddff;
  --cm-qualifier: #b58900;
  --cm-operator: #6c71c4;
  --cm-hr: #98e342;
  --cm-link: #93a1a1;
  --cm-error-bg: #ff5370;
  --cm-header: #586e75;
  --cm-builtin: #d33682;
  --cm-meta: #859900;
  --cm-matching-bracket: #859900;
  --cm-tag: #93a1a1;
  --cm-tag-in-comment: #ff5370;
  --cm-string-2: #b58900;
  --cm-bracket: #cb4b16;
  --cm-comment: #586e75;
  --cm-string: #859900;
  --cm-attribute: #2aa198;
  --cm-attribute-in-comment: #c792ea;
  --cm-background-color: #fdf6e3;
  --cm-active-line-background-color: #fffcf4;
  --cm-foreground-color: #657b83;
}

/* Settings Styling */

.mod-settings .setting-item.setting-disabled {
  display: none;
}

.codemirror-options-settings .info {
  font-size: 1rem;
  color: var(--text-accent);
}

.token-list-setting .setting-item-description {
  user-select: text !important;
}

.token-list-setting .setting-item-description {
  max-width: 24em;
}

/* START: Style rendered code blocks */

/* This element causes top padding and isn't needed, so we hide it */
.rendered-code-block-wrapper span[cm-text] {
  display: none;
}

/* Allow text selection */
.rendered-code-block-wrapper {
  user-select: text;
}

/* Embed Styling */
.rendered-embed-wrapper .CodeMirror-line > span {
  display: block;
  height: 0px;
}
.rendered-embed-wrapper .hmd-fold-code-embed > div > p {
  margin: 0;
}
.cm-s-obsidian .rendered-inline-embed {
  position: relative;
  border: 1px solid transparent;
}
.cm-s-obsidian .rendered-inline-embed .hmd-fold-embed-stub:hover,
.cm-s-obsidian .rendered-embed-wrapper .hmd-fold-embed-stub:hover {
  color: #fff;
  border-color: #c30;
  background: #f40;
}
.cm-s-obsidian .rendered-inline-embed .hmd-fold-embed-stub.omittable {
  display: none;
}
.cm-s-obsidian .rendered-inline-embed:hover {
  border: 1px dashed #999;
}
.cm-s-obsidian .rendered-embed-wrapper .hmd-fold-embed-stub {
  display: inline-block;
  font-size: 67%;
  color: #999;
  vertical-align: middle;
  border: 1px solid #999;
  padding: 0 0.2em;
  border-radius: 5px;
  margin: 0 0.5em;
  background-color: var(--background-primary-alt);
  cursor: pointer;
}
.cm-s-obsidian .rendered-inline-embed .hmd-fold-embed-stub {
  display: inline-block;
  font-size: 67%;
  color: #999;
  vertical-align: middle;
  border: 1px solid #999;
  padding: 0 0.2em;
  border-radius: 5px;
  margin: 0 0.5em;
  background-color: var(--background-primary-alt);
  cursor: pointer;
}
.cm-s-obsidian .rendered-inline-embed:hover .hmd-fold-embed-stub.omittable {
  display: block;
  left: 0;
  bottom: 100%;
  margin: 0;
  position: absolute;
  z-index: 100;
}
/* add padding to avoid cursor flicker when moving the cursor from line to line
   without the padding, there's a slight gap between the lines */
.rendered-inline-embed.embed-type-block :where(p, li) {
  padding: 3px 0;
}
/* render any headers as normal sized inline text to avoid any cursor/button issues */
/* why are you block referencing a header anyway? use a header ref */
.rendered-inline-embed.embed-type-block :where(h1, h2, h3, h4, h5, h6) {
  margin: 0;
  font-size: 1em;
  display: inline;
}

/* move the <EMBED> button on list lines since Outliner hides xy overflow */
.cm-s-obsidian .HyperMD-list-line .rendered-inline-embed:hover .hmd-fold-embed-stub.omittable {
  display: block;
  left: -4.8em;
  height: 1.9em;
  top: 0;
  margin: 0;
  position: absolute;
  z-index: 100;
}
.cm-s-obsidian .HyperMD-list-line .rendered-inline-embed:hover .hmd-fold-embed-stub.omittable.flip-stub {
  display: inline-block;
  height: 1.9em;
  margin: 0;
  position: static;
  z-index: 100;
  width: auto;
}

.cm-s-obsidian .hmd-fold-html-stub.omittable,
.cm-s-obsidian .omittable.hmd-fold-code-stub {
  display: none;
}
/* End Embed Styling */

.cm-s-obsidian .rendered-code-block-wrapper .HyperMD-codeblock-begin {
  padding: 0;
}

/* Remove the default code block background and let the rendered element set it */
.rendered-code-block-wrapper .HyperMD-codeblock-bg {
  opacity: 0;
}
/* Admonitions have margins by default. We don't need these in edit mode */
/* You can add the margins back in, if you want, but you'll need to adjust the <CODE> button positioning */
.rendered-code-block-wrapper .admonition {
  margin: 0em;
}

/* END: Style rendered code blocks */

/* START: Reset default theme styling of rendered tables */

.cm-s-obsidian .CodeMirror-linewidget table.dataview td,
.cm-s-obsidian .CodeMirror-linewidget table.dataview th,
.cm-s-obsidian .hmd-fold-html table.dataview td,
.cm-s-obsidian .hmd-fold-html table.dataview th {
  border: unset;
  padding: 4px 10px;
}

.cm-s-obsidian .CodeMirror-linewidget .table-view-table.dataview > thead > tr > th {
  font-weight: 700;
  font-size: larger;
  border-top: none;
  border-left: none;
  border-right: none;
  border-bottom: solid;
  max-width: 100%;
  /* padding: 0px; */
}

/* START: Banner rendering */

body.cm-render-banners div[data-banner] .CodeMirror-code {
  margin-top: var(--banner-height);
  /* margin-bottom: calc(-1 * var(--banner-height)); */
}

/* body.cm-render-banners div[data-banner] .CodeMirror-lines>div>div:last-child {
  margin-bottom: calc(-1 * var(--banner-height));
} */

/* the style below is needed to ensure the banner isn't removed when there is
   no vertical scroll bar */
body.cm-render-banners div[data-banner] .CodeMirror-vscrollbar {
  display: block;
  bottom: 0;
}
body.cm-render-banners div[data-banner] .CodeMirror-vscrollbar::before {
  content: "";
  height: var(--banner-height);
  width: 100%;
  position: absolute;
  top: 0;
  left: 0;
  background: var(--banner);
  background-size: cover;
  background-position: var(--banner_x) var(--banner_y);
}
body.cm-render-banners div[data-banner] .CodeMirror-gutter.CodeMirror-linenumbers,
body.cm-render-banners .mod-root div[data-banner] .CodeMirror-gutter.CodeMirror-foldgutter {
  background: transparent;
}
body.cm-render-banners div[data-banner][data-banner-style="gradient"] .CodeMirror-vscrollbar::before {
  -webkit-mask-image: linear-gradient(to bottom, black, transparent);
}

/* END: Banner rendering */

/* START: Rendered code & html block <CODE> button styling and placement */

.rendered-code-block-wrapper .CodeMirror-line .CodeMirror-widget,
.rendered-html-block-wrapper .CodeMirror-line .CodeMirror-widget,
.rendered-embed-wrapper .CodeMirror-line .CodeMirror-widget {
  position: absolute;
  left: 5px;
  top: -1.5em;
  padding-bottom: 0.5em;
  z-index: 3;
  line-height: 1.5;
  display: none;
}
.cm-s-obsidian .CodeMirror-linewidget.rendered-html-block,
.cm-s-obsidian .CodeMirror-linewidget.rendered-embed,
.cm-s-obsidian .CodeMirror-linewidget.rendered-code-block {
  padding: 0 5px;
}
.rendered-html-block-wrapper:hover .CodeMirror-line .CodeMirror-widget,
.rendered-embed-wrapper:hover .CodeMirror-line .CodeMirror-widget,
.rendered-code-block-wrapper:hover .CodeMirror-line .CodeMirror-widget {
  display: inline-flex;
}
.rendered-html-block-wrapper .CodeMirror-linewidget,
.rendered-embed-wrapper .CodeMirror-linewidget,
.rendered-code-block-wrapper .CodeMirror-linewidget {
  /* this is needed to have CM properly calculate the widget height */
  /* when using display: block, margins on child elements don't cause the parent to expand */
  display: grid;
}
.mod-root .markdown-source-view.is-readable-line-width .rendered-embed-wrapper .CodeMirror,
.mod-root .is-readable-line-width .rendered-embed-wrapper .markdown-preview-section {
  padding-left: 0;
  padding-right: 0;
  margin: 0 auto 0 auto;
  width: auto;
  max-width: 100%;
}
/* fixes for yinyang embeds getting cut off on the right side gutter */
.rendered-embed .hmd-fold-embed-content,
.rendered-inline-embed:not(.embed-type-block) .markdown-embed-content {
  max-width: 100%;
}
/* fixes for yinyang embeds getting cut off on the right side gutter */
.rendered-inline-embed:not(.embed-type-block) > div {
  width: 100%;
}
.cm-s-obsidian .CodeMirror-widget :where(.hmd-fold-code-stub, .hmd-fold-html-stub, .hmd-fold-embed-stub) {
  font-size: 0.7rem;
  font-family: var(--font-monospace);
  font-weight: 600;
  margin: 0;
  padding: 0em 0.2em;
  line-height: 1.75em;
}

/* END: Rendered code block <CODE> button styling and placement */

/* Inline Embed Styling */
.rendered-inline-embed div.markdown-embed {
  border-top: none;
  /* border-bottom-color: var(--block-ref-color); */
  /* border-bottom-style: dashed; */
  padding: 0px;
  margin: 0px;
}
/* .rendered-inline-embed .markdown-embed-content {
  white-space: normal;
} */
.rendered-inline-embed > div > p,
.rendered-embed > div > p {
  margin-block: 0;
}
.rendered-inline-embed > div,
.rendered-inline-embed > div > p {
  display: inline;
}
/* .rendered-embed p:first-of-type {
  margin-block: 0;
} */
.CodeMirror-linewidget.rendered-widget {
  padding: 0 5px;
}
/* fix styling of "file not created yet" block */
.rendered-embed .file-embed:hover {
  background-color: none;
  border: none;
}
.rendered-inline-embed.embed-type-block .markdown-embed,
.rendered-inline-embed.embed-type-block .file-embed {
  border: none;
}
/* fix rendering of embedded pdfs */
.rendered-embed .internal-embed:not(.image-embed) {
  display: block;
}
.rendered-embed .pdf-embed {
  width: 100%;
  height: 800px;
}
/* style inline block refs */
.rendered-inline-embed.embed-type-block,
.rendered-inline-embed.embed-type-block .markdown-embed,
.rendered-inline-embed.embed-type-block .markdown-embed > .markdown-embed-content,
.rendered-inline-embed.embed-type-block .markdown-embed > .markdown-embed-content > .markdown-preview-view,
.rendered-inline-embed.embed-type-block
  .markdown-embed
  > .markdown-embed-content
  > .markdown-preview-view
  > .markdown-preview-sizer,
.rendered-inline-embed.embed-type-block
  .markdown-embed
  > .markdown-embed-content
  > .markdown-preview-view
  > .markdown-preview-sizer
  > div,
.rendered-inline-embed.embed-type-block
  .markdown-embed
  > .markdown-embed-content
  > .markdown-preview-view
  > .markdown-preview-sizer
  > div
  > p,
.rendered-inline-embed.embed-type-block
  .markdown-embed
  > .markdown-embed-content
  > .markdown-preview-view
  > .markdown-preview-sizer
  > div
  > div {
  display: inline;
  padding: 0px !important;
  margin: 0px !important;
}

/* Convert bullet list block refs inline (remove the bullet) */
.rendered-inline-embed.embed-type-block
  .markdown-embed
  > .markdown-embed-content
  > .markdown-preview-view
  > .markdown-preview-sizer
  ul,
.rendered-inline-embed.embed-type-block
  .markdown-embed
  > .markdown-embed-content
  > .markdown-preview-view
  > .markdown-preview-sizer
  li,
.rendered-inline-embed.embed-type-block
  .markdown-embed
  > .markdown-embed-content
  > .markdown-preview-view
  > .markdown-preview-sizer
  li
  > div {
  /* inline-flex solves the list item embedded into not list item problem */
  display: inline;
}
.rendered-inline-embed.embed-type-block span.internal-embed {
  white-space: normal;
}
.rendered-inline-embed.embed-type-block .markdown-preview-view span.internal-embed {
  display: inline;
}
.rendered-inline-embed.embed-type-block
  div.markdown-embed
  > div.markdown-embed-content
  > div.markdown-preview-view
  > div.markdown-preview-section
  ul {
  padding: 0px !important;
  margin: 0px !important;
}

/* Hide the block ref link since we created our own */
.rendered-inline-embed.embed-type-block div.markdown-embed > div.markdown-embed-link {
  display: none;
}

.rendered-inline-embed.embed-type-block:hover {
  cursor: pointer;
}

.rendered-inline-embed.embed-type-block
  div.markdown-embed
  > div.markdown-embed-content
  > div.markdown-preview-view
  > div.markdown-preview-section {
  min-height: 0px !important;
}
/* END: Inline Embed Styling */

/* START: Render HTML Styling */

.cm-s-obsidian .hmd-fold-html {
  position: relative;
  border: 1px solid transparent;
}

/* END: Render HTML Styling */

/* Ozan doesn't have a setting to only disable image rendering 
   so here we try and hide them if the "render images" setting is on */
.cm-render-images-inline
  .oz-image-widget
  img:where([src*=".png"], [src*=".gif"], [src*=".svg"], [src*=".bmp"], [src*=".jpg"], [src*=".jpeg"]) {
  display: none;
}

/* prevent images from wrapping when embedded in list items */
.cm-render-images-inline .cm-s-obsidian .HyperMD-list-line img.hmd-image {
  max-width: 99%;
}

.cm-render-images-inline .cm-s-obsidian img.hmd-image {
  vertical-align: baseline;
}

/* Hide Tokens Styling */
/* Note: Most of the token hiding styling is already in the base Obsidian theme */

.hide-tokens .cm-s-obsidian pre.hmd-inactive-line.HyperMD-hr span.cm-hr {
  color: transparent;
  background-color: transparent;
}
.hide-tokens .cm-s-obsidian pre.HyperMD-hr {
  left: 0;
  right: 0;
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAQAAAAziH6sAAAADklEQVR42mOc+Z9x5n8ACTkDM4ikM1IAAAAASUVORK5CYII=)
    repeat-x 0 center;
}

/* Table Styling */
.hide-tokens .cm-s-obsidian pre.HyperMD-table-row span.cm-hmd-table-sep:before {
  content: "|";
  color: transparent;
  top: 0;
  height: 100%;
  position: absolute;
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mOc+R8AAjcBmvywMWoAAAAASUVORK5CYII=)
    repeat-y center 0;
  pointer-events: none;
}
.hide-tokens .cm-s-obsidian pre.HyperMD-table-row > span {
  display: inline-block;
  border-top: 1px solid #999;
  margin-right: 50px;
}
.hide-tokens .cm-s-obsidian pre.HyperMD-table-row.HyperMD-table-row-0 > span,
.hide-tokens .cm-s-obsidian pre.HyperMD-table-row.HyperMD-table-row-1 > span,
.hide-tokens .cm-s-obsidian pre.HyperMD-table-row.HyperMD-table-row-2 > span {
  border-top: 0;
}
.hide-tokens .cm-s-obsidian pre.HyperMD-table-row span.cm-hmd-table-sep {
  width: 15px;
  text-align: center;
  box-sizing: content-box;
  font-weight: 400;
}
.hide-tokens .cm-s-obsidian pre.HyperMD-table-row span.cm-hmd-table-sep.cm-hmd-table-sep-dummy {
  width: 1em;
}
.cm-s-obsidian .HyperMD-table-row > :last-child {
  padding-right: 0px !important;
}
.hide-tokens
  .cm-s-obsidian
  pre.hmd-inactive-line.HyperMD-table-row
  span.cm-hmd-table-sep.cm-hmd-table-sep-dummy:before {
  display: none;
}
.hide-tokens .cm-s-obsidian pre.hmd-inactive-line.HyperMD-table-row-1 > span {
  color: transparent !important;
  text-shadow: none;
}
.hide-tokens .cm-s-obsidian pre.HyperMD-table-row span.cm-hmd-table-sep:before {
  content: "|";
  color: transparent;
  top: 0;
  height: 100%;
  position: absolute;
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mOc+R8AAjcBmvywMWoAAAAASUVORK5CYII=)
    repeat-y center 0;
  pointer-events: none;
}
.hide-tokens .cm-s-obsidian pre.HyperMD-table-row.HyperMD-table-row-0 {
  font-weight: 600;
}
.hide-tokens .cm-s-obsidian pre.HyperMD-table-row.HyperMD-table-row-0 span.cm-strong {
  font-weight: 800;
}
.hide-tokens .cm-s-obsidian pre.HyperMD-table-row .hmd-table-column-content {
  padding: 4px 1px;
}
.hide-tokens .cm-s-obsidian pre.HyperMD-table-row.HyperMD-table-row-1 {
  line-height: 8px;
}
.hide-tokens .cm-s-obsidian pre.HyperMD-table-row.HyperMD-table-row-1 > span {
  border-bottom: 0;
}
.hide-tokens .cm-s-obsidian pre.HyperMD-table-row.HyperMD-table-row-1 .hmd-table-column-content {
  padding: 1px;
}
.hide-tokens .cm-s-obsidian pre.HyperMD-table-row.HyperMD-table-row-0 > span {
  border-bottom: 0;
}
.hide-tokens .cm-s-obsidian pre.HyperMD-table-row.HyperMD-table-row-0 span.hmd-table-column-content {
  padding-bottom: 1px;
}
.hide-tokens .cm-s-obsidian pre.HyperMD-table-row.HyperMD-table-row-2 span.hmd-table-column-content {
  padding-top: 1px;
}

.cm-s-obsidian span.hmd-hidden-token.cm-formatting-link,
.cm-s-obsidian span.hmd-hidden-token.cm-formatting-highlight,
.cm-s-obsidian span.hmd-hidden-token.cm-internal-link-url,
.cm-s-obsidian span.hmd-hidden-token.cm-internal-link-ref {
  display: inline;
  font-size: 1px !important;
  letter-spacing: -1ch;
  font-family: monospace;
  color: transparent;
}
.hide-tokens .cm-s-obsidian pre.hmd-inactive-line span.cm-formatting-quote {
  color: transparent;
}

/* fold links */
.cm-s-obsidian .hmd-link-icon::after {
  content: " " !important;
  text-shadow: none !important;
  display: inline-block;
  width: 0.8em;
  height: 0.8em;
  margin-left: 4px;
  opacity: 1;
  padding-left: 1px;
  background-color: var(--text-accent);
  -webkit-mask-repeat: no-repeat;
  -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><path fill="slategrey" d="M13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z"/><path fill="slategrey" d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"></path></svg>');
}

body .cm-s-obsidian span.hmd-link-icon {
  opacity: 0.6;
}

.cm-s-obsidian.HyperMD-with-meta span.cm-url,
.cm-s-obsidian.HyperMD-with-meta span.cm-link,
.cm-s-obsidian.HyperMD-with-meta span.cm-hmd-internal-link,
.cm-s-obsidian.HyperMD-with-meta .cm-link + .CodeMirror-widget,
.cm-s-obsidian.HyperMD-with-meta span.cm-hashtag,
.cm-s-obsidian.HyperMD-with-ctrl span.cm-url,
.cm-s-obsidian.HyperMD-with-ctrl span.cm-link,
.cm-s-obsidian.HyperMD-with-ctrl span.cm-hmd-internal-link,
.cm-s-obsidian.HyperMD-with-ctrl .cm-link + .CodeMirror-widget,
.cm-s-obsidian.HyperMD-with-ctrl span.cm-hashtag {
  cursor: pointer;
}

/* set the new text selection mode to use --text-selection */
body.style-active-selection span.CodeMirror-selectedtext {
  background-color: var(--text-selection) !important;
}

/* disable the default CodeMirror selection */
body.style-active-selection .CodeMirror-selected {
  background: transparent !important;
}

/* these two styles are needed for line nums and copy blocks to position properly */
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian[class*="language-"],
body.unified-cm-highlighting.cm-show-copy-button-on-pre[class*="theme-"] .markdown-preview-view pre {
  position: relative;
}

body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian[class*="language-"] code,
body.unified-cm-highlighting.cm-show-copy-button-on-pre[class*="theme-"] .markdown-preview-view pre code {
  position: static !important;
}

/* START Setting: Show Line Numbers === true */
body.unified-cm-highlighting.cm-show-line-nums[class*="theme-"] .cm-linenumber {
  position: absolute;
  left: 0.5em;
  user-select: none;
  color: var(--cm-comment);
}

body.unified-cm-highlighting.cm-show-line-nums[class*="theme-"] .markdown-preview-view pre {
  padding-left: 3em !important;
}

/* END Setting: Show Line Numbers === true */

/* START Copy button */
body.fallback-highlighting[class*="theme-"] .markdown-preview-view button.copy {
  display: inline-block;
  height: 30px;
  padding: 0 12px;
  color: var(--cm-foreground-color);
  text-align: center;
  font-size: 11px !important;
  font-weight: 600;
  line-height: 30px;
  letter-spacing: 0.1rem;
  text-transform: uppercase !important;
  text-decoration: none;
  white-space: nowrap;
  background-color: transparent;
  border-radius: 4px;
  border: 1px solid var(--cm-foreground-color);
  cursor: pointer;
  box-sizing: border-box;
}
body.fallback-highlighting[class*="theme-"] .markdown-preview-view button.copy {
  color: var(--cm-foreground-color);
  position: absolute;
  right: 0rem;
  top: 0.6rem;
  opacity: 0;
  z-index: 1;
}

body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre:hover button.copy {
  background: var(--cm-background-color);
  opacity: 1;
}
/* END Copy button */

/* body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock,
body.fallback-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock {
    --code-bg: var(--cm-background-color);
    --note: var(--cm-background-color);
} */

body.unified-cm-highlighting[class*="theme-"] .HyperMD-codeblock-bg,
body.fallback-highlighting[class*="theme-"] .HyperMD-codeblock-bg {
  /* this is required to override YingYang's !important declaration */
  /* will remove as soon as it's removed from YinYang */
  --pre-code: var(--cm-background-color);
}

body.fallback-highlighting[class*="theme-"] .markdown-preview-section code {
  /* this is required to override YingYang's !important declaration */
  /* will remove as soon as it's removed from YinYang */
  --inline-code: var(--cm-foreground-color);
}

/* Reasoning for body.unified-cm-highlighting[class*="theme-"]  */
/* I had to get very specific to override the styling from Editor Syntax Highlighing and themes like Yin and Yang */

/* Setting the cursor since the cursor is black by default in the base theme
   * and it gets lost in a code black with a black background */
body.unified-cm-highlighting[class*="theme-"] .CodeMirror-cursor {
  --cursor-color: #afbaff;
  border-color: var(--cursor-color);
}

body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-opening-tag,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-closing-tag {
  color: var(--cm-comment) !important;
}

body.unified-cm-highlighting[class*="theme-"] .CodeView,
body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian,
body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-gutter,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian div.HyperMD-codeblock-bg, /* code block in edit mode */
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.CodeMirror-linebackground, /* frontmatter block in edit mode */
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .templater-command-bg, /* templater block in edit mode */
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .templater-inline .cm-templater-command, /* templater inline in edit mode */
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.CodeMirror-linebackground, /* math block in edit mode */
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre[class*="language-"],
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre[class*="language-"] code /* code block in preview mode */ {
  background: var(--cm-background-color);
  background-color: var(--cm-background-color);
  text-shadow: none; /* just no */
}
body.fallback-highlighting[class*="theme-"] code[class*="language-"],
body.unified-cm-highlighting[class*="theme-"] code[class*="language-"] {
  display: block;
}

/* edit modes */
body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter,
body.unified-cm-highlighting[class*="theme-"] .cm-templater-command,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math,
body.unified-cm-highlighting[class*="theme-"] .HyperMD-codeblock,
body.unified-cm-highlighting[class*="theme-"] .cm-hmd-codeblock {
  background: transparent;
  --font-monospace: var(--cm-font-monospace);
  color: var(--cm-foreground-color);
  font-family: var(--cm-font-monospace);
  font-weight: var(--cm-font-weight);
  line-height: var(--cm-line-height);
  font-size: var(--cm-font-size);
  white-space: pre-wrap; /* lines must wrap in edit mode or it breaks CM */
}

/* preview modes */
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian[class*="language-"],
body.fallback-highlighting[class*="theme-"] .markdown-preview-view code[class*="language-"],
body.fallback-highlighting[class*="theme-"] .markdown-preview-view .HyperMD-codeblock,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view .cm-hmd-codeblock {
  --font-monospace: var(--cm-font-monospace);
  color: var(--cm-foreground-color);
  font-family: var(--cm-font-monospace);
  font-weight: var(--cm-font-weight);
  line-height: var(--cm-line-height);
  font-size: var(--cm-font-size);
  white-space: var(--cm-wrap-lines);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines .cm-keyword,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.cm-keyword,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.cm-keyword,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.cm-keyword,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock .cm-keyword,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian .cm-keyword {
  color: var(--cm-keyword);
  font-weight: normal;
}

body.cm5-minimal-embeds .CodeMirror-linewidget .rendered-embed .markdown-embed,
body.cm5-minimal-embeds .CodeMirror-linewidget .rendered-embed .markdown-embed .markdown-preview-view,
body.cm5-minimal-embeds .rendered-inline-embed .markdown-embed,
body.cm5-minimal-embeds .rendered-inline-embed .markdown-embed .markdown-preview-view {
  border: none !important; /* had to in order tp override primary theme */
  margin: 0;
  padding: 0;
  background: none;
}
body.cm5-minimal-embeds .CodeMirror-linewidget .rendered-embed .markdown-embed .markdown-embed-link {
  opacity: 0;
}
body.cm5-minimal-embeds .CodeMirror-linewidget .rendered-embed:hover .markdown-embed .markdown-embed-link {
  opacity: 1;
}

body.cm5-minimal-embeds .CodeMirror-linewidget.rendered-widget {
  padding: 0;
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines .cm-atom,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.cm-atom,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.cm-atom,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.cm-atom,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock .cm-atom,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian .cm-atom {
  color: var(--cm-atom);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines .cm-number,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.cm-number,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.cm-number,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.cm-number,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock .cm-number,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian .cm-number {
  color: var(--cm-number);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines span.cm-type,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian span.cm-hmd-frontmatter.cm-type,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian span.cm-templater-command.cm-type,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian span.cm-math.cm-type,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock span.cm-type,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian span.cm-type {
  color: var(--cm-type);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines .cm-def,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.cm-def,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.cm-def,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.cm-def,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock .cm-def,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian .cm-def {
  color: var(--cm-def);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines span.cm-property,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian span.cm-hmd-frontmatter.cm-property,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian span.cm-templater-command.cm-property,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian span.cm-math.cm-property,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock span.cm-property,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian span.cm-property {
  color: var(--cm-property);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines span.cm-variable,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian span.cm-hmd-frontmatter.cm-variable,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian span.cm-templater-command.cm-variable,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian span.cm-math.cm-variable,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock span.cm-variable,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian span.cm-variable {
  color: var(--cm-variable);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines span.cm-variable-2,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian span.cm-hmd-frontmatter.cm-variable-2,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian span.cm-templater-command.cm-variable-2,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian span.cm-math.cm-variable-2,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock span.cm-variable-2,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian span.cm-variable-2 {
  color: var(--cm-variable-2);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines span.cm-variable-3,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian span.cm-hmd-frontmatter.cm-variable-3,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian span.cm-templater-command.cm-variable-3,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian span.cm-math.cm-variable-3,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock span.cm-variable-3,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian span.cm-variable-3 {
  color: var(--cm-variable-3);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines .cm-type.cm-def,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.cm-type.cm-def,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.cm-type.cm-def,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.cm-type.cm-def,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock .cm-type.cm-def,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian .cm-type.cm-def {
  color: var(--cm-definition);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines .cm-callee,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.cm-callee,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.cm-callee,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.cm-callee,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock .cm-callee,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian .cm-callee {
  color: var(--cm-callee);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines .cm-operator,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.cm-operator,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.cm-operator,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.cm-operator,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock .cm-operator,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian .cm-operator {
  color: var(--cm-operator);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines .cm-qualifier,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.cm-qualifier,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.cm-qualifier,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.cm-qualifier,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock .cm-qualifier,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian .cm-qualifier {
  color: var(--cm-qualifier);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines .cm-tag,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.cm-tag,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.cm-tag,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.cm-tag,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock .cm-tag,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian .cm-tag {
  color: var(--cm-tag);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines .cm-tag.cm-bracket,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.cm-tag.cm-bracket,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.cm-tag.cm-bracket,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.cm-tag.cm-bracket,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock .cm-tag.cm-bracket,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian .cm-tag.cm-bracket {
  color: var(--cm-bracket);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines .cm-attribute,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.cm-attribute,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.cm-attribute,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.cm-attribute,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock .cm-attribute,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian .cm-attribute {
  color: var(--cm-attribute);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines .cm-comment,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.cm-comment,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.cm-comment,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.cm-comment,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock .cm-comment,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian .cm-comment {
  color: var(--cm-comment);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines .cm-comment.cm-attribute,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.cm-comment.cm-attribute,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.cm-comment.cm-attribute,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.cm-comment.cm-attribute,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock .cm-comment.cm-attribute,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian .cm-comment.cm-attribute {
  color: var(--cm-attribute-in-comment);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines .cm-comment.cm-tag,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.cm-comment.cm-tag,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.cm-comment.cm-tag,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.cm-comment.cm-tag,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock .cm-comment.cm-tag,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian .cm-comment.cm-tag {
  color: var(--cm-tag-in-comment);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines .cm-string,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.cm-string,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.cm-string,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.cm-string,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock .cm-string,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian .cm-string {
  color: var(--cm-string);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines .cm-string-2,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.cm-string-2,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.cm-string-2,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.cm-string-2,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock .cm-string-2,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian .cm-string-2 {
  color: var(--cm-string-2);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines .cm-meta,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.cm-meta,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.cm-meta,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.cm-meta,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock .cm-meta,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian .cm-meta {
  color: var(--cm-meta);
  /* background: var(--cm-background-color); */
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines .cm-builtin,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.cm-builtin,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.cm-builtin,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.cm-builtin,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock .cm-builtin,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian .cm-builtin {
  color: var(--cm-builtin);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines .cm-header,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.cm-header,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.cm-header,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.cm-header,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock .cm-header,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian .cm-header {
  color: var(--cm-header);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines .cm-hr,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.cm-hr,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.cm-hr,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.cm-hr,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock .cm-hr,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian .cm-hr {
  color: var(--cm-hr);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines .cm-link,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.cm-link,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.cm-link,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.cm-link,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock .cm-link,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian .cm-link {
  color: var(--cm-link);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines .cm-error,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.cm-error,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.cm-error,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.cm-error,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock .cm-error,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian .cm-error {
  color: white;
  background-color: var(--cm-error-bg);
}

body.unified-cm-highlighting[class*="theme-"]
  .CodeView
  .cm-s-obsidian
  .CodeMirror-lines
  .CodeMirror-activeline-background,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.CodeMirror-activeline-background,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.CodeMirror-activeline-background,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.CodeMirror-activeline-background,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock-bg.CodeMirror-activeline-background,
body.unified-cm-highlighting[class*="theme-"]
  .markdown-preview-view
  pre.cm-s-obsidian
  .CodeMirror-activeline-background {
  background: var(--cm-active-line-background-color);
}

body.unified-cm-highlighting[class*="theme-"] .CodeView .cm-s-obsidian .CodeMirror-lines .CodeMirror-matchingbracket,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-hmd-frontmatter.CodeMirror-matchingbracket,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-templater-command.CodeMirror-matchingbracket,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .cm-math.CodeMirror-matchingbracket,
body.unified-cm-highlighting[class*="theme-"] .cm-s-obsidian .HyperMD-codeblock .CodeMirror-matchingbracket,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre.cm-s-obsidian .CodeMirror-matchingbracket {
  text-decoration: underline;
  color: rgb(var(--cm-matching-bracket)) !important;
}

/* END CODE BLOCK EDITOR MODE SYNTAX HIGHLIGHTING[class*="theme-"] */

/* FALL BACK CODE BLOCK PREVIEW MODE SYNTAX HIGHLIGHTING */

body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre[class*="language-"] {
  /* material: palenight theme */
  background-color: var(--cm-background-color);
}

body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre code,
body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre code * {
  text-shadow: none;
  color: var(--cm-foreground-color);
}

body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre code span.keyword {
  color: var(--cm-keyword);
}

body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre code span.class-name {
  color: var(--cm-def);
}

body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre code span.class {
  color: var(--cm-qualifier);
}

body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre code span.function {
  color: var(--cm-def);
}

body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre code span.punctuation {
  color: var(--cm-foreground-color);
}

body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre code span.operator {
  color: var(--cm-operator);
  background: transparent;
}

body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre code span.entity {
  color: var(--cm-attribute);
}

body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre code span.parameter {
  color: var(--cm-property);
}

body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre code span.property {
  color: var(--cm-property);
}

body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre code span.important {
  color: var(--cm-error-bg);
}

body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre code span.attr-name {
  color: var(--cm-tag);
}

body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre code span.attr-value {
  color: var(--cm-string);
}

body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre code span.builtin {
  color: var(--cm-builtin);
}

body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre code span.string {
  color: var(--cm-string);
}

body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre code span.number {
  color: var(--cm-number);
}

body.fallback-highlighting[class*="theme-"] .markdown-preview-view pre code span.unit {
  color: var(--cm-number);
}

/* END FALL BACK CODE BLOCK PREVIEW MODE SYNTAX HIGHLIGHTING */

/* START Mathjax Preview */

.hmd-math-mathjax mjx-container[jax="CHTML"][display="true"] {
  margin: 0;
}

#math-preview.float-win {
  position: absolute;
  position: fixed;
  z-index: 3;
  background: var(--background-primary);
  background-image: linear-gradient(to bottom, var(--background-primary), var(--background-primary-alt));
  border-radius: 5px;
  overflow: hidden;
  box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
  max-width: 70%;
}

#math-preview.float-win-hidden {
  display: none;
}

#math-preview .float-win-close {
  position: absolute;
  right: 0;
  height: 100%;
  top: 0;
  color: #fff;
  border: 0;
  background-color: transparent;
  cursor: pointer;
  width: 28px;
  border: none !important;
  margin-right: 4px;
  padding: 0;
  vertical-align: middle;
}

#math-preview .float-win-close:hover {
  background-color: transparent !important;
}

#math-preview .float-win-title {
  position: relative;
  background: var(--text-accent);
  font-size: 0.87em;
  color: var(--background-primary);
  padding: 5px 15px;
  padding-right: 50px;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  cursor: move;
}

#math-preview .float-win-content {
  max-height: 80vh;
  overflow: auto;
  padding: 10px 20px;
}
#math-preview button.float-win-close:focus {
  box-shadow: none;
}
#math-preview .float-win-close .icon {
  display: inline-block;
  width: 1.5em;
  height: 1.5em;
  stroke-width: 0;
  color: var(--background-primary);
  stroke: currentColor;
  fill: currentColor;
  vertical-align: bottom;
}
/* END Mathjax preview */
 :root {
  --advanced-tables-helper-size: 28px;
}

.HyperMD-table-row span.cm-inline-code {
  font-size: 100%;
  padding: 0px;
}

.advanced-tables-buttons>div>.title {
  font-weight: var(--font-medium);
  font-size: var(--nav-item-size);
  color: var(--nav-item-color);
  text-decoration: underline;
}

[data-type="advanced-tables-toolbar"] .nav-buttons-container {
  column-gap: 0.2rem;
  margin: 0.2rem 0 0.2rem 0;
  justify-content: start;
}

[data-type="advanced-tables-toolbar"] .nav-buttons-container::before {
  min-width: 2.6rem;
  line-height: var(--advanced-tables-helper-size);
  font-size: var(--nav-item-size);
  font-weight: var(--nav-item-weight);
  color: var(--nav-item-color);
}

[data-type="advanced-tables-toolbar"] .nav-buttons-container>* {
  height: var(--advanced-tables-helper-size);
  line-height: var(--advanced-tables-helper-size);
}

[data-type="advanced-tables-toolbar"] .nav-buttons-container .nav-action-button {
  width: var(--advanced-tables-helper-size);
  height: var(--advanced-tables-helper-size);
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: var(--radius-s);
}

[data-type="advanced-tables-toolbar"] .nav-buttons-container .nav-action-button:hover {
  background-color: var(--nav-item-background-hover);
  color: var(--nav-item-color-hover);
  font-weight: var(--nav-item-weight-hover);
}

.advanced-tables-row-label {
  width: 50px;
}

.widget-icon {
  width: 20px;
  height: 20px;
  fill: var(--text-muted);
}

.widget-icon:hover {
  fill: var(--text-normal);
}

.advanced-tables-csv-export textarea {
  height: 200px;
  width: 100%;
}

.advanced-tables-donation {
  width: 70%;
  margin: 0 auto;
  text-align: center;
}

.advanced-tables-donate-button {
  margin: 10px;
} 
.pandoc-plugin-error {
    color: red;
}
  .empty.svelte-j2kqyp{color:var(--text-faint);text-align:center;margin-top:32px;font-style:italic}.checklist-plugin-main.svelte-j2kqyp{padding:initial;width:initial;height:initial;position:initial;overflow-y:initial;overflow-wrap:initial} .empty.svelte-rdace4.svelte-rdace4{color:var(--text-faint);text-align:center;margin-top:32px;font-style:italic}.container.svelte-rdace4.svelte-rdace4{height:32px;margin-bottom:12px;display:flex;flex-direction:row;gap:12px;align-items:center}.search.svelte-rdace4.svelte-rdace4{flex:1;background:var(--checklist-searchBackground);border:none;font-size:var(--checklist-contentFontSize);border-radius:var(--checklist-listItemBorderRadius);padding:0px 8px;color:var(--checklist-textColor);height:100%}.search.svelte-rdace4.svelte-rdace4:focus{box-shadow:0 0 0 2px var(--checklist-accentColor)}.settings-container.svelte-rdace4.svelte-rdace4{flex-shrink:1;display:flex;align-items:center;position:relative}.popover.svelte-rdace4.svelte-rdace4{position:absolute;top:32px;right:0px;width:300px;padding:12px;border-radius:var(--checklist-listItemBorderRadius);background:var(--checklist-searchBackground);box-shadow:0 2px 4px var(--background-modifier-cover);z-index:10}.section-title.svelte-rdace4.svelte-rdace4{font-weight:bold;margin-bottom:8px}section.svelte-rdace4.svelte-rdace4{margin-bottom:24px}.checkbox-item.svelte-rdace4 label.svelte-rdace4{gap:4px;display:flex;align-items:center;height:28px}.hash.svelte-rdace4.svelte-rdace4{color:var(--checklist-tagBaseColor)} .svg.svelte-9fjno5{width:var(--checklist-iconSize);height:var(--checklist-iconSize);transition:transform 150ms ease;cursor:pointer}.up.svelte-9fjno5{transform:rotate(180deg)}.down.svelte-9fjno5{transform:rotate(0deg)}.left.svelte-9fjno5{transform:rotate(90deg)}.right.svelte-9fjno5{transform:rotate(270deg)}.button.svelte-9fjno5{fill:var(--checklist-iconFill--accent);transition:fill 150ms ease}.button.svelte-9fjno5:hover{fill:var(--checklist-textColor)}.static.svelte-9fjno5{fill:var(--checklist-iconFill)} .container.svelte-pcimu8{--color-background-heading:transparent;--color-background-day:transparent;--color-background-weeknum:transparent;--color-background-weekend:transparent;--color-dot:var(--text-muted);--color-arrow:var(--text-muted);--color-button:var(--text-muted);--color-text-title:var(--text-normal);--color-text-heading:var(--text-muted);--color-text-day:var(--text-normal);--color-text-today:var(--interactive-accent);--color-text-weeknum:var(--text-muted)}.container.svelte-pcimu8{padding:0 8px}.container.is-mobile.svelte-pcimu8{padding:0}th.svelte-pcimu8{text-align:center}.weekend.svelte-pcimu8{background-color:var(--color-background-weekend)}.calendar.svelte-pcimu8{border-collapse:collapse;width:100%}th.svelte-pcimu8{background-color:var(--color-background-heading);color:var(--color-text-heading);font-size:0.6em;letter-spacing:1px;padding:4px;text-transform:uppercase} .nav.svelte-1vwr9dd.svelte-1vwr9dd{align-items:center;display:flex;margin:0.6em 0 1em;padding:0 8px;width:100%}.nav.is-mobile.svelte-1vwr9dd.svelte-1vwr9dd{padding:0}.title.svelte-1vwr9dd.svelte-1vwr9dd{color:var(--color-text-title);font-size:1.5em;margin:0}.is-mobile.svelte-1vwr9dd .title.svelte-1vwr9dd{font-size:1.3em}.month.svelte-1vwr9dd.svelte-1vwr9dd{font-weight:500;text-transform:capitalize}.year.svelte-1vwr9dd.svelte-1vwr9dd{color:var(--interactive-accent)}.right-nav.svelte-1vwr9dd.svelte-1vwr9dd{display:flex;justify-content:center;margin-left:auto}.reset-button.svelte-1vwr9dd.svelte-1vwr9dd{cursor:pointer;border-radius:4px;color:var(--text-muted);font-size:0.7em;font-weight:600;letter-spacing:1px;margin:0 4px;padding:0px 4px;text-transform:uppercase}.is-mobile.svelte-1vwr9dd .reset-button.svelte-1vwr9dd{display:none} .arrow.svelte-156w7na.svelte-156w7na{align-items:center;cursor:pointer;display:flex;justify-content:center;width:24px}.arrow.is-mobile.svelte-156w7na.svelte-156w7na{width:32px}.right.svelte-156w7na.svelte-156w7na{transform:rotate(180deg)}.arrow.svelte-156w7na svg.svelte-156w7na{color:var(--color-arrow);height:16px;width:16px} .day.svelte-q3wqg9{background-color:var(--color-background-day);border-radius:4px;color:var(--color-text-day);cursor:pointer;font-size:0.8em;height:100%;padding:4px;position:relative;text-align:center;transition:background-color 0.1s ease-in, color 0.1s ease-in;vertical-align:baseline}.day.svelte-q3wqg9:hover{background-color:var(--interactive-hover)}.day.active.svelte-q3wqg9:hover{background-color:var(--interactive-accent-hover)}.adjacent-month.svelte-q3wqg9{opacity:0.25}.today.svelte-q3wqg9{color:var(--color-text-today)}.day.svelte-q3wqg9:active,.active.svelte-q3wqg9,.active.today.svelte-q3wqg9{color:var(--text-on-accent);background-color:var(--interactive-accent)}.dot-container.svelte-q3wqg9{display:flex;flex-wrap:wrap;justify-content:center;line-height:6px;min-height:6px} .dot.svelte-1widvzq,.hollow.svelte-1widvzq{display:inline-block;height:6px;width:6px;margin:0 1px}.filled.svelte-1widvzq{fill:var(--color-dot)}.active.filled.svelte-1widvzq{fill:var(--text-on-accent)}.hollow.svelte-1widvzq{fill:none;stroke:var(--color-dot)}.active.hollow.svelte-1widvzq{fill:none;stroke:var(--text-on-accent)}undefined
</style>
    </head>
    <body>
<h1 data-heading="第一章 操作系统引论">第一章 操作系统引论</h1>
<h2 data-heading="1.1目标&amp;作用">1.1目标&amp;作用</h2>
<h3 data-heading="-----**操作系统定义**">-----<strong>操作系统定义</strong></h3>
<p>是指<mark>控制和管理</mark>整个计算机系统的硬件和软件<mark>资源</mark>，并合理地组织<mark>调度</mark>计算机的工作和资源的分配，以提供给用户和其他软件方便的接口和环境，它是计算机系统中<strong>最基本的系统软件</strong>。</p>
<ul>
<li>是系统最基本最核心的软件，属于系统软件</li>
<li>控制和管理整个计算机的硬件和软件资源</li>
<li>合理的组织、调度计算机的工作与资源的分配</li>
<li>为用户和其它软件提供方便的接口和环境</li>
</ul>
<img align="left" style="zoom: 50%;" alt="屏幕截图 2023-08-21 200923" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-21%20200923.png" referrerpolicy="no-referrer">
<h3 data-heading="----**操作系统目标**">----<strong>操作系统目标</strong></h3>
<ul>
<li>
<p>方便性</p>
</li>
<li>
<p>有效性</p>
<ul>
<li>提高系统资源利用率</li>
<li>提高系统的吞吐率</li>
</ul>
</li>
<li>
<p>可扩充性</p>
</li>
<li>
<p>开放性</p>
</li>
</ul>
<h3 data-heading="----**操作系统作用**">----<strong>操作系统作用</strong></h3>
<ul>
<li>作为用户与计算机硬件系统之间的接口</li>
</ul>
<p>​       <code>用户和操作系统通信的三种方法：命令方式，系统调用方式，图标-窗口方式</code></p>
<ul>
<li>
<p>作为计算机系统资源的管理者</p>
<p><mark><code>计算机系统资源：处理机，内存，I/O设备，文件（数据和程序）</code></mark></p>
</li>
<li>
<p>实现对计算机资源的抽象</p>
</li>
</ul>
<p>​		覆盖了软件，提供一个对硬件操作的抽象模型</p>
<h3 data-heading="----**推动操作系统发展的主要动力**">----<strong>推动操作系统发展的主要动力</strong></h3>
<ul>
<li>
<p>不断提高计算机资源利用率</p>
</li>
<li>
<p>方便用户</p>
</li>
</ul>
<p>  器件的不断更新换代</p>
<ul>
<li>
<p>计算机体系结构的不断发展</p>
</li>
<li>
<p>不断提出新的应用需求</p>
</li>
</ul>
<hr>
<h2 data-heading="1.2操作系统的基本特征">1.2操作系统的基本特征</h2>
<p>采用多道程序设计技术的操作系统：<mark><strong>并发性，共享性</strong>，虚拟性，异步性</mark></p>
<h3 data-heading="**并发性**"><strong>并发性</strong></h3>
<img align="left" style="zoom:50%;" alt="屏幕截图 2023-08-27 091038" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-27%20091038.png" referrerpolicy="no-referrer">
<p><strong>并行</strong>：指两个或多个事件在<strong>同一时刻</strong>同时发生。</p>
<p><strong>并发</strong>：指两个或多个事件在<strong>同一时间间隔内</strong>发生。这些事件<strong>宏观上是同时发生的，但微观上是交替发生的。</strong></p>
<p>​	1. 操作系统的并发性指计算机系统中在同一时间段内存在着多个运行着的程序，<strong>通过分时实现</strong></p>
<p>​	2. 针对内存中的程序分别建立一个<strong><mark>进程</mark></strong>，实现并发处理</p>
<p><strong>进程</strong>：系统中<strong><code>资源分配的基本单位</code></strong>，能够独立运行；多个进程之间可以进行并发执行和交换信息</p>
<p>PS:线程——系统中独立运行的基本单位</p>
<h3 data-heading="**共享性**"><strong>共享性</strong></h3>
<p><strong><code>资源复用/资源共享：系统中的资源可供内存中的多个并发执行的进程共同使用</code></strong></p>
<p>主要<strong>复用</strong>方式</p>
<blockquote>
<ul>
<li>互斥共享方式</li>
</ul>
<p> 一段时间内，只允许一个进程访问该资源（临界资源）</p>
<ul>
<li>同时访问方式</li>
</ul>
<p> 一段时间内，允许多个进程<code>“同时访问”</code>该资源</p>
</blockquote>
<ul>
<li>
<h3 data-heading="==并发和共享的关系（互为存在条件）=="><mark>并发和共享的关系（互为存在条件）</mark></h3>
</li>
</ul>
<blockquote>
<p>通过上述例子来看并发与共享的关系：</p>
<p>使用QQ发送文件A，同时使用微信发送文件B。</p>
<p>１、两个进程正在并发执行（并发性）</p>
<p>如果失去并发性，则系统中只有一个程序正在运行，则共享性失去存在的意义</p>
<p>２、需要共享地访问硬盘资源（共享性）</p>
<p>如果失去共享性，则QQ和微信不能同时访问硬盘资源，就无法实现同时发送文件，也就无法并发。</p>
</blockquote>
<h3 data-heading="**虚拟性**"><strong>虚拟性</strong></h3>
<blockquote>
<p><strong>虚拟</strong>：指把<strong>一个物理</strong>上的实体变为<strong>若干个逻辑</strong>上的对应物。物理实体（前者）是实际存在的，而逻辑上对应物（后者）是用户感受到的。</p>
<ul>
<li>
<p>虚拟处理器（CPU）：通过多道程序设计技术，采用让多道程序并发执行的方法，分时来使用一个CPU，实际物理上只有一个CPU，但是用户感觉到有多个CPU</p>
</li>
<li>
<p>虚拟存储器：从逻辑上扩充存储器容量，用户感觉到的但实际不存在的存储器</p>
</li>
<li>
<p>虚拟设备：将一台物理设备虚拟为逻辑上的多台设备，使多个用户在同一时间段内访问同一台设备，即同时共享，用户宏观上感觉是同时的，但实际上是微观交替访问同一台设备的</p>
</li>
</ul>
<p><strong>虚拟技术</strong></p>
<ul>
<li>时分复用技术：如处理器的分时共享</li>
<li>空分复用技术：如虚拟存储器</li>
<li>没有并发，就谈不上虚拟性</li>
</ul>
</blockquote>
<h3 data-heading="**异步性**"><strong>异步性</strong></h3>
<p><strong>异步</strong>： 指在多道程序环境下，允许多个程序并发执行，但由于资源有限，<strong>进程的执行不是一贯到底的</strong>，而是走走停停，以不可预知的速度向前推进，这就是进程的异步性。</p>
<p>因此针对不同进程：先后；执行时间；速度；何时申请资源.......全都是不可预知的，即：<strong>不做前提假设</strong></p>
<p>显然，如果失去了并发性，则系统只能串行地处理各个进程，每个进程地执行会一贯到底。只有系统拥有并发性，才有可能导致异步性。</p>
<p>没有并发和共享，就谈不上虚拟和异步，因此<mark><strong>并发和共享是操作系统的两个最基本的特征。</strong></mark></p>
<hr>
<h2 data-heading="1.3**操作系统的主要功能**">1.3<strong>操作系统的主要功能</strong></h2>
<p><strong>OS的主要目的：</strong> 提高系统资源的利用率</p>
<p><strong>OS的主要功能：</strong> 管理计算机系统中的资源</p>
<p><mark>处理机管理，存储器管理，设备管理，文件管理，方便的用户接口</mark></p>
<h3 data-heading="**处理机管理：**（以进程为单位）"><strong>处理机管理：</strong>（以进程为单位）</h3>
<p><strong><mark>进程控制，进程同步，进程通信，进程调度</mark></strong></p>
<h5 data-heading="**进程控制**"><strong>进程控制</strong></h5>
<pre><code>为作业创建进程，撤销（终止）已结束的进程，控制进程在运行状态中的转变
</code><button class="copy-code-button">复制</button></pre>
<h5 data-heading="**进程同步（PV）**"><strong>进程同步（PV）</strong></h5>
<p> <code>以进货商-仓库-客户为例，要杜绝“放满”，“取空”</code></p>
<blockquote>
<img align="left" style="zoom:50%;" alt="屏幕截图 2023-08-27 155131" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-27%20155131.png" referrerpolicy="no-referrer">
<p>方式：互斥方式（访问临界资源时），同步方式（合作完成任务的进程间）</p>
</blockquote>
<h5 data-heading="**进程通信**"><strong>进程通信</strong></h5>
<blockquote>
<p><code>原因：一组相互合作的进程完成一个共同的任务时，需要交换信息</code></p>
<p>如：输入进程，计算进程，打印进程</p>
</blockquote>
<h5 data-heading="**进程调度**"><strong>进程调度</strong></h5>
<blockquote>
<p>分类：作业调度，进程调度</p>
<ol>
<li>
<p>作业调度：从外存调入内存</p>
</li>
<li>
<p>进程调度：从内存中的进程就绪队列中选一个，分配处理机（执行）</p>
</li>
</ol>
</blockquote>
<h3 data-heading="存储器管理">存储器管理</h3>
<p><mark>内存分配，内存保护，地址映射，内存扩充</mark></p>
<ul>
<li>
<h5 data-heading="内存分配">内存分配</h5>
</li>
</ul>
<p>​	<strong><code>为（运行中）程序（再）分配内存空间，并提高存储器的利用率</code></strong></p>
<p>​	静态/动态分配方式（数组/链表）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     </p>
<ul>
<li>
<h5 data-heading="内存保护">内存保护</h5>
</li>
</ul>
<p>​	<strong><code>用户程序互不干扰，不允许用户程序访问操作系统的程序和数据</code></strong></p>
<p>​	避免空间和资源上“越界”：设立<strong>界限寄存器</strong>，存放正在执行程序的上下界</p>
<p>​	<img align="left" style="zoom:50%;" alt="屏幕截图 2023-08-27 160720" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-27%20160720.png" referrerpolicy="no-referrer"></p>
<ul>
<li>
<h5 data-heading="**地址映射**"><strong>地址映射</strong></h5>
</li>
</ul>
<p><code>逻辑地址/相对地址——&gt;内存中的物理地址</code>（硬件支持下完成）</p>
<img align="left" style="zoom:50%;" alt="屏幕截图 2023-08-27 161303" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-27%20161303.png" referrerpolicy="no-referrer">
<ul>
<li>
<h5 data-heading="**内存扩充**"><strong>内存扩充</strong></h5>
</li>
</ul>
<p>​	虚拟存储技术[[]]</p>
<p>​	请求调入功能（磁盘-&gt;内存），置换功能（内存-&gt;磁盘，腾出空间）</p>
<pre class="language-none" tabindex="0"><code class="language-延伸/联想 language-none is-loaded">置换算法不好引发的后果：抖动&lt;频繁地进出内存&gt;
即将较为重要的部分“置换”出内存
虚拟存储器：外存借给内存空间——为了空间
如果内存空间借给外存——为了速度
</code><button class="copy-code-button">复制</button></pre>
<h3 data-heading="设备管理">设备管理</h3>
<p><mark>缓冲管理，设备分配，设备处理</mark></p>
<ul>
<li>
<h5 data-heading="**缓冲管理**"><strong>缓冲管理</strong></h5>
</li>
</ul>
<p>​	<strong>`<code>解决CPU与I/O之间速度不匹配的问题——CPU利用率，系统吞吐量</code>·</strong></p>
<p>​	缓冲区机制（<code>由OS缓冲管理机制管理</code>）：单缓冲区，双缓冲区，循环缓冲区（circle）</p>
<ul>
<li>
<h5 data-heading="**设备分配**"><strong>设备分配</strong></h5>
</li>
</ul>
<p>​	根据用户请求,分配I/O设备及相应的控制器和通道</p>
<ul>
<li>
<h5 data-heading="**设备处理**"><strong>设备处理</strong></h5>
</li>
</ul>
<p>​	<code>用于实现CPU与设备控制器之间的通信</code></p>
<ul>
<li>
<h5 data-heading="**设备独立性和虚拟设备**"><strong>设备独立性和虚拟设备</strong></h5>
</li>
</ul>
<p>​	1. <strong>应用程序独立于物理设备</strong>,使得用户编制的程序与实际使用的物理设备无关。</p>
<p>​		<strong>即：</strong>编写代码时，写明操作和需求，不写交给谁做（不涉及物理设备）</p>
<p>​	2.<strong>虚拟设备：</strong>物理设备——&gt;能”同时“供多个进程共享的设备</p>
<h3 data-heading="**文件管理**"><strong>文件管理</strong></h3>
<p><mark>文件存储空间的管理，目录管理，文件的读/写管理和保护</mark></p>
<h3 data-heading="友好的用户接口">友好的用户接口</h3>
<p><mark>用户接口，程序接口</mark></p>
<h3 data-heading="现代操作系统的新功能">现代操作系统的新功能</h3>
<p><mark>系统安全，网络的功能和服务，支持多媒体</mark></p>
<hr>
<h2 data-heading="1.4操作系统的发展过程">1.4操作系统的发展过程</h2>
<blockquote>
<p>1.硬件不断发展</p>
<p>2.系统资源利用率，系统吞吐率需要提高</p>
<p>3.用户对人-机交互的需求</p>
</blockquote>
<h3 data-heading="1. 未配置操作系统的计算机系统">1. 未配置操作系统的计算机系统</h3>
<ul>
<li><strong>手工操作阶段</strong></li>
</ul>
<p>​		<code>机器语言，输入输出——纸带</code></p>
<p>​		缺点：用户独占全机，CPU等待人工操作，人机速度矛盾导致资源利用率极低</p>
<ul>
<li><strong>脱机输入/输出方式</strong></li>
</ul>
<p>​		<code>外围机控制I/O设备（而非主机直接控制）</code></p>
<p>​		进步点：减少了CPU的空闲时间；提高了I/O速度</p>
<p>​		缺点：用户独占全机（人机交互性差），计算机处理能力（上升）与手工操作（低效）的矛盾</p>
<h3 data-heading="2. **批处理系统**">2. <strong>批处理系统</strong></h3>
<p><strong><code>批处理技术：计算机系统对一批作业自动进行处理的一种技术</code></strong></p>
<img align="left" style="zoom:67%;" alt="屏幕截图 2023-08-27 090045" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-27%20090045.png" referrerpolicy="no-referrer">
<ul>
<li>
<p><strong>批处理阶段 — 单道批处理系统</strong></p>
<img align="left" style="zoom:50%;" alt="屏幕截图 2023-08-21 205930" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-21%20205930.png" referrerpolicy="no-referrer">
</li>
</ul>
<p>​		</p>
<p><strong><mark>特征：自动性，顺序性，单道性</mark></strong></p>
<p>​     <code>单道性:内存中最多只有一道程序在运行(计算时：CPU工作，外设空闲；I/O：外设工作，CPU空闲)</code></p>
<p>​		主要优点： 缓解了一定程度的人机速度矛盾，资源利用率有所提升。</p>
<p>​		主要缺点： 内存中仅能有一道程序运行，只有该程序运行结束之后才能调入下一道程序。CPU有大量的时间是在空闲等待I/O完成。资源利用率依然很低。</p>
<ul>
<li>
<p><strong>批处理阶段 — 多道批处理系统</strong></p>
<p>每次往内存中输入多个作业，使它们共享CPU和系统中的各种资源。</p>
<img align="left" style="zoom:50%;" alt="屏幕截图 2023-08-21 210002" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-21%20210002.png" referrerpolicy="no-referrer">
</li>
</ul>
<p>​		</p>
<p><mark><strong>特征：多道性，无序性，调度性，宏观并发微观串行**</strong></mark></p>
<pre class="language-none" tabindex="0"><code class="language-无 language-none is-loaded">无序性：作业的完成顺序与作业进入内存的顺序无关系
调度性：1.作业调度,从后备队列进入内存     2.进程调度,分配处理机运行。
</code><button class="copy-code-button">复制</button></pre>
<p>​		主要优点： 多道程序并发执行，共享计算机资源。<strong>资源利用率大幅提升</strong>，CPU和其他资源保持“忙碌”状态，<strong>系统吞吐量增大</strong>。</p>
<p>​		主要缺点： 用户响应时间长，无交互功能（不利调试和修改），作业平均周转时间长(需排队处 理)</p>
<h3 data-heading="**4. 分时操作系统**"><strong>4. 分时操作系统</strong></h3>
<p>区别于多道批处理的<code>多道程序并行</code>，分时可理解为 <code>多个用户 / 终端的并行</code>	(针对交互性)</p>
<p>用户需求：<strong>人机交互，共享主机，便于用户上机</strong></p>
<p><code>计算机以时间片为单位轮流为各个用户/作业服务，各个用户可通过终端与计算机进行交互。</code></p>
<p>多个用户共享主机中的资源</p>
<p><strong><mark>特点：多路性，独立性，及时性，交互性、</mark></strong></p>
<pre class="language-none" tabindex="0"><code class="language-备注 language-none is-loaded">分时操作系统的及时性
用户的请求能在很短的时间内获得响应，很短的时间——根据人所能接受的等待时间而定
</code><button class="copy-code-button">复制</button></pre>
<p><strong>关键问题：及时接受；及时处理</strong></p>
<p>​	    <strong>主要优点</strong>： 用户请求可以被即时响应，解决了人机交互问题。允许多个用户同时使用一台计算机，并且用户对计算机的操作相互独立，感受不到别人的存在。</p>
<p>​		<strong>主要缺点</strong>： 不能优先处理一些紧急任务。操作系统对各个用户/作业都是完全公平的，循环地为每个用户/作业服务一个时间片，不区分任务的紧急性。</p>
<h3 data-heading="**5. 实时操作系统**"><strong>5. 实时操作系统</strong></h3>
<p>实时：表示“及时”<br>
实时系统能够及时的响应、处理外部事件，并控制所有的实时任务协调一致的运行</p>
<p><code>在实时操作系统的控制下，计算机系统接收到外部信号后及时进行处理，并且要在严格的时限内处理完事件。实时操作系统的主要特点是及时性和可靠性。</code></p>
<p><strong><mark>特点：多路性，独立性，及时性，可靠性</mark></strong></p>
<pre class="language-none" tabindex="0"><code class="language-备注 language-none is-loaded">实时操作系统的及时性
由控制对象所要求的截止时间来确定
</code><button class="copy-code-button">复制</button></pre>
<p>实时任务的<strong>“截止时间”：</strong></p>
<ul>
<li>开始截止时间：最晚开始时间</li>
<li>完成截止时间：最晚完成时间</li>
</ul>
<p>​		主要优点： 能够优先响应一些紧急任务，某些紧急任务不需时间片排队。</p>
<ul>
<li><strong>硬实时任务</strong>：必须在绝对严格的规定时间内完成处理（导弹系统）</li>
<li><strong>软实时任务</strong>：能接受偶尔违反时间规定（12306火车票）</li>
</ul>
<h3 data-heading="**6. 其他操作系统**"><strong>6. 其他操作系统</strong></h3>
<ul>
<li>网络操作系统</li>
</ul>
<p>工作方式：把计算机网络中的各台计算机有机的结合起来，提供统一、经济而有效的使用各台计算机的方法、实现各台计算机之间的数据互相传送</p>
<p>特点：有主从关系、网络中资源共亨、网络中的计算机通过协议通信</p>
<ul>
<li>分布式操作系统</li>
</ul>
<p>工作方式︰系统中的各计算机相互协同并行完成同一任务</p>
<p>特征</p>
<p>系统中任意两台计算机通过通信方式交换信息</p>
<p>系统中的计算机都具有同等地位，无主从关系</p>
<p>每台计算机上的资源为所有用户共享</p>
<p>系统中的任意台计算机都可以构成一个子系统，并且还能重构</p>
<p>任何工作都可以分布在几台计算机上、由他们并行工作、协同完成</p>
<p>特点：分布性和并行性</p>
<ul>
<li>嵌入式操作系统</li>
</ul>
<p>固话在硬件里面的系统、比如手机、路由器等</p>
<p>特点</p>
<p>完成某一项特定的功能、不具有通用性</p>
<p>广泛用于文字处理、电子表格、游戏中等个人计算机操作系统</p>
<p>常见的有Windows、Linux、Macintosh等</p>
<table>
<thead>
<tr>
<th>操作系统</th>
<th>优势/进步点</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr>
<td>人工操作（无操作系统）</td>
<td></td>
<td>人机矛盾，CPU和I/O设备速度不匹配</td>
</tr>
<tr>
<td>单道批处理系统</td>
<td>系统资源利用率，系统吞吐率提高</td>
<td>自动性，顺序性，单道性</td>
</tr>
<tr>
<td>多道批处理系统</td>
<td>系统资源利用率，系统吞吐率提高（无交互，周转慢）</td>
<td>无序性，多道性，调度性，宏观并行微观串行</td>
</tr>
<tr>
<td>分时操作系统</td>
<td>多个用户共享主机，人机交互</td>
<td>多路性，独立性，及时性，交互性</td>
</tr>
<tr>
<td>实时操作系统</td>
<td>可靠性</td>
<td>多路性，独立性，及时性，可靠性</td>
</tr>
</tbody>
</table>
<h1 data-heading="第二章 进程和线程">第二章 进程和线程</h1>
<h2 data-heading="2.1 前驱图和程序执行">2.1 前驱图和程序执行</h2>
<p>描述程序顺序执行和并行——前驱图</p>
<blockquote>
<p>前驱图是一个有向不循环图，记为DAG</p>
<p>前驱图的结点用于描述一段程序或进程，语句，有向边-&gt;则表示两个节点之间存在的前驱关系</p>
</blockquote>
<ul>
<li>
<h4 data-heading="**顺序执行**"><strong>顺序执行</strong></h4>
</li>
</ul>
<p><mark>特点：顺序性，封闭性，可再现性</mark></p>
<pre class="language-none" tabindex="0"><code class="language-解释 language-none is-loaded">封闭性：系统资源被“封闭”，即被运行中的程序独占
可再现性：只要顺序执行的初始条件与环境相同，程序所得结果也相同（可再现）
</code><button class="copy-code-button">复制</button></pre>
<pre class="language-none" tabindex="0"><code class="language-例子 language-none is-loaded">S1: a=x+y;
S2: b=a-5;
S3: c=b+1;
</code><button class="copy-code-button">复制</button></pre>
<img style="zoom:80%;" alt="屏幕截图 2023-08-30 143902" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-30%20143902.png" referrerpolicy="no-referrer">
<ul>
<li>
<h4 data-heading="**并行**"><strong>并行</strong></h4>
</li>
</ul>
<p><mark>特点：间断性，失去封闭性，不可再现性</mark></p>
<h4 data-heading="牢记：并行 <=> 谁先开始不知道，谁中间停止不清楚">牢记：并行 &lt;=&gt; 谁先开始不知道，谁中间停止不清楚</h4>
<img align="left" style="zoom:50%;" alt="屏幕截图 2023-08-30 144417" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-30%20144417.png" referrerpolicy="no-referrer">
<p>注意：不能假设，不能假设，不能假设（如S1先S2后）</p>
<p><strong>限制条件（√）</strong>：如S3不能先于S1,S2执行；S1和S2执行后，S3可以执行。</p>
<h4 data-heading="关于不可再现性：">关于不可再现性：</h4>
<blockquote>
<p>任何程序在执行时都会被分为几步，几个程序并行时，如果访问了相同的资源，可能导致不同结果：</p>
<img align="left" style="zoom:50%;" alt="屏幕截图 2023-08-30 144748" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-30%20144748.png" referrerpolicy="no-referrer">
</blockquote>
<blockquote>
<p><strong>如何解决这一问题？</strong><br>
——可交叉变量仅有 读变量</p>
</blockquote>
<blockquote>
<img align="left" style="zoom:50%;" alt="屏幕截图 2023-08-30 144838" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-30%20144838.png" referrerpolicy="no-referrer">
</blockquote>
<h2 data-heading="2.2 进程的描述">2.2 进程的描述</h2>
<p><strong>进程是程序的一次执行</strong></p>
<p>严格定义：<strong>进程是进程实体的运行过程,是系统进行资源分配和调度的一个独立单位</strong></p>
<pre class="language-none" tabindex="0"><code class="language-解释 language-none is-loaded">QQ为一个程序，多次执行可产生多个进程：登录，个人信息，聊天
</code><button class="copy-code-button">复制</button></pre>
<h3 data-heading="进程的组成">进程的组成</h3>
<p><strong>进程</strong>（进程实体）由<strong>程序段、数据段、PCB</strong>三部分组成。</p>
<ul>
<li><strong>数据段</strong>：程序运行时使用、产生的运算数据。如全局变量</li>
<li><strong>程序段</strong>：程序代码即存放在此</li>
<li><strong>PCB</strong>：<mark><strong>PCB是进程存在的唯一标志</strong></mark>，操作系统通过PCB来管理进程，因此PCB中应该包含操作系统对其进行管理所需的各种信息。</li>
</ul>
<h3 data-heading="进程的特点">进程的特点</h3>
<ul>
<li>动态性，并发性，独立性，异步性，结构性</li>
</ul>
<h3 data-heading="**进程的基本状态及操作**"><strong>进程的基本状态及操作</strong></h3>
<ul>
<li>
<h5 data-heading="**就绪态，执行态，阻塞态**"><strong>就绪态，执行态，阻塞态</strong></h5>
</li>
</ul>
<pre class="language-none" tabindex="0"><code class="language-详细 language-none is-loaded">1)就绪(Ready)状态 
进程已获得除处理机外的所需资源,等待分配处理机资源;只要分配CPU就可执行。
一个系统中多个处于就绪状态的进程排成就绪队列。
(2)执行(Running)状态
处于就绪状态的进程一旦获得了处理机,就可以运行,进程状态也就处于执行状态。
处于此状态的进程的数目小于等于CPU的数目。
(3)阻塞(Blocked)状态(“等待”或“睡眠”) 
由于进程等待某种事件(如I/O操作或进程同步),在事件发生之前无法继续执行。该事件发生前即使把处理机分配给该进程,也无法运行。如:请求I/O操作,申请缓冲空间等
通常阻塞进程也排成若干队列（比如按照等待的资源来分）
</code><button class="copy-code-button">复制</button></pre>
<img align="left" style="zoom:50%;" alt="屏幕截图 2023-08-30 150144" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-30%20150144.png" referrerpolicy="no-referrer">
<p><strong><mark>注： 阻塞态不能直接到执行态</mark></strong></p>
<blockquote>
<ul>
<li>火车道损坏： 执行态-&gt;阻塞态</li>
<li>火车道修好，火车仍然要排队通过：阻塞态-&gt;就绪态</li>
</ul>
</blockquote>
<ul>
<li>
<h5 data-heading="**创建状态，终止状态**"><strong>创建状态，终止状态</strong></h5>
</li>
</ul>
<pre class="language-none" tabindex="0"><code class="language-详细 language-none is-loaded">1）新(创建)状态： 
当一个新进程刚刚建立,还未将其放入就绪队列时的状态,称为新（创建）状态。 
获得所需资源，且PCB的初始化工作完成时，由创建状态——&gt;就绪状态
2）终止状态：
当一个进程已经正常结束或异常结束,操作系统已将其从系统队列中移出,但尚未撤消,这时称为终止状态。 

</code><button class="copy-code-button">复制</button></pre>
<img align="left" style="zoom:50%;" alt="屏幕截图 2023-08-30 150859" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-30%20150859.png" referrerpolicy="no-referrer">
<ul>
<li>
<h5 data-heading="**挂起操作，激活操作**"><strong>挂起操作，激活操作</strong></h5>
</li>
</ul>
<pre class="language-none" tabindex="0"><code class="language-详细 language-none is-loaded">引入挂起的原因 
(1)终端用户的请求（需要）
当终端用户在自己的程序运行期间发现有可疑问题时,希望暂时将自己的程序静止下来。
(2)父进程请求
父进程需要考查和修改子进程。
(3)操作系统的需要
如检查运行中的资源使用情况。
(4)对换的需要
缓和内存紧张,将阻塞进程换到外存上,有别于阻塞状态。
(5)负荷调节的需要
在实时系统中为了调整工作负荷可将不重要的进程挂起。

</code><button class="copy-code-button">复制</button></pre>
<img align="left" style="zoom:50%;" alt="屏幕截图 2023-08-30 151331" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-30%20151331.png" referrerpolicy="no-referrer">
<p>PS:<strong>注意“挂起”和“阻塞”的区别</strong></p>
<blockquote>
<p>两种就绪挂起 状态都是暂时不能获得CPU的服务，但<strong>挂起态</strong>是将进程映像<strong>调到外存</strong>去了，而<strong>阻塞态</strong>下进程映像还<strong>在内存</strong>中。</p>
<p>有的操作系统会把就绪挂起、阻塞挂起分为两个挂起队列，甚至会根据阻塞原因不同再把阻塞挂起进程进一步细分为阻塞挂起 多个队列。</p>
</blockquote>
<h3 data-heading="进程控制块">进程控制块</h3>
<p><mark><strong>PCB是进程存在的唯一标志</strong></mark></p>
<p>组成：进程标识符，处理机状态，进程调度信息，进程控制信息</p>
<p>控制方式：线性方式，链接方式，索引方式</p>
<hr>
<h2 data-heading="2.3 进程控制">2.3 进程控制</h2>
<p><strong>进程控制</strong>的主要功能是对系统中的所有进程实施有效的管理，它具有创建新进程、撤销已有进程、<strong>实现进程状态转换</strong>等功能。</p>
<p>如何实现进程控制？<br>
——用<mark><strong>原语</strong></mark>实现进程控制。原语的特点是执行期间不允许中断，只能一气呵成。</p>
<pre><code>这种不可被中断的操作即原子操作。
原语采用“关中断指令”和“开中断指令”实现
显然，关/开中断指令的权限非常大，必然只允许在核心态下执行的特权指令。
</code><button class="copy-code-button">复制</button></pre>
<pre class="language-none" tabindex="0"><code class="language-原语 language-none is-loaded">阻塞原语：block
唤醒原语：wakeup //block和wakeup成对使用
挂起原语：susupend
激活原语：active

</code><button class="copy-code-button">复制</button></pre>
<h3 data-heading="**执行机状态**"><strong>执行机状态</strong></h3>
<ul>
<li>系统态（管态） 一切指令和寄存器，存储区</li>
</ul>
<p>​	<code>传统的OS在系统态运行</code></p>
<ul>
<li>用户态（目态） </li>
</ul>
<hr>
<h2 data-heading="==2.4 <font color = &quot;red&quot;>进程同步（PV大题)</font>=="><mark>2.4 <font color="red">进程同步（PV大题)</font></mark></h2>
<p>引入：进程并行时-&gt;异步性，不可再现性，导致 不正确</p>
<p>如+1 -1操作（各三步）</p>
<h3 data-heading="基本概念">基本概念</h3>
<h4 data-heading="两种形式的制约关系">两种形式的制约关系</h4>
<blockquote>
<ul>
<li>间接相互制约关系<strong>(互斥)</strong></li>
</ul>
<pre><code>同处于一个系统中的进程必然共享某种资源,如CPU、I/O设备等,间接相互制约即源于资源共享。如A、B共享打印机,若A申请打印时,打印机已分配给B,则A只能阻塞,等B释放后再改为就绪,又称为“互斥”。
</code><button class="copy-code-button">复制</button></pre>
<ul>
<li>直接相互制约关系<strong>（同步</strong>）</li>
</ul>
<pre><code>这种制约源于进程之间的合作关系。如进程A向B提供数据,当输入缓冲空时,B不能得到数据而阻塞;反之当缓冲满时,A无法写入而阻塞,又称为“同步”。
</code><button class="copy-code-button">复制</button></pre>
<p><strong>举例说明</strong>：生产者-消费者问题（假定1-1-1）</p>
<p>互斥关系：<br>
生产者和消费者不能同时访问仓库</p>
<p>同步关系：<br>
生产者访问<code>仓库空间资源</code>放入资源后，要“告知”消费者；<br>
消费者访问<code>货物资源</code>取走资源后，要“告知”生产者</p>
</blockquote>
<h4 data-heading="临界资源">临界资源</h4>
<blockquote>
<p><strong>定义</strong>:在一段时间内只允许一个进程访问的资源。</p>
<p><strong>例如</strong>:打印机,磁带机,卡片输入机,变量,表格,数据,指针、数组等。</p>
</blockquote>
<h4 data-heading="临界区">临界区</h4>
<blockquote>
<pre><code>不论是硬件临界资源还是软件临界资源,多个进程必须互斥地对它进行访问
</code><button class="copy-code-button">复制</button></pre>
<p>在每个进程中访问临界资源的那段代码称为临界区<br>
在临界区之前执行的这段代码称为进入区(entry section)<br>
在临界区后面也要加上一段代码,用于将临界区被访问的资源恢复为未被访问的标志,称为退出区(exit section)</p>
<img style="zoom:50%;" alt="屏幕截图 2023-08-30 163616" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-30%20163616.png" referrerpolicy="no-referrer">
</blockquote>
<h4 data-heading="同步机制遵循的规则">同步机制遵循的规则</h4>
<ul>
<li>空闲让进，忙则等待，有限等待，<mark>让权等待</mark></li>
</ul>
<h3 data-heading="信号量机制">信号量机制</h3>
<p>老师-教室/学生<br>
访问：<br>
1.观察教室是否上锁<br>
2.若未上锁，进入教室给学生上课，给教室上锁<br>
3.若上锁，则无法进入教室给学生上课<br>
4.若到达下课时间，离开教室，将教室的锁打开<br>
PS：观察教室是否上锁这一作业，也是由处理机执行（即若上锁时，某个老师一直观察，会消耗CPU资源-&gt;进入等待队列 ）</p>
<p><code>信号量，理解为一种数据结构即可</code></p>
<h5 data-heading="==**总结要点**==——**利用信号量实现进程同步：**"><mark><strong>总结要点</strong></mark>——<strong>利用信号量实现进程同步：</strong></h5>
<ul>
<li>信号量只有两种操作，赋初值和P,V操作</li>
<li>P（mutex）和V（mutex）成对出现（有时可能距离远）</li>
<li>尽量先执行同步P，后执行异步P</li>
<li>某些问题中，互斥问题存在，但不一定需要单独设置互斥信号量解决（有时会被同步信号量提前解决）
<ul>
<li>如生产者-消费者（1-n-1）</li>
<li>判断：考虑互斥的信号量有几种状态，分别指向可/不可执行</li>
</ul>
</li>
</ul>
<h4 data-heading="——整形信号量">——整形信号量</h4>
<p>定义整型信号量为一个用于表示资源数目的整数量S，S仅能通过以下两个<strong>原子操作</strong>（+1;-1）访问：</p>
<ul>
<li>P操作: wait(S)</li>
<li>V操作: signal(S)</li>
</ul>
<p><mark>问题：违反让权等待</mark></p>
<pre class="language-none" tabindex="0"><code class="language-P,V language-none is-loaded">wait(S){
	while(S&lt;=0);   //S非正数，啥也不做
	S--;		  //S=1,门没锁，进入房间，锁上门（S=0）
}//在进入区中

signal(S)
{
	S++；		//使用完毕，退出房间，把锁打开
}//在退出区中
</code><button class="copy-code-button">复制</button></pre>
<p>PS:怎么找临界区？<br>
——临界区代码访问了临界资源，<strong>访问=读/写</strong></p>
<p><strong>使用场景：</strong>一般不使用整形信号量，但当涉及到计数（加减）时，可以设置为整形信号量（读者-写者问题）</p>
<p><strong>但是要注意</strong>，当访问这个信号量时，它同时相当于临界资源，因此要根据实际情况设置相应的互斥信号量（）</p>
<h4 data-heading="——记录信号量">——记录信号量</h4>
<p>增加一个进程链表指针list,用于链接所有的等待进程</p>
<pre class="language-none" tabindex="0"><code class="language-数据结构 language-none is-loaded">typedef struct{
	int value;
	struct process_control_block *list;
	}semaphore;
</code><button class="copy-code-button">复制</button></pre>
<pre class="language-none" tabindex="0"><code class="language-P,V language-none is-loaded">wait(semaphore *S){
	(*S).value--;
	if((*S).value &lt; 0) block((*S).list);
	}
	
signal(semaphore *S){
	(*S).value++;
	if((*S).value &lt;= 0) wakeup((*S).list);
	}
</code><button class="copy-code-button">复制</button></pre>
<ul>
<li>S &gt;= 0时，有S个空闲的资源</li>
<li>S &lt;=  0时，有|S|个等待的进程</li>
</ul>
<p><mark><strong>当S的初值为1时：互斥信号量</strong></mark></p>
<p><mark>当进程被block：<strong>执行态-&gt;阻塞态</strong></mark></p>
<h4 data-heading="——AND型信号量">——AND型信号量</h4>
<p>针对死锁状态</p>
<p><strong>一个进程需要多个共享资源</strong>才能执行任务，进程A和进程B都需要临界资源D,E,交替地执行wait操作</p>
<p>出现拿着资源，想要另一个资源的情况；</p>
<p>解决方案：”一次性交付“</p>
<pre><code>SP:Swait(S1, S2, …, Sn)
    if S1≥1 and … and Sn≥1 then { 每个资源都可用}
          for i: =1 to n do
                Si:=Si-1; {分配所有资源}
          endfor
    else {否则,将进程放到等待资源Si的队列中}
        “阻塞”(去第1个Si&lt;1的“等待Si”的阻塞队列中排队,并置它的程序计数器于SP操作的起始点) 
    endif

SV:Ssignal(S1, S2, …, Sn)
      for i: =1 to n do
            Si=Si+1; {释放所有资源}
      “唤醒”(所有“等待Si”的阻塞进程,置为“就绪”状态,移到就绪队列中)
     endfor; 
</code><button class="copy-code-button">复制</button></pre>
<h4 data-heading="——信号集信号量">——信号集信号量</h4>
<p>一次一次访问太慢（N次wait(S)）——&gt;一次申请多个(Swait() )</p>
<pre><code>SP:Swait(S1, t1, d1, …, Sn, tn, dn)
    if S1≥t1 and … and Sn≥tn then
          for i:=1 to n do
               Si:=Si-di; {一次分配d个资源}
          endfor
   else
         “阻塞”(去第1个Si&lt;ti的“等待Si”的阻塞队列中排队) 
   endif

SV:Ssignal(S1, d1, …, Sn, dn)
         for i:=1 to n do
              Si :=Si+di; {释放所有资源}
        “唤醒”(所有“等待Si”的阻塞进程,置为“就绪”状态,移到就绪队列中)
        endfor; 

</code><button class="copy-code-button">复制</button></pre>
<img align="left" style="zoom:50%;" alt="image-20230903181923523" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230903181923523.png" referrerpolicy="no-referrer">
<h3 data-heading="信号量的应用">信号量的应用</h3>
<h4 data-heading="实现互斥关系">实现互斥关系</h4>
<p>目的：使多个进程互斥地访问某临界资源</p>
<p>具体实现：为该资源设置一个<strong>互斥信号量Mutex，设其初值为1</strong></p>
<p>临界区前P，后V</p>
<img style="zoom:67%;" alt="image-20230903182023750" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230903182023750.png" referrerpolicy="no-referrer">
<pre class="language-c" tabindex="0"><code class="language-c is-loaded">semaphore mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token function">P1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                     
<span class="token punctuation">{</span>
    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    临界区；
    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">P2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    临界区；
    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//注：Pascal语言中的parbegin-parend意为P1和P2是并发执行的两个程序</span>
<span class="token comment">//并发执行：谁先谁后不清楚，中间谁停谁完成不知道</span>
<span class="token comment">//需要互斥地访问-》由信号量解决</span>
<span class="token comment">//切记：先同步后互斥，但是取完立刻放，V()</span>
</code><button class="copy-code-button">复制</button></pre>
<h4 data-heading="实现前趋关系">实现前趋关系</h4>
<img align="left" style="zoom:67%;" alt="image-20230903182647449" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230903182647449-1693736821667-1.png" referrerpolicy="no-referrer">
<p>限制条件：</p>
<p>1.S2不能先于S1执行(<strong>block操作——P()</strong>)<br>
2.S1执行后S2可以执行(S1执行完后要<strong>告知</strong>S2——<strong>V(),且是同样的信号量</strong>)</p>
<pre><code>semophore a = 0;
P1()
{
	S1;  //	S1无限制，随时可以开始
	V(a);//告知S2，S1已经完成(a++ -&gt; a=1,wakeup)
}

P2()
{
	P(a)//S2不能先于S1执行(初始a=0,a-- -&gt; a=-1,block;a=1,a-- -&gt; a=0,执行)
	S2；
}
</code><button class="copy-code-button">复制</button></pre>
<p>针对下图：<mark><strong>每条边对应一个信号量</strong></mark></p>
<img align="left" style="zoom:67%;" alt="image-20230903183431516" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230903183431516.png" referrerpolicy="no-referrer">
<h2 data-heading="2.5 经典进程的同步问题">2.5 经典进程的同步问题</h2>
<h3 data-heading="——生产者-消费者问题">——生产者-消费者问题</h3>
<p><strong>问题描述</strong></p>
<p>系统中有一组生产者进程和一组消费者进程，生产者进程每次生产一个产品放入缓冲区，消费者进程每次从缓冲区中取出一个产品并使用。（注：这里的“产品”理解为某种数据）</p>
<p>生产者、消费者共享一个初始为空、大小为n的缓冲区。</p>
<ul>
<li>只有缓冲区没满时，生产者才能把产品放入缓冲区，否则必须等待。（同步关系）</li>
<li>只有缓冲区不空时，消费者才能从中取出产品，否则必须等待。（同步关系）</li>
<li>缓冲区是临界资源，各进程必须互斥地访问。(互斥关系)</li>
</ul>
<p><a class="internal-link" data-href="==**总结要点**==——**利用信号量实现进程同步：**" href="D:\My Files\笔记\操作系统\==**%E6%80%BB%E7%BB%93%E8%A6%81%E7%82%B9**==%E2%80%94%E2%80%94**%E5%88%A9%E7%94%A8%E4%BF%A1%E5%8F%B7%E9%87%8F%E5%AE%9E%E7%8E%B0%E8%BF%9B%E7%A8%8B%E5%90%8C%E6%AD%A5%EF%BC%9A**.html" target="_blank" rel="noopener">四条基本原则</a></p>
<p><strong>关键：</strong></p>
<ul>
<li>同步——防止放满和取空（执行操作前先P，同步信号量：仓库空间，货物）</li>
<li>互斥（临界资源：仓库——互斥信号量）</li>
</ul>
<p>互斥信号量：mutex——仓库</p>
<p>同步信号量： empty——仓库的空间；full——仓库的货物</p>
<h4 data-heading="1-1-1情况">1-1-1情况</h4>
<p><code>一个生产者，一个消费者，一个缓冲区</code></p>
<p><mark><strong>下面是错误的代码：(或者中间过程)</strong></mark></p>
<pre class="language-c" tabindex="0"><code class="language-c is-loaded"><span class="token comment">//错误的代码，违反了第四条</span>
semaphore mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
semaphore empty <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
semaphore full <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//初始情况下，仓库没有货物</span>

生产者：
    <span class="token function">P</span><span class="token punctuation">(</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    放入消息到缓冲区
    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">V</span><span class="token punctuation">(</span>full<span class="token punctuation">)</span><span class="token punctuation">;</span>

消费者：
    <span class="token function">P</span><span class="token punctuation">(</span>full<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
	取出缓冲区的消息
    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">V</span><span class="token punctuation">(</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
</code><button class="copy-code-button">复制</button></pre>
<p><mark><strong>正解：</strong></mark></p>
<img align="left" style="zoom:45%;" alt="image-20230903192229132" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230903192229132.png" referrerpolicy="no-referrer">
<pre class="language-none" tabindex="0"><code class="language-分析 language-none is-loaded">互斥所要解决的：限制多个程序不能同时访问一个临界资源，即不能多个P执行
本题中的缓冲区大小为1，在任何时刻,最多只有一个进程的P操作不会被阻塞，并顺利地进入临界区
</code><button class="copy-code-button">复制</button></pre>
<h4 data-heading="1-n-1 情况">1-n-1 情况</h4>
<pre><code>
semaphore empty = n;
semaphore full = 0;
</code><button class="copy-code-button">复制</button></pre>
<pre class="language-c" tabindex="0"><code class="language-c is-loaded">生产者：
    <span class="token function">P</span><span class="token punctuation">(</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>

	放入；
  
	<span class="token function">V</span><span class="token punctuation">(</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
消费者：
    <span class="token function">P</span><span class="token punctuation">(</span>full<span class="token punctuation">)</span><span class="token punctuation">;</span>

	取出；

	<span class="token function">V</span><span class="token punctuation">(</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button">复制</button></pre>
<p><mark>注意注意注意</mark>：为什么不用设置互斥信号量？<strong>（思考重点）</strong></p>
<pre><code>首先要明确一点：这道题的临界资源是分区的（看成一个循环队列），里面的每个缓冲区都是相互独立的，只有当同一个缓冲区被多个进程同时访问时才存在互斥

要分析哪些过程/情况存在互斥，即同时访问同一个缓冲区
生产者-生产者：不存在，因为只有一个生产者
消费者-消费者：不存在，因为只有一个消费者
生产者-消费者：
	1.仓库不空不满：不存在互斥，因为此时尾指针和头指针不会重合
	2.仓库空或满：头尾指针指向同一单元，存在互斥，但是可以由同步信号量解决
	
	full  n   0
	empty 0   n
	可执行 放入 取空

</code><button class="copy-code-button">复制</button></pre>
<img align="left" style="zoom:70%;" alt="image-20230903194415348" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230903194415348.png" referrerpolicy="no-referrer">
<p><strong>能否改变相邻的PV操作顺序？</strong></p>
<p>——实现互斥的P操作一定要在实现同步的P操作之后。（要确定能进，才能锁门）<br>
V操作不会导致进程阻塞，因此两个V操作顺序可以交换。</p>
<pre><code>① -&gt; ② -&gt; ③
若此时缓冲区内已经放满产品，则empty=0，full=n。

则生产者进程执行①使mutex变为0，再执行②，由于已没有空闲缓冲区，因此生产者被阻塞。由于生产者阻塞，因此切换回消费者进程。消费者进程执行③，由于mutex为0，即生产者还没释放对临界资源的“锁”，因此消费者也被阻塞。这就造成了生产者等待消费者释放空闲缓冲区，而消费者又等待生产者释放临界区的情况，生产者和消费者循环等待被对方唤醒，出现“死锁”。

③ -&gt; ④ -&gt; ①
同样的，若缓冲区中没有产品，即full=0，empty=n。按③④① 的顺序执行就会发生死锁。

</code><button class="copy-code-button">复制</button></pre>
<pre><code>注意：
互斥信号量加不加，加上肯定没错
实现互斥的P操作一定要在实现同步的P操作之后，否则可能导致死锁
分析问题应该以事件角度考虑，而不是以进程角度考虑
</code><button class="copy-code-button">复制</button></pre>
<h4 data-heading="n-n-n情况">n-n-n情况</h4>
<img align="left" style="zoom:47%;" alt="image-20230909153020276" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230909153020276.png" referrerpolicy="no-referrer">
<p>分析：</p>
<blockquote>
<p>同步：仓库为空时消费者不能取东西，仓库为满时消费者不能放东西<br>
互斥：生产者-生产者，消费者-消费者，生产者-消费者(<strong>可以由同步信号量解决)</strong></p>
</blockquote>
<pre class="language-none" tabindex="0"><code class="language-信号量初始化 language-none is-loaded">semaphore empty = n;
semaphore full = 0;
semaphore mutex = 1;	//互斥信号量（不完善）
</code><button class="copy-code-button">复制</button></pre>
<pre class="language-none" tabindex="0"><code class="language-c++ language-none is-loaded">//使用一个互斥信号量存在的问题：当仓库不空不满时，不能一边取，一边放
//改法：分别设一个互斥信号量mutex1，mutex2
//生产者
producer()
{
	while(ture)
    {
       P(empty);
       P(mutex1);
       放入;
       V(mutex1);
       V(full);
	}
}

//消费者
consumer()
{
    while(ture)
    {
        P(full);
        P(mutex2);
        取出；
        V(mutex2);
        V(empty);
	}
}
</code><button class="copy-code-button">复制</button></pre>
<h3 data-heading="——哲学家进餐问题">——哲学家进餐问题</h3>
<p><strong>问题描述</strong></p>
<blockquote>
<p>一张圆桌上坐着5名哲学家，每两个哲学家之间的桌上摆一根筷子，桌子的中间是一碗米饭。哲学家们倾注毕生的精力用于思考和进餐，哲学家在思考时，并不影响他人。只有当哲学家饥饿时，才试图拿起左、右两根筷子（一根一根地拿起）。如果筷子已在他人手上，则需等待。饥饿的哲学家只有同时拿起两根筷子才可以开始进餐，当进餐完毕后，放下筷子继续思考。</p>
<img style="zoom:25%;" alt="image-20230909153132791" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230909153132791.png" referrerpolicy="no-referrer">
</blockquote>
<p><strong>问题分析</strong></p>
<p>这些进程之间只存在互斥关系，但是与之前接触到的互斥关系不同的是，每个进程都需要同时持有两个临界资源，因此就<strong>有“死锁”问题的隐患。</strong></p>
<p><strong>关系分析</strong></p>
<blockquote>
<p>系统中有5个哲学家进程，5位哲学家与左右邻居对其中间筷子的访问是互斥关系。</p>
<p>整理思路:<br>
这个问题中只有互斥关系，但与之前遇到的问题不同的是，每个哲学家进程需要同时持有两个临界资源才能开始吃饭。<strong>如何避免临界资源分配不当造成的死锁现象，是哲学家问题的精髓。</strong><br>
信号量设置: 定义互斥信号量数组 chopstick[5]={1,1,1,1,1} 用于实现对5个筷子的互斥访问。并对哲学家按0~4编号，哲学家 i 左边的筷子编号为i，右边的筷子编号为 (i+1)%5。</p>
</blockquote>
<p><strong>合理方案</strong></p>
<p>可以对哲学家进程施加一些限制条件，比如最多允许四个哲学家同时进餐。这样可以保证至少有一个哲学家是可以拿到左右两只筷子的<br>
要求奇数号哲学家先拿左边的筷子，然后再拿右边的筷子，而偶数号哲学家刚好相反。用这种方法可以保证如果相邻的两个奇偶号哲学家都想吃饭，那么只会有其中一个可以拿起第一只筷子，另一个会直接阻塞。这就避免了占有一支后再等待另一只的情况。<br>
仅当一个哲学家左右两支筷子都可用时才允许他抓起筷子。</p>
<h5 data-heading="==写在后面==：关于死锁问题的一些思考"><mark>写在后面</mark>：关于死锁问题的一些思考</h5>
<pre><code>就目前学到的知识，当进程需要申请多种资源才能执行时，可能会发生死锁
最直接的解决方案就是：AND信号量，要么一次性获得所有资源，要么等待所有资源都空闲
背后的思想就是：每次至少让一个人能拿到所需的所有资源
针对这一要求来设计限制——哲学家进餐问题
</code><button class="copy-code-button">复制</button></pre>
<h3 data-heading="——读者-写者问题">——读者-写者问题</h3>
<p><strong>问题描述</strong></p>
<blockquote>
<p>有读者和写者两组并发进程，共享一个文件，当两个或两个以上的读进程同时访问共享数据时不会产生副作用，但若某个写进程和其他进程（读进程或写进程）同时访问共享数据时则可能导致数据不一致的错误。</p>
</blockquote>
<p>——<strong>关系分析</strong>——</p>
<blockquote>
<p>互斥关系：写-写，读-写</p>
<p>读-读之间不存在互斥关系，因此，只要有一个读进程在执行（没有和写互斥），那么读进程可以一直进行</p>
<p>同理，只要还有一个读进程在执行，就不能执行写进程，直到所有的读进程完成</p>
</blockquote>
<p>——<strong>信号量设置</strong></p>
<blockquote>
<p>设置一个整形的信号量——readcount，专门用于计数：正在执行中的读进程的数量（同时也是一个临界资源）<br>
配套一个互斥信号量——rmutex（读进程要访问，写进程也要访问readcount）</p>
<p>设置一个互斥信号量——wmutex() (互斥：读-写，写-写)</p>
</blockquote>
<pre><code>semaphore wmutex = 1;
int readcount = 0;
semaphore rmutex = 1;
</code><button class="copy-code-button">复制</button></pre>
<pre class="language-none" tabindex="0"><code class="language-c++ language-none is-loaded">reader()
{
    while(ture)
    {
        P(rmutex);
        if(readcount == 0)
            P(wmutex);  //
        readcount = readcount + 1;
        V(rmutex);
        
        执行读操作；
            
        P(rmutex);
        readcount = readcount - 1;
        if(readcount == 0)
            V(wmutex);	//
        V(rmutex);
	}
}

writer()
{
    while(ture)
    {
        P(wmutex);
        执行写操作；
        V(wmutex);
	}
}

</code><button class="copy-code-button">复制</button></pre>
<p><mark><strong>思考</strong></mark>：reader()中能否保留首尾的P（rmutex）和V（rmutex），而删去中间的？</p>
<p>——不可以，如此则多了一个限制：不能多个进程同时读</p>
<h5 data-heading="==写在后面==：关于互斥P,V的思考"><mark>写在后面</mark>：关于互斥P,V的思考</h5>
<pre><code>互斥信号量的P(),V()紧贴着临界区
这意味着它们中间的部分，执行一定受到了限制，即里面执行的操作/访问的资源存在互斥情况
这样想就回答了上面的思考题：读操作也包含在其中，读-读存在互斥——与关系分析不符，引入了不存在的限制，不可以这样做
</code><button class="copy-code-button">复制</button></pre>
<img style="zoom:67%;" alt="image-20230909155213659" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230909155213659.png" referrerpolicy="no-referrer">
<hr>
<h2 data-heading="2.6 管程机制">2.6 管程机制</h2>
<img align="LEFT" style="zoom:50%;" alt="image-20230909160408025" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230909160408025.png" referrerpolicy="no-referrer">
<p><strong>使用管程时，编写伪代码不用考虑互斥了（管程自动解决），但是还是要考虑同步的问题</strong></p>
<hr>
<h2 data-heading="2.7 进程通信（~看）">2.7 进程通信（~看）</h2>
<p>进程通信是指进程之间的信息交换。PV操作是低级通信方式，高级通信方式是指以较高的程效率传输大量数据的通信方式。</p>
<p>进程是分配系统资源的单位（包括内存地址空间)，因此各进程拥有的内存地址空间相互独立。</p>
<p>为了保证安全，一个进程不能直接访问另一个进程的地址空间。</p>
<p>但是进程之间的信息交换又是必须实现的。为了保证进程间的安全通信，操作系统提供了一些方法。</p>
<h3 data-heading="**共享存储**"><strong>共享存储</strong></h3>
<p>两个进程对共享空间的访问必须是<strong>互斥</strong>的（互斥访问通过操作系统提供的工具实现）。</p>
<p>操作系统只负责提供共享空间和同步互斥工具（如P、v操作)</p>
<blockquote>
<ul>
<li><strong>基于数据结构共享：</strong>比如共享空间里只能放一个长度为10的数组。这种共享方式速度慢、限制多，是一种<strong>低级通信方式</strong></li>
<li><strong>基于存储区共享：</strong>基于在内存中画出一块共享存储区，数据的形式、存放位置都由进程控制，而不是操作系统。相比之下，这种共享方式速度更快，是一种高级通信方式。</li>
</ul>
</blockquote>
<h3 data-heading="**管道通信**"><strong>管道通信</strong></h3>
<p>“管道”是指用于连接读写进程的一个共享文件，又名pipe文件。其实就是在内存中开辟一个<mark>大小固定的缓冲区</mark></p>
<blockquote>
<ul>
<li>管道只能采用<strong>半双工通信</strong>，某一时间段内只能实现单向的传输。如果要实现双向同时通信，则需要设置两个管道。</li>
<li>各进程要<strong>互斥</strong>地访问管道。</li>
<li>数据以<strong>字符流</strong>的形式写入管道，当管道写满时，写进程的write() 系统调用将被阻塞，等待读进程将数据取走。当读进程将数据全部取走后，管道变空，此时读进程的read() 系统调用将被阻塞。（缓冲区的特性）</li>
<li><strong>如果没写满，就不允许读。如果没读空，就不允许写。（缓冲区的特性）</strong></li>
<li>数据一旦被读出，就从管道中被抛弃，这就意味着<strong>读进程最多只能有一个</strong>，否则可能会有读错数据的情况。</li>
</ul>
</blockquote>
<p><strong>特点:</strong></p>
<ul>
<li>
<p>以文件为传输介质。</p>
</li>
<li>
<p>以字符流方式读写。</p>
</li>
<li>
<p>以队列方式工作。</p>
</li>
</ul>
<h3 data-heading="**消息传递**"><strong>消息传递</strong></h3>
<p>进程间的数据交换以<strong>格式化</strong>的消息（Message）为单位。进程通过操作系统提供的“发送消息 / 接收消息”两个<strong>原语</strong>进行数据交换。</p>
<blockquote>
<p><strong>——消息组成：</strong></p>
<blockquote>
<ul>
<li><strong>消息头：</strong>包括发送进程ID、接受进程ID、消息类型、消息长度等格式化的信息（计算机网络中发送的“报文”其实就是一种格式化的消息)</li>
<li><strong>消息体</strong></li>
</ul>
</blockquote>
<p><strong>——消息传递方式：</strong></p>
<blockquote>
<ul>
<li><strong>直接消息传递：</strong>消息直接挂到接收进程的消息缓冲队列上</li>
<li><strong>间接消息传递：</strong>消息要先发送到中间实体（信箱）中，因此也称“信箱通信方式”。Eg：计网中的电子邮件系统</li>
</ul>
</blockquote>
</blockquote>
<h3 data-heading="**客户机-服务器系统**"><strong>客户机-服务器系统</strong></h3>
<blockquote>
<p>主要是在网络环境的各种应用领域以成为当前主流的通信实现机制，实现方法分为三类：<br>
（1）套接字（Socket）：起源于20世纪70年代加州伯克利分校版本的UNIX（BSD Unix），是UNIX操作系统下的网络通信接口。<br>
（2）远程过程调用： RPC（Remote Procedure Call）远程过程调用，通过网络从远程计算机上请求调用某种服务。它是一种通过网络从远程计算机程序上请求服务，而不需要了解底层网络技术的协议。<br>
（3）远程方法调用：RMI（Remote Method Invocation）远程方法调用，能够让在客户端Java虚拟机上的对象像调用本地对象一样调用服务端java虚拟机中的对象上的方法。</p>
</blockquote>
<p>直接通信原语：</p>
<pre><code>对称寻址方式：
send(receiver,message);//发送一个消息给接收进程
receive(sender,message);//接收sender发来的消息
</code><button class="copy-code-button">复制</button></pre>
<pre><code>非对称寻址方式：
send(P,message);
receive(id,message);
</code><button class="copy-code-button">复制</button></pre>
<p>信箱通信原语：</p>
<pre><code>send(mailbox,message);//将一个信息发送到指定信箱
receive(mailbox,message);//从指定邮箱接受一个信息
</code><button class="copy-code-button">复制</button></pre>
<hr>
<h2 data-heading="2.8 线程的基本概念">2.8 线程的基本概念</h2>
<pre><code>进程：资源调配的基本单位，独立运行的单位
线程：独立运行的基本单位

进程过于大/繁琐，调来调去代价过大，引入线程
</code><button class="copy-code-button">复制</button></pre>
<h3 data-heading="拓展知识：进程调度的切换和过程">拓展知识：进程调度的切换和过程</h3>
<p>“狭义的进程调度”与“进程切换”的区别：</p>
<ul>
<li>
<p>狭义的进程调度指的是从就绪队列中选中一个要运行的进程。（这个进程可以是刚刚被暂停执行的进程，也可能是另一个进程，后一种情况就需要进程切换）</p>
</li>
<li>
<p>进程切换是指一个进程让出处理机，由另一个进程占用处理机的过程。</p>
</li>
</ul>
<p>过程</p>
<blockquote>
<p>广义的进程调度包含了选择一个进程和进程切换两个步骤。</p>
<p>进程切换的过程主要完成了：</p>
<ul>
<li>对原来运行进程各种数据的保存</li>
<li>对新的进程各种数据的恢复（如：程序计数器、程序状态字、各种数据寄存器等处理机现场信息，这些信息一般保存在进程控制块）</li>
</ul>
<p><strong>注意：</strong>进程切换是有代价的，因此如果过于频繁的进行进程调度、切换，必然会使整个系统的效率降低，使系统大部分时间都花在了进程切换上，而真正用于执行进程的时间减少。</p>
</blockquote>
<h2 data-heading="2.9 线程的实现（略）">2.9 线程的实现（略）</h2>
<h1 data-heading="第三章 处理机调度">第三章 处理机调度</h1>
<p>原因/目的：计算机内部的资源有限，需要经过调度来实现系统资源利用率的最大化。</p>
<p>调度的本质：·<mark>资源分配</mark></p>
<h2 data-heading="3.1 处理机调度的基本概念">3.1 处理机调度的基本概念</h2>
<h3 data-heading="3.1.1 三种层次的处理机调度">3.1.1 三种层次的处理机调度</h3>
<h4 data-heading="1.高级调度">1.高级调度</h4>
<p><mark><strong>高级调度</strong>，又称长程调度、<strong>作业调度</strong>、接纳调度</mark></p>
<ul>
<li>
<p>将<strong>外存</strong>上处于后备队列上的作业<strong>调入内存</strong>,并创建进程、分配资源,安排在就绪队列上</p>
</li>
<li>
<p>调度对象：作业</p>
</li>
</ul>
<pre><code>高级调度是辅存（外存）与内存之间的调度。每个作业只调入一次，调出一次。作业调入时会建立相应的PCB，作业调出时才撤销PCB。高级调度主要是指调入的问题，因为只有调入的时机需要操作系统来确定，但调出的时机必然是作业运行结束才调出。
</code><button class="copy-code-button">复制</button></pre>
<p>每次执行作业调度时，需要考虑以下两方面：</p>
<blockquote>
<ul>
<li>接纳多少个作业</li>
<li>接纳哪些作业（<strong>作业调度算法</strong>的选择）</li>
<li>先来先服务</li>
<li>短作业优先</li>
<li>优先权高优先</li>
</ul>
</blockquote>
<img align="left" style="zoom:50%;" alt="image-20230917155240124" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230917155240124.png" referrerpolicy="no-referrer">
<h4 data-heading="2.低级调度">2.低级调度</h4>
<p><mark>低级调度，又称短程调度、<strong>进程调度</strong></mark></p>
<ul>
<li>
<p>决定就绪队列中的哪个进程应获得处理机。</p>
</li>
<li>
<p>调度对象是进程</p>
</li>
</ul>
<p>常见的低级调度有两种：非抢占式，抢占式</p>
<ul>
<li>
<p>非抢占式（非剥夺式）</p>
<blockquote>
<p>一旦将处理机分配给某进程，便让该进程一直执行，直至该进程完成或阻塞时再分配给其他进程</p>
<p>引起进程调度的因素：</p>
<ul>
<li>正在执行的进程执行完毕,或因发生某事件而不能再继续执行</li>
<li>执行中的进程因提出I/O请求而暂停执行</li>
<li>在进程通信或同步过程中执行了某种原语操作,如P操作(wait操作)、Block原语等</li>
</ul>
<p><strong>优点</strong>：简单,系统开销小</p>
<p><strong>缺点</strong>：不适合时间要求严格的实时系统</p>
</blockquote>
</li>
<li>
<p>抢占式</p>
<blockquote>
<p>允许调度程序根据<strong>某种原则</strong>,暂停正在执行的进程,将处理机分配给其他进程</p>
<p>抢占式调度主要有以下原则:</p>
<ul>
<li><strong>优先权原则</strong>:重要作业赋予高优先权,优先占用处理机</li>
<li><strong>短作业(进程)优先原则:</strong>执行时间短的进程优先执行</li>
<li><strong>时间片原则</strong>:时间片用完后停止执行,适用于<strong><code>分时系统</code></strong></li>
</ul>
<p>特点:它增加了进程调度的次数,增加了系统的开销,但保证了系统的实时性</p>
</blockquote>
</li>
</ul>
<h4 data-heading="3.中级调度">3.中级调度</h4>
<blockquote>
<img align="left" style="zoom:57%;" alt="image-20230917160609026" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230917160609026.png" referrerpolicy="no-referrer">
</blockquote>
<h4 data-heading="4.三层调度对比">4.三层调度对比</h4>
<p>[img](D:\My Files\笔记\笔记图片\a0f84d71c1872ba2826297c43e6bd943.png)</p>
<pre><code>注意“挂起”和“阻塞”的区别:
两种就绪挂起状态都是暂时不能获得CPU的服务，但挂起态是将进程映像调到外存去了，而阻塞态下进程映像还在内存中。
</code><button class="copy-code-button">复制</button></pre>
<h3 data-heading="3.1.2 调度队列模型">3.1.2 调度队列模型</h3>
<h4 data-heading="1. 仅有进程调度的调度队列模型">1. 仅有进程调度的调度队列模型</h4>
<p>在<strong>分时系统</strong>中,通常仅设有进程调度,用户键入命令和数据,都直接进入内存,系统可以把就绪进程组织成一个队列</p>
<ul>
<li>时间片</li>
</ul>
<img align="left" style="zoom:50%;" alt="image-20230917161457894" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230917161457894.png" referrerpolicy="no-referrer">
<p>每个进程在执行时,可能有以下三种情况</p>
<ul>
<li>进程在给定时间片内已完成,释放处理机后为完成状态</li>
<li>进程在时间片内未完成,进入就绪队列末尾</li>
<li>进程在执行期间因某事件而阻塞,进入阻塞队列</li>
</ul>
<h4 data-heading="2.具有高级和低级调度的调度队列模型">2.具有高级和低级调度的调度队列模型</h4>
<p>在<strong>批处理系统</strong>中,不仅需要进程调度,而且还要有作业调度</p>
<p>该模型与上一模型主要区别在于:</p>
<blockquote>
<p><strong>就绪队列的形式</strong></p>
<ul>
<li>在批处理系统中,常用<strong><code>优先权队列</code></strong>。进程进入就绪队列时,按优先权高低插入相应位置</li>
</ul>
<p><strong>设置多个阻塞队列</strong></p>
<ul>
<li><strong>根据事件</strong>的不同设置多个队列提高效率</li>
</ul>
</blockquote>
<img align="left" style="zoom:50%;" alt="image-20230917161915152" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230917161915152.png" referrerpolicy="no-referrer">
<img align="left" style="zoom:50%;" alt="image-20230917162117005" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230917162117005.png" referrerpolicy="no-referrer">
<h4 data-heading="3.同时具有三级调度的调度队列模型">3.同时具有三级调度的调度队列模型</h4>
<p>在引入<strong><code>中级调度</code></strong>后,可把就绪分为内存就绪和外存就绪(就绪挂起);阻塞也可分为内存阻塞和外存阻塞(阻塞挂起) </p>
<img align="left" style="zoom:50%;" alt="image-20230917162341468" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230917162341468.png" referrerpolicy="no-referrer">
<h4 data-heading="4. 图表总结">4. 图表总结</h4>
<table>
<thead>
<tr>
<th>调度队列模型</th>
<th>适用操作系统类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>仅有进程调度</td>
<td>分时系统</td>
</tr>
<tr>
<td>作业调度+进程调度</td>
<td>批处理系统</td>
</tr>
<tr>
<td>三级调度（作业调度+进程调度+内存调度）</td>
<td></td>
</tr>
</tbody>
</table>
<h3 data-heading="**3.1.3** **选择调度方式和调度算法的若干准则**"><strong>3.1.3</strong> <strong>选择调度方式和调度算法的若干准则</strong></h3>
<h4 data-heading="1. 面向用户的准则\">1. 面向用户的准则\</h4>
<ul>
<li><font color="purple">周转时间短</font></li>
<li><font color="green">响应时间快</font></li>
</ul>
<p><strong>公式：</strong></p>
<p>​		<code>周转时间 = 结束执行的时间 - 进入磁盘的时间</code></p>
<p>​		<code>带权周转时间 = 周转时间 / 服务时间</code></p>
<img align="left" style="zoom:50%;" alt="image-20230917163940813" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230917163940813.png" referrerpolicy="no-referrer">
<img align="left" style="zoom: 50%;" alt="image-20230917163955298" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230917163955298.png" referrerpolicy="no-referrer">
<h4 data-heading="2. 面向系统的准则">2. 面向系统的准则</h4>
<ul>
<li>系统吞吐量高</li>
<li>处理机利用率高</li>
<li>各类资源的平衡利用（性）</li>
</ul>
<pre><code>吞吐量指单位时间内系统所完成的作业数
作业调度的方式和算法对吞吐量的大小有较大影响

各类资源：内存、外存和I/O设备
</code><button class="copy-code-button">复制</button></pre>
<hr>
<h2 data-heading="3.2 调度算法">3.2 调度算法</h2>
<pre><code>周转时间=结束执行时间-进入磁盘时间
带权周转时间=周转时间/服务时间
等待时间=开始执行时间-进入磁盘时间（并不总是：HRF抢占式，时间片轮转）
高响应比=(等待时间+服务时间)/服务时间 或=等待时间/服务时间
</code><button class="copy-code-button">复制</button></pre>
<h4 data-heading="调度算法评价指标">调度算法评价指标</h4>
<p><strong>CPU利用率</strong>：指CPU “忙碌”的时间占总时间的比例。</p>
<p>利用率 = 忙碌的时间 / 总时间</p>
<p><strong>系统吞吐量</strong>：单位时间内完成作业的数量</p>
<p>系统吞吐量 = 总共完成了多少道作业 / 总共花了多少时间</p>
<h4 data-heading="**3.2.1** **先来先服务和短作业优先算法**"><strong>3.2.1</strong> <strong>先来先服务和短作业优先算法</strong></h4>
<h5 data-heading="1. 先来先服务算法(<font color = &quot;red&quot;>FCFS</font>)">1. 先来先服务算法(<font color="red">FCFS</font>)</h5>
<ul>
<li>按照作业进入系统的<font color="red">先后次序</font>进行调度,先进入系统者先调度;即启动等待时间最长的作业</li>
<li>是一种最简单的调度算法,即可用于作业调度,也可用于进程调度</li>
<li>FCFS算法比较有利于<font color="red">长作业(进程)</font>,而不利于短作业(进程)</li>
</ul>
<p>下面这个例子默认<strong>内存无限大</strong>：即作业调度不受限；并且作业调度的时间极小</p>
<img align="left" style="zoom:50%;" alt="image-20230917210504241" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230917210504241.png" referrerpolicy="no-referrer">
<p>下面这个例子<strong>内存有限</strong>，并且采用<strong>不移动的可变分区方式</strong></p>
<img align="left" style="zoom:50%;" alt="image-20230917210839117" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230917210839117.png" referrerpolicy="no-referrer">
<p>10:30此时内存不够，C不能进行作业调度装入主存，但是当时间到10:36时，D可以进入。直到A,B结束执行后，才有足够大的连续的内存空间，11:18时A,B结束，C，E装入内存，但根据进入磁盘时间的先后，实际上是<strong>C先E后</strong></p>
<p>对于FCFS的进程调度而言，<strong>D先C后</strong>，<strong>C先E后</strong></p>
<p><img align="left" style="zoom:25%;" alt="image-20230917211002840" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230917211002840.png" referrerpolicy="no-referrer"><img style="zoom:25%;" alt="image-20230917211846040" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230917211846040.png" referrerpolicy="no-referrer"></p>
<h5 data-heading="2. 短作业优先算法（<font color = &quot;red&quot;>SJ(P)R</font>）">2. 短作业优先算法（<font color="red">SJ(P)R</font>）</h5>
<ul>
<li>短作业(进程)优先调度算法SJ(P)F,以要求<font color="red"><strong>运行时间长短</strong></font>进行调度,即启动要求运行时间最短的作业</li>
<li>可以分别用于作业调度和进程调度</li>
<li>短作业优先(SJF)的调度算法,是从后备队列中选择一个或若干个<font color="red"><strong>估计运行时间</strong></font>最短的作业,将它们调入内存运行;而短进程优先(SPF)调度算法,则是从就绪队列中选出一估计运行时间最短的进程,将处理机分配给它,使它立即执行并一直执行到完成,或发生某事件而被阻塞放弃处理机时,再重新调度</li>
</ul>
<blockquote>
<img align="left" style="zoom:50%;" alt="image-20230917212256341" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230917212256341.png" referrerpolicy="no-referrer">
<img align="left" style="zoom:50%;" alt="image-20230917212319225" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230917212319225.png" referrerpolicy="no-referrer">
<img align="left" style="zoom:50%;" alt="image-20230917212347377" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230917212347377.png" referrerpolicy="no-referrer">
</blockquote>
<pre><code>SJ(P)F调度算法也存在不容忽视的缺点:
(1)该算法对长作业不利,如作业C的周转时间由10增至16,其带权周转时间由2增至3.2。更严重的是,如果有一长作业(进程)进入系统的后备队列(就绪队列),由于调度程序总是优先调度那些(即使是后进来的)短作业(进程),将导致长作业(进程)长期不被调度。
(2)该算法完全未考虑作业的紧迫程度,因而不能保证紧迫性作业(进程)会被及时处理。
(3)必须预知作业的运行时间。由于作业(进程)的长短只是根据用户所提供的估计执行时间而定的,而用户又可能会有意或无意地缩短其作业的估计运行时间,致使该算法不一定能真正做到短作业优先调度。
(4)在采用SJF算法时，人-机无法实现交互。
</code><button class="copy-code-button">复制</button></pre>
<h4 data-heading="**3.2.2** **高优先权优先调度算法**"><strong>3.2.2</strong> <strong>高优先权优先调度算法</strong></h4>
<h5 data-heading="1. 优先权调度算法的类型">1. 优先权调度算法的类型</h5>
<ul>
<li>非抢占式优先权算法</li>
<li>抢占式优先权算法</li>
</ul>
<h5 data-heading="2. 优先权的类型">2. 优先权的类型</h5>
<ul>
<li>
<p>静态优先权<br>
静态优先权是在创建进程时确定的,且在进程的整个运行期间保持不变。<br>
(1)进程类型系统进程优先级高于用户进程<br>
(2)进程对资源的需求执行时间短,内存要求小的进程,有较高优先权。<br>
(3)用户要求根据用户进程紧迫程度及用户所付费用的多少来确定静态优先权是在创建进程时确定的,且在进程的整个运行期间保持不变。<br>
<strong>三种依据：</strong><br>
(1)进程类型<br>
系统进程优先级高于用户进程<br>
(2)进程对资源的需求<br>
执行时间短,内存要求小的进程,有较高优先权。<br>
(3)用户要求<br>
根据用户进程紧迫程度及用户所付费用的多少来确定&gt;</p>
<blockquote>
<p><font color="red">注意：</font>数值越大！=优先权越高，具体要看题目</p>
</blockquote>
</li>
<li>
<p>动态优先权</p>
</li>
</ul>
<h5 data-heading="3. 高响应比优先调度算法（<font color =  &quot;red&quot;>HRF</font>）">3. 高响应比优先调度算法（<font color="red">HRF</font>）</h5>
<blockquote>
<ul>
<li>该算法是FCFS和SJF的结合,克服了两种算法的缺点</li>
<li>响应比最高的作业优先启动</li>
<li><strong>等待时间与服务时间之和,就是系统对该作业的响应时间</strong>,故该优先权又相当于响应比R~P~。</li>
</ul>
<p><strong>优先权的两种公式（相差1）</strong></p>
<img align="left" style="zoom:50%;" alt="image-20230917214031917" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230917214031917.png" referrerpolicy="no-referrer">
</blockquote>
<img align="left" style="zoom:50%;" alt="image-20230917214159195" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230917214159195.png" referrerpolicy="no-referrer">
<p><mark><strong>非抢占式</strong></mark></p>
<img align="left" style="zoom:50%;" alt="image-20230918082559131" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230918082559131.png" referrerpolicy="no-referrer">
<p><mark><strong>抢占式</strong></mark></p>
<img align="left" style="zoom:50%;" alt="image-20230918082659516" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230918082659516.png" referrerpolicy="no-referrer">
<h4 data-heading="**3.2.3** **基于时间片的轮转调度算法**"><strong>3.2.3</strong> <strong>基于时间片的轮转调度算法</strong></h4>
<h5 data-heading="1. 时间片轮转算法">1. 时间片轮转算法</h5>
<img align="left" style="zoom:50%;" alt="image-20230918082750262" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230918082750262.png" referrerpolicy="no-referrer">
<p><strong>进程A并不是“一口气”执行完成的，等待时间：</strong></p>
<img align="left" style="zoom:50%;" alt="image-20230918084211391" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230918084211391.png" referrerpolicy="no-referrer">
<img align="left" style="zoom:50%;" alt="image-20230918084135200" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230918084135200.png" referrerpolicy="no-referrer">
<p>图一是极其粗糙的，比如时间为1时，A执行完装入主存并且B装入主存，谁先谁后？</p>
<p><strong><font color="gree">注意：进程执行完，立即将时间片分配给下一进程</font></strong></p>
<img align="left" style="zoom:50%;" alt="image-20230918085105844" src="app://91cc415163fd9155def20b22d9cebc4cb1b2/D:/My%20Files/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/image-20230918085105844.png" referrerpolicy="no-referrer">
<h5 data-heading="2. 多级反馈队列调度算法">2. 多级反馈队列调度算法</h5>
<h2 data-heading="3.3 实时调度">3.3 实时调度</h2>
<h3 data-heading="3.3.2 实时调度算法">3.3.2 实时调度算法</h3>
<h4 data-heading="1. 最早时间优先（EDF）">1. 最早时间优先（EDF）</h4>
<h4 data-heading="2. 最低松弛度优先（LLF）">2. 最低松弛度优先（LLF）</h4>
<p>该算法根据任务的<strong>紧急（或松弛）程度</strong>，确定任务的优先级；任务越紧急，优先度越高，以使其优先执行。要求系统中有一个<span style="background:#affad1">按松弛度排序的实时任务队列（低到高）</span>，调度程序选择队首（最低）的任务执行</p>
<ul>
<li>该算法主要用于<strong>可抢占调度方式</strong>中</li>
<li>松弛度是适时调整的，当某任务的松弛度降到0时，立即“终止”当前正在执行的任务（注意调整相关时间），执行该任务（抢占）</li>
</ul>
<p><mark>松弛度 = 任务完成截止时间 - 当前时间 - 执行时间</mark> </p>
<ul>
<li>松弛度 = 0 时，任务必须执行</li>
<li>松弛度 &lt; 0 时，任务已经来不及执行了</li>
</ul>
<hr>
<h2 data-heading="3.4 多处理机系统中的调度">3.4 多处理机系统中的调度</h2>
<h2 data-heading="3.5 产生死锁的原因和必要条件">3.5 产生死锁的原因和必要条件</h2>
<h3 data-heading="处理死锁的方法">处理死锁的方法</h3>
<ul>
<li>**预防死锁</li>
<li><strong>避免死锁</strong></li>
<li><strong>检测死锁</strong></li>
<li><strong>解除死锁</strong></li>
</ul>
<h2 data-heading="3.6 预防死锁的方法">3.6 预防死锁的方法</h2>
<h2 data-heading="3.7 死锁的检测与解除">3.7 死锁的检测与解除</h2>
<h1 data-heading="第四章 存储器管理">第四章 存储器管理</h1>
<h2 data-heading="优化过程简介">优化过程简介</h2>
<p>固定 -- 装入/调用时可变/使用 -- 运行时 变/使用<br>
连续 -- 离散 -- 虚拟<br>
理想化预知 -- 就近判断 -- 根据刚刚的过去预知即将的未来</p>
<h2 data-heading="4.1 程序的装入与链接">4.1 程序的装入与链接</h2>
<p>多道程序环境下,程序要运行必须为之<font color="#c0504d">创建进程</font>,而创建进程的第一件事就是<span style="background:#affad1">分配内存</span><br>
源程序要运行通常经过<span style="background:#fff88f">编译(compile)--链接(link)--装入(load)</span>等几个步骤<br>
<img alt="Pasted image 20230927220930.png" src="Pasted image 20230927220930.png" class="internal-embed"><br>
<strong>程序运行步骤简介：</strong></p>
<pre><code>(1)编译
由编译程序将用户源代码编译成若干个目标模块。

(2)链接
由链接程序将编译后形成的目标模块以及它们所需要的库函数,链接在一起,形成一个装入模块。

(3)装入。
由装入程序将装入模块装入主存的过程。
</code><button class="copy-code-button">复制</button></pre>
<p>基本上三种思路：</p>
<ol>
<li>固定的 / 静态的</li>
<li>可变的
<ol>
<li>装入时变换</li>
<li>运行时变换</li>
</ol>
</li>
</ol>
<h3 data-heading="4.1.1 程序的装入">4.1.1 程序的装入</h3>
<p><mark>装入：由装入程序，将 装入模块 装入 主存 的过程。</mark></p>
<h4 data-heading="1.绝对装入方式">1.绝对装入方式</h4>
<p><span style="background:#fff88f">适合单道</span><br>
<span style="background:rgba(140, 140, 140, 0.12)">为用户分配的存储空间的“逻辑地址/相对地址”是多少，装入主存时的“物理地址/绝对地址”就是多少</span></p>
<blockquote>
<pre><code>![[Pasted image 20230927221343.png]]
</code><button class="copy-code-button">复制</button></pre>
</blockquote>
<p>"该是多少，就是多少"</p>
<blockquote>
<pre><code>![[Pasted image 20230927221848.png]]
</code><button class="copy-code-button">复制</button></pre>
</blockquote>
<ul>
<li>装入模块被装入内存后,由于程序中的逻辑地址与实际内存地址完全相同,故<strong>不需</strong>对程序和数据的地址进行修改</li>
<li><strong>绝对装入方式</strong>只能将目标模块装入到内存中<strong>事先指定</strong>的位置（<span style="background:rgba(5, 117, 197, 0.2)"><font color="#002060">预知-&gt;适合单道</font></span>）</li>
</ul>
<h4 data-heading="2.可重定位装入方式">2.可重定位装入方式</h4>
<ul>
<li>在<strong>多道程序</strong>环境下,<span style="background:rgba(140, 140, 140, 0.12)">不可能预知</span>目标模块放在内存中的地址,因此绝对装入方式不适合在多道环境下使用(即不能做到预知，使逻辑地址=物理地址)</li>
<li>程序中目标模块的地址通常从0开始,其他地址都是<strong>相对</strong>于0计算</li>
</ul>
<p><span style="background:rgba(92, 92, 92, 0.2)">把在装入时对目标程序中指令和数据的修改过程称为重定位</span></p>
<ul>
<li>地址变换通常是在<span style="background:rgba(140, 140, 140, 0.12)">装入时一次完成</span>的,以后不再改变,故称为<font color="#c0504d">静态重定位。</font><br>
- 静态重定位特点: 简单、不能在内存中移动、要求连续。<br>
<span style="background:rgba(140, 140, 140, 0.12)">程序装入到内存中，地址发生了变化（且只在装入时变换）：</span>
<blockquote>
<pre><code>![[Pasted image 20230927222501.png]]
</code><button class="copy-code-button">复制</button></pre>
<p><span style="background:rgba(140, 140, 140, 0.12)">作业装入内存时的情况：</span><br>
<img alt="Pasted image 20230927222639.png" src="Pasted image 20230927222639.png" class="internal-embed"></p>
</blockquote>
</li>
</ul>
<p>存在的问题：当采用可重定位装入方式时，<span style="background:rgba(140, 140, 140, 0.12)">作业装入内存后，不能进行移动</span>（再次更改地址）</p>
<blockquote>
<pre><code>![[Pasted image 20230927223015.png]]
</code><button class="copy-code-button">复制</button></pre>
</blockquote>
<h4 data-heading="3.动态运行时装入方式">3.动态运行时装入方式</h4>
<ul>
<li>可重定位方式不允许程序运行时在内存中移动位置，进行优化-》<strong>动态运行时装入方式</strong></li>
<li>装入程序,在把装入模块装入内存后,并不立即把装入模块中的相对地址转换为绝对地址，<span style="background:rgba(140, 140, 140, 0.12)">而是程序要执行时才进行地址装换</span>
<ul>
<li>在程序未执行前，装入内存后的所有地址都仍是相对地址,依靠<strong>硬件</strong>支持进行地址转换。</li>
</ul>
</li>
<li>动态重定位特点: <strong>在内存中可移动</strong></li>
</ul>
<h3 data-heading="4.1.2 程序的链接">4.1.2 程序的链接</h3>
<p><mark>链接：由链接程序将编译后形成的目标模块以及它们所需要的库函数,链接在一起,形成一个装入模块。</mark></p>
<h4 data-heading="1.静态链接方式">1.静态链接方式</h4>
<p><strong>在程序运行前</strong>,先将各目标模块及所需的库函数链接成一个完整的装入模块,以后不再拆开</p>
<p>在将这几个目标模块装配成一个装入模块时,须解决以下两个问题</p>
<ul>
<li>对相对地址进行修改</li>
<li>变换外部调用符号
<blockquote>
<pre><code>![[Pasted image 20230927223751.png]]
</code><button class="copy-code-button">复制</button></pre>
</blockquote>
</li>
</ul>
<h4 data-heading="2.装入时动态链接方式">2.装入时动态链接方式</h4>
<p>将用户的源程序编译后所得的一组目标模块<strong>在装入内存时</strong>采用<span style="background:rgba(3, 135, 102, 0.2)">边装入边链接</span>的方式<br>
优点:</p>
<blockquote>
<p>(1)便于目标模块的修改和更新<br>
(2)便于实现对目标模块的共享</p>
</blockquote>
<blockquote>
<pre><code>![[Pasted image 20230927224104.png]]
</code><button class="copy-code-button">复制</button></pre>
</blockquote>
<h4 data-heading="3.运行时动态链接方式">3.运行时动态链接方式</h4>
<p><strong>原因</strong>：应用程序在每次运行的模块可能不相同,出错模块不一定什么时候运行。</p>
<ul>
<li>运行时动态链接方式将对某些模块的链接<strong>推迟到执行时</strong>才去做
<ul>
<li>即在执行过程中,当发现一个被调用模块尚未装入内存时,立即由OS去找到该模块并将之装入内存,把它链接到调用者模块上</li>
</ul>
</li>
<li>凡在执行过程中未被用到的目标模块,都不会被调入内存和被链接到装入模块上,这样不仅可加快程序的装入过程,而且可节省大量的内存空间</li>
<li><strong>理解</strong>：只在要用的时候，把它<span style="background:rgba(3, 135, 102, 0.2)">装入内存并“链接”</span>，不需要用到的不会被调入内存和被链接；典型应用：dll
<blockquote>
<pre><code>![[Pasted image 20230927225319.png]]
</code><button class="copy-code-button">复制</button></pre>
</blockquote>
</li>
</ul>
<blockquote>
<pre><code>![[Pasted image 20230927225342.png]]
</code><button class="copy-code-button">复制</button></pre>
</blockquote>
<hr>
<h2 data-heading="4.2 连续分配方式">4.2 连续分配方式</h2>
<p><mark>连续分配方式为一个用户程序分配一个连续的内存空间</mark></p>
<p><strong>内部碎片和外部碎片</strong></p>
<pre><code>1.外部碎片：内存中的某些空闲区由于太小了而难以利用
2.内部碎片：分配给进程的内存区域中，有部分没有用上
</code><button class="copy-code-button">复制</button></pre>
<h3 data-heading="4.2.1 单一连续分配">4.2.1 单一连续分配</h3>
<ul>
<li>单一连续分配是最简单的一种存储管理方式,但只能用于<strong>单用户、单任务</strong>的操作系统中</li>
<li>内存中<strong>只能有一道</strong>用户程序，用户程序<strong>独占</strong>整个用户区空间。</li>
<li>采用这种存储管理方式时,可<span style="background:rgba(5, 117, 197, 0.2)">把内存分为系统区和用户区两部分</span>,系统区仅提供给OS使用,通常是放在内存的<strong>低址部分</strong>；用户区是指除系统区以外的全部内存空间,提供给用户使用</li>
<li>一般情况下无存储器保护机构(早期有)</li>
<li>特点:<br>
(1)简单易行,系统开销小，使用覆盖技术<br>
(2)资源利用率低(一次只能装入一个作业)<br>
(3)有内部碎片<br>
<img alt="Pasted image 20230929130529.png" src="Pasted image 20230929130529.png" class="internal-embed"></li>
</ul>
<h3 data-heading="4.2.2 固定分区分配">4.2.2 固定分区分配</h3>
<p>在产生了支持<strong>多道程序</strong>的系统后，为了能在内存中装入多道程序而互相之间不产生干扰，将整个<span style="background:rgba(3, 135, 102, 0.2)">用户区</span>划分为<strong>若干个固定大小的分区</strong>(分区大小可以相等也可以不相等)，在<span style="background:rgba(92, 92, 92, 0.2)">每个分区中只能装入一道作业</span>， 形成了最早的可运行多道程序的内存管理方式。</p>
<h4 data-heading="划分分区的方法：">划分分区的方法：</h4>
<ul>
<li><strong>分区大小相等</strong>：缺乏灵活性，但是很适合用于用一台计算机控制多个相同对象的场合</li>
<li><strong>分区大小不等</strong>：增加了灵活性，可以满足不同大小的进程需求。根据常在系统中运行的作业大小情况进行划分</li>
</ul>
<h4 data-heading="实现方法：">实现方法：</h4>
<p>为了便于内存分配，通常将分区<span style="background:rgba(92, 92, 92, 0.2)">按照其大小进行排队</span>，并为之建立一张<span style="background:#fff88f">分区使用表</span>，表中包含：<br>
<strong>分区的起始地址、大小以及状态</strong>（是否已分配出去）<br>
<mark>注意：只分配用户区</mark></p>
<p><img alt="Pasted image 20230929131807.png" src="Pasted image 20230929131807.png" class="internal-embed"></p>
<h4 data-heading="管理特点：">管理特点：</h4>
<ul>
<li>固定分配分区方式支持<span style="background:rgba(92, 92, 92, 0.2)">多个程序</span>并发执行</li>
<li><strong>一个作业只能装入一个分区</strong>（分区如果小了，便不能装入）,不能装入两个或多个相邻的分区。</li>
<li>通过对“分区使用表”的改写，来实现主存的分配与回收。作业在执行时,不会改变存储区域，所以采用静态地址重定位方式。此方法易于实现,系统开销小。</li>
<li>分区大小固定，会造成存储空间的浪费，产生<strong>内部碎片</strong>（<strong>无外部碎片</strong>)</li>
</ul>
<h3 data-heading="4.2.3 动态分区分配">4.2.3 动态分区分配</h3>
<p>动态分区分配又称为<strong>可变分区分配</strong>， 这种分配方式不会预先划分内存分区。进程<span style="background:rgba(92, 92, 92, 0.2)">装入</span>内存时<strong>根据进程大小动态地建立分区</strong>，并使得分区的大小正好适合进程的需要。</p>
<ul>
<li>系统中<span style="background:rgba(92, 92, 92, 0.2)">分区的大小和数目可变</span></li>
<li>如何实现动态：从该分区中按请求的大小<strong>划分</strong>出一部分内存空间分配下去，剩余部分仍留在表中</li>
</ul>
<h4 data-heading="分区分配中的操作">分区分配中的操作</h4>
<ul>
<li>分配内存</li>
<li>回收内存</li>
<li>
<blockquote>
<p><span style="background:rgba(5, 117, 197, 0.2)">1. 分配内存</span><br>
<img alt="c0777c8c344623d078793423b41e4f7.jpg" src="c0777c8c344623d078793423b41e4f7.jpg" class="internal-embed"><br>
u.size：请求的分区大小<br>
m.size：空闲分区的大小<br>
size：规定的不再切割的空闲分区的大小（<strong>再小就用不了了，成碎片了</strong>）<br>
<img alt="a1b69811c6d3d6000d47866da7d147e.jpg" src="a1b69811c6d3d6000d47866da7d147e.jpg" class="internal-embed"></p>
</blockquote>
</li>
</ul>
<blockquote>
<p><span style="background:rgba(5, 117, 197, 0.2)">	2. 回收内存</span><br>
<img alt="7ca7dce2bdcd861a141b4a4c56141e7.jpg" src="7ca7dce2bdcd861a141b4a4c56141e7.jpg" class="internal-embed"></p>
</blockquote>
<h4 data-heading="分区分配中的数据结构">分区分配中的数据结构</h4>
<ul>
<li>空闲分区表
<ul>
<li>记录每个空闲分区的情况</li>
<li><img alt="Pasted image 20231003074344.png" src="Pasted image 20231003074344.png" class="internal-embed"></li>
</ul>
</li>
<li>空闲分区链
<ul>
<li>实现对空闲分区的分配和链接</li>
<li><img alt="Pasted image 20231003074416.png" src="Pasted image 20231003074416.png" class="internal-embed"></li>
</ul>
</li>
</ul>
<h4 data-heading="分区分配算法">分区分配算法</h4>
<ul>
<li>基于顺序搜索的动态分区分配算法</li>
<li>基于索引搜索的动态分区分配算法</li>
</ul>
<h5 data-heading="基于顺序搜索的动态分区分配算法">基于顺序搜索的动态分区分配算法</h5>
<h6 data-heading="1. 首次适应算法">1. 首次适应算法</h6>
<ul>
<li>空闲分区链以<span style="background:rgba(5, 117, 197, 0.2)">地址递增</span>顺序链接</li>
<li>分配时<span style="background:rgba(5, 117, 197, 0.2)">从链首开始查找</span>,找到一个大小可满足的空闲分区,划出一块给请求者（优先利用低地址部分的空闲分区）</li>
<li>低地址部分被不断划分，会留下“碎片”<br>
``碎片：难以被利用的，很小的分区<br>
<img alt="Pasted image 20231003074935.png" src="Pasted image 20231003074935.png" class="internal-embed"><br>
<img alt="Pasted image 20231003074953.png" src="Pasted image 20231003074953.png" class="internal-embed"><br>
<img alt="Pasted image 20231003075010.png" src="Pasted image 20231003075010.png" class="internal-embed"></li>
</ul>
<p>优点:</p>
<blockquote>
<p>(1)分配算法简单<br>
(2)优先利用低址部分,保留了高址的大空闲区,为大作业装入提供条件。</p>
</blockquote>
<p>缺点:</p>
<blockquote>
<p>每次从链首开始,增加了查找开销,并且留下许多难以利用的”碎片”(<span style="background:rgba(5, 117, 197, 0.2)">外碎片</span>)</p>
</blockquote>
<h6 data-heading="2. 循环首次适应算法">2. 循环首次适应算法</h6>
<ul>
<li>空闲分区链以<span style="background:rgba(5, 117, 197, 0.2)">地址递增</span>顺序链接,链表为<strong>循环</strong>链表</li>
<li>每次分配时从上一次找到空闲分区的<span style="background:rgba(5, 117, 197, 0.2)">下一个空闲区开始</span>
<blockquote>
<pre><code>![[Pasted image 20231003075922.png]]
![[Pasted image 20231003075947.png]]
![[Pasted image 20231003080009.png]]
</code><button class="copy-code-button">复制</button></pre>
</blockquote>
</li>
</ul>
<p><strong>优点:</strong></p>
<blockquote>
<p>使空闲分区分布均匀,减少查找空闲分区开销</p>
</blockquote>
<p><strong>缺点:</strong></p>
<blockquote>
<p>会缺乏大的空闲分区</p>
</blockquote>
<h6 data-heading="3. 最佳适应算法">3. 最佳适应算法</h6>
<ul>
<li>空闲分区链以<span style="background:rgba(5, 117, 197, 0.2)">分区大小递增</span>的顺序链接(<strong>每分配一次，都要调整顺序</strong>)</li>
<li>每次为作业分配内存时，将能<span style="background:rgba(5, 117, 197, 0.2)">满足条件</span>，且是<span style="background:rgba(5, 117, 197, 0.2)">最小</span>的空闲分区分配给作业（避免“大材小用”）
<ul>
<li>从头开始,第一次找到满足要求的空闲分区,必然是最优的</li>
</ul>
</li>
<li>分区切割后的剩余部分（小）——产生不可利用的空闲区（“<strong>小碎片</strong>”）</li>
<li><mark>收回主存时,要按分区大小递增顺序插入到空闲区表中</mark><br>
``如何找到满足条件的最小？ ——排序+作差
<blockquote>
<pre><code>![[Pasted image 20231003080553.png]]
**排序：**
![[Pasted image 20231003081049.png]]
**分配满足条件的最小空闲分区：**
![[Pasted image 20231003081114.png]]
</code><button class="copy-code-button">复制</button></pre>
<p><strong>排序：</strong><br>
<img alt="Pasted image 20231003081155.png" src="Pasted image 20231003081155.png" class="internal-embed"></p>
</blockquote>
</li>
</ul>
<h6 data-heading="4. 最差（坏）适应算法">4. 最差（坏）适应算法</h6>
<ul>
<li>空闲分区链以<span style="background:rgba(5, 117, 197, 0.2)">分区大小递减</span>的顺序链接(<strong>每分配一次，都要调整顺序</strong>)</li>
<li>每次为作业分配内存时，将能<span style="background:rgba(5, 117, 197, 0.2)">满足条件</span>，且是<span style="background:rgba(5, 117, 197, 0.2)">最大</span>的空闲分区分配给作业（避免“大材小用”）
<ul>
<li>从头开始,第一次找到满足要求的空闲分区,必然是最优的</li>
</ul>
</li>
<li>分区切割后的剩余部分（小）——产生不可利用的空闲区（“<strong>小碎片</strong>”）</li>
<li><mark>收回主存时,要按分区大小递减顺序插入到空闲区表中</mark></li>
</ul>
<table>
<thead>
<tr>
<th>基于顺序搜索的动态分区分配算法</th>
<th>链接顺序</th>
<th>分配特点</th>
<th>缺点</th>
</tr>
</thead>
<tbody>
<tr>
<td>首次适应算法</td>
<td>地址递增</td>
<td>每次从<span style="background:rgba(92, 92, 92, 0.2)">链首</span>开始，分配第一个大小满足的分区</td>
<td>低址部分会产生外碎片</td>
</tr>
<tr>
<td>循环首次适应算法</td>
<td>地址递增</td>
<td>每次从上一次的<span style="background:rgba(92, 92, 92, 0.2)">下一个分区</span>开始，分配第一个大小满足的分区</td>
<td>会缺乏大的空闲分区</td>
</tr>
<tr>
<td>最佳适应算法</td>
<td>分区大小递增</td>
<td>分配大小满足且是<span style="background:rgba(92, 92, 92, 0.2)">最小</span>的分区（排序+首次适应的分配方式）</td>
<td>性能差（几乎每个分区都会被“噶”）</td>
</tr>
<tr>
<td>最差适应算法</td>
<td>分区大小递减</td>
<td>分配大小满足且是<span style="background:rgba(92, 92, 92, 0.2)">最大</span>的分区（排序+首次适应的分配方式</td>
<td>会缺乏大的空闲分区</td>
</tr>
</tbody>
</table>
<h5 data-heading="基于索引搜索的动态分区分配算法">基于索引搜索的动态分区分配算法</h5>
<p>为了提高搜索空闲分区的速度，在<strong>大、中型系统</strong>中往往会采用基于索引搜索的动态分区分配算法</p>
<h6 data-heading="1.快速适应算法(分类搜索法)">1.快速适应算法(分类搜索法)</h6>
<ul>
<li><span style="background:rgba(92, 92, 92, 0.2)">按照分区大小</span>设置多个空闲分区链，增加一个索引表，可以快速对应到一个空闲分区链上。</li>
<li>空闲分区链分类：常用的大小分类，如2KB,4KB,8KB</li>
<li>特点:分配速度快,<strong>不进行分区分割</strong>;存在一定的主存浪费;典型的<font color="#ff0000">以空间换时间</font>的作法。<br>
<img alt="Pasted image 20231005163207.png" src="Pasted image 20231005163207.png" class="internal-embed"></li>
</ul>
<h6 data-heading="2.伙伴系统">2.伙伴系统</h6>
<ul>
<li>
<p>Linux采用伙伴(buddy)算法对物理内存进行管理</p>
</li>
<li>
<p>通过<span style="background:rgba(3, 135, 102, 0.2)">不断地平分较大的</span>空闲内存块来获得较小的空闲内存块，直到获得所需的内存块；当内存释放时，<span style="background:rgba(3, 135, 102, 0.2)">尽可能的合并</span>空闲内存块（若伙伴空闲，则与伙伴合并..........）。<br>
其中<span style="background:rgba(92, 92, 92, 0.2)">内存块分配与合并都采用以2的幂次方为单位</span>。</p>
</li>
<li>
<p>所谓“伙伴”，就是指在空闲块被分裂时，由一个大块内存分裂出来的两个小块内存,互称“伙伴”</p>
</li>
<li>
<p>算法采用<strong>位图</strong>和<strong>空闲链表</strong>作为辅助工具，其中位图用来跟踪内存块的使用情况，空闲链表用来维护内存中没有使用的内存块</p>
<ul>
<li>位图：0表示空闲，1表示已经分配，每一位表示一个最小的分配请求单元</li>
</ul>
</li>
<li>
<p><strong>分配内存</strong>的大体步骤</p>
<ul>
<li>需要申请<span style="background:rgba(140, 140, 140, 0.12)"> n KB </span>的内存空间</li>
<li>搜索空闲链表，对应的<span style="background:rgba(140, 140, 140, 0.12)"> n KB </span>的是否为空</li>
<li><span style="background:rgba(140, 140, 140, 0.12)">若为空</span>——继续平分（要加入到空闲链表种）直至产生<span style="background:rgba(140, 140, 140, 0.12)"> n KB </span>的内存块，分配</li>
<li><span style="background:rgba(140, 140, 140, 0.12)">若不为空</span>——分配对应的内存块</li>
<li>更改位图</li>
</ul>
</li>
<li>
<p><strong>释放内存</strong>的大体步骤</p>
<ol>
<li>将当前释放的内存块的<span style="background:rgba(140, 140, 140, 0.12)">位图清零</span></li>
<li>检测当前释放的<span style="background:rgba(140, 140, 140, 0.12)">内存块的伙伴</span>是否处于使用状态</li>
<li>若<span style="background:rgba(140, 140, 140, 0.12)">伙伴</span>处于空闲状态，合并，<strong>转向步骤2</strong></li>
<li>若<span style="background:rgba(140, 140, 140, 0.12)">伙伴</span>处于使用状态，不能合并，将当前内存块加入到对应的<span style="background:rgba(140, 140, 140, 0.12)">空闲链表</span>中</li>
</ol>
</li>
</ul>
<blockquote>
<p><span style="background:#affad1">分配内存实例</span><br>
<img alt="Pasted image 20231005164126.png" src="Pasted image 20231005164126.png" class="internal-embed"><br>
<span style="background:rgba(3, 135, 102, 0.2)">申请8KB的内存空间：</span></p>
<ol>
<li>整个内存分成A和A’(各个分区指向空闲链表对应的大小)</li>
<li>A分成B和B’</li>
<li>B分成C和C’</li>
<li>分配C给用户，更新位图<br>
<img alt="Pasted image 20231006091654.png" src="Pasted image 20231006091654.png" class="internal-embed"></li>
</ol>
</blockquote>
<blockquote>
<p><span style="background:#affad1">释放内存实例</span><br>
初始状态：<img alt="Pasted image 20231006092949.png" src="Pasted image 20231006092949.png" class="internal-embed"><br>
<span style="background:rgba(3, 135, 102, 0.2)">释放2KB的E块</span></p>
<ol>
<li>E’正处于空闲状态，<span style="background:rgba(140, 140, 140, 0.12)">E</span>和E’合并为D</li>
<li>D’正处于空闲状态，<span style="background:rgba(140, 140, 140, 0.12)">D</span>和D’合并为C<sup>'</sup></li>
<li>C正处于空闲状态，<span style="background:rgba(140, 140, 140, 0.12)">C</span>和C’合并为B</li>
<li>B<sup>'</sup>正处于使用状态，不合并，将<span style="background:rgba(140, 140, 140, 0.12)">B</span>加入到16KB的空闲链表中<br>
<img alt="Pasted image 20231006093407.png" src="Pasted image 20231006093407.png" class="internal-embed"></li>
</ol>
</blockquote>
<h6 data-heading="3.哈希算法">3.哈希算法</h6>
<ul>
<li>引入原因：上述的分类搜索法和伙伴系统中，都是把空闲分区进行分类，再查找这些分类的分区上会使时间性能下降。</li>
<li>原理：哈希算法就是<span style="background:rgba(92, 92, 92, 0.2)">利用哈希快速查找</span>的优点，对索引表进行快速查找</li>
</ul>
<h3 data-heading="小结">小结</h3>
<table>
<thead>
<tr>
<th>连续分配方式</th>
<th>辅助的数据结构</th>
<th>特点</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>单一连续分配</td>
<td>无</td>
<td>一道进程独占用户区</td>
<td>有内部碎片</td>
</tr>
<tr>
<td>固定分区分配</td>
<td>分区使用表</td>
<td>内存划分为若干固定大小的区域，每个分区只装入一道作业</td>
<td>有内部碎片</td>
</tr>
<tr>
<td>动态分区分配</td>
<td>空闲分区表</td>
<td>根据进程的大小动态地分配内存空间</td>
<td>多种分配算法 产生许多“外碎片”</td>
</tr>
</tbody>
</table>
<h3 data-heading="4.2.4 （动态）可重定位分区分配">4.2.4 （动态）可重定位分区分配</h3>
<p><span style="background:#fff88f">解决了装入后“不可移动”的问题？</span><br>
使用的技术：<span style="background:rgba(92, 92, 92, 0.2)">“拼接”或“紧凑”</span></p>
<p><strong>优点:</strong></p>
<ul>
<li>可以消除碎片,能够分配更多的分区,有助于多道程序设计,提高内存的利用率。</li>
</ul>
<p><strong>缺点:</strong></p>
<ul>
<li>紧凑增加主机的开销，花费了大量CPU时间</li>
<li>紧凑修改空闲分区表<br>
<strong>移动条件:</strong> 无内外存信息交换
<blockquote>
<pre><code>![[Pasted image 20231006094957.png]]
</code><button class="copy-code-button">复制</button></pre>
</blockquote>
</li>
</ul>
<p><strong>动态可重定位分区分配的实现</strong></p>
<ul>
<li>作业装入内存后的所有地址仍是<strong>相对地址</strong>,将相对地址转换成物理地址的工作在指令执行时进行</li>
<li>地址变换过程是在程序执行期间,随着每条指令和数据的访问而自动进行的（动态运行时装入）。</li>
<li><span style="background:#affad1">真正访问地址=相对地址+重定位寄存器中地址</span></li>
<li>需要有<span style="background:rgba(140, 140, 140, 0.12)">硬件地址变换机构</span>的支持<br>
<img alt="Pasted image 20231006095443.png" src="Pasted image 20231006095443.png" class="internal-embed"></li>
</ul>
<p>**动态可重定位分区分配算法<br>
<img alt="Pasted image 20231006095745.png" src="Pasted image 20231006095745.png" class="internal-embed"></p>
<h3 data-heading="4.2.5 对换(Swapping)">4.2.5 对换(Swapping)</h3>
<ul>
<li>把内存中暂时不能运行的进程或者暂时不用的程序和数据,<span style="background:rgba(140, 140, 140, 0.12)">调（换）出到外存上</span>,以便腾出足够的内存空间,再把已具备运行条件的进程或进程所需要的程序和数据,<span style="background:rgba(140, 140, 140, 0.12)">调（换）入内存</span>——提高内存利用率
<ul>
<li>对换是以<span style="background:rgba(140, 140, 140, 0.12)">整个进程</span>为单位,称为“整体对换”或“进程对换”</li>
<li>对换是以<span style="background:rgba(140, 140, 140, 0.12)">“页”或“段”</span>为单位进行的,则称为“页面对换”或“分段对换”,又统称为“部分对换”（<strong>目的是为了支持虚拟存储器</strong>）<br>
<img alt="Pasted image 20231006101220.png" src="Pasted image 20231006101220.png" class="internal-embed"></li>
</ul>
</li>
</ul>
<h4 data-heading="**对换空间的管理**"><strong>对换空间的管理</strong></h4>
<ul>
<li>在具有对换功能的OS中,通常<span style="background:rgba(5, 117, 197, 0.2)">把外存分为文件区和对换区</span>
<ul>
<li>文件区管理的主要目标是提高文件存储空间的利用率,采取<strong>离散分配方式</strong>。</li>
<li>外存中对换区主要存放从内存中换出的进程,对换空间管理的主要目标是提高进程换入和换出的速度。</li>
</ul>
</li>
<li>为了能对对换区中的空闲盘块进行管理,在系统中应配置相应的数据结构,以记录外存的使用情况。其形式与内存在动态分区分配方式中所用数据结构相似,即同样可以用空闲分区表或空闲分区链。在空闲分区表中的每个表目中应包含两项, 即<strong>对换区的首址及其大小</strong>,它们的单位是盘块号和盘块数</li>
<li>对换区的分配采用<strong>连续分配方式</strong>,分配算法可以是首次适应算法、循环首次适应算法或最佳适应算法</li>
</ul>
<h4 data-heading="进程的换出与换入">进程的换出与换入</h4>
<p><span style="background:#affad1">极其耗费时间</span><br>
<strong>进程的换出</strong></p>
<ol>
<li>选出被换出的进程<br>
<strong>选择原则:</strong>
<ul>
<li>ⅰ先“阻塞”或“睡眠”的进程,后“就绪”</li>
<li>ⅱ优先级低的进程</li>
<li>ⅲ在内存最长的进程的进程换出</li>
<li>ⅳ最近最久未使用进程</li>
</ul>
</li>
<li>进程换出过程<br>
- 系统首先选择处于“阻塞”状态且优先级最低的进程作为换出进程,然后启动盘块,将该进程的程序和数据传送到磁盘的对换区上。若传送过程未出现错误,便可回收该进程所占用的内存空间,并对该进程的进程控制块做相应的修改。<br>
- <span style="background:rgba(140, 140, 140, 0.12)"> 若换出进程，应确保该进程完全处于空闲状态</span><br>
<strong>进程的换入</strong><br>
- 系统应定时地查看所有进程的状态，从中找出(PCB集合中)“就绪”状态且已换出的进程，将其中换出时间(换出到磁盘上)最久的进程作为换入进程，申请内存，若成功将之换入，否则在换出某些进程,腾出足够内存，再换入。</li>
</ol>
<h4 data-heading="对换和覆盖">对换和覆盖</h4>
<p>在多道程序系统下用来扩充内存的两种方法</p>
<ul>
<li>交换技术主要在不同进程（作业）进行，而覆盖用于同一个程序或者进程中你</li>
</ul>
<hr>
<h2 data-heading="4.3 基本分页存储管理方式">4.3 基本分页存储管理方式</h2>
<p>如果允许一个进程直接分散地装入到许多不相邻接的分区中,称为<span style="background:rgba(3, 135, 102, 0.2)">离散分配方式</span><br>
离散分配方式有<span style="background:rgba(140, 140, 140, 0.12)">分页存储管理方式、分段存储管理方式和段页存储管理方式</span></p>
<p><strong>大致实现方式：</strong></p>
<blockquote>
<ol>
<li>在为作业分配主存时,以块为单位将作业中的若干页分别装入多个可以不相邻接的块中。作业执行时根据逻辑地址中的页号找到它所在的块号,再确定当前指令要访问的主存的物理地址。</li>
<li>程序地址空间分成大小相等的页面,同时把内存也分成与页面大小相等的块,<span style="background:rgba(140, 140, 140, 0.12)">当一个用户程序装入内存时,以页面为单位进行分配。</span>页面的大小是为<span style="background:rgba(5, 117, 197, 0.2)">2<sup>n</sup>,</span>通常为1KB,2KB,nKB等。</li>
</ol>
</blockquote>
<p><strong>页面大小的确定：</strong></p>
<ul>
<li>在分页系统中的页面其大小应适中，由硬件决定,即由机器的地址结构所决定。</li>
<li><span style="background:rgba(92, 92, 92, 0.2)">页面若太小</span>，一方面虽然可使内存碎片减小，从而减少了内存碎片的总空间，有利于提高内存利用率，但另一方面也会使每个进程占用较多的页面，从而导致进程的页表过长，占用大量内存；此外,还会降低页面换进换出的效率</li>
<li><span style="background:rgba(92, 92, 92, 0.2)">如果选择的页面较大</span>，虽然可以减少页表的长度，提高页面换进换出的速度，但却又会使页内碎片增大。因此，<span style="background:#affad1">页面的大小应选择得适中，且页面大小应是2的幂，通常为1KB~8KB</span></li>
</ul>
<h3 data-heading="一些概念">一些概念</h3>
<p>将进程（逻辑地址）分为<strong>等大小</strong>的页 -&gt; <span style="background:rgba(3, 135, 102, 0.2)">页面，页号</span><br>
<span style="background:rgba(92, 92, 92, 0.2)">逻辑地址 = 页号 * 页大小 + 页内偏移量（相对地址）</span></p>
<p>将主存按相同的页大小分块 -&gt; <span style="background:rgba(3, 135, 102, 0.2)">页框/块，块号</span><br>
<span style="background:rgba(92, 92, 92, 0.2)">物理地址 = 块号 * 页大小 + 页内偏移量</span></p>
<p>分页系统中,将进程的每一页离散地存储在内存的任一物理块中,<strong>为每个进程</strong>建立一张页面映像表 -&gt; <span style="background:rgba(3, 135, 102, 0.2)">页表</span></p>
<ul>
<li>作用：是实现从页号到物理块号的地址映射</li>
<li><span style="background:rgba(92, 92, 92, 0.2)">组成：页号 + 块号</span>（通常不需要存页号，要连续分配）
<blockquote>
<pre><code>![[Pasted image 20231006110532.png]]
</code><button class="copy-code-button">复制</button></pre>
<p><img alt="Pasted image 20231006111207.png" src="Pasted image 20231006111207.png" class="internal-embed"></p>
</blockquote>
</li>
</ul>
<p><span style="background:rgba(92, 92, 92, 0.2)">需要访问2次内存</span>（相较于直接访问，指令的执行时间变慢）<br>
由于页表是存放在内存中,因此每次CPU存取一个数据要两次访问内存即,<strong>查页表时</strong>要作一次访问内存的工作,然后是<strong>访问程序</strong>要求访问的内存<br>
<strong>每个进程对需要建一个对应的页表</strong><br>
页表、快表需要占内存，页表中的页号可以省略，快表不行</p>
<h3 data-heading="**地址变换过程：**"><strong>地址变换过程：</strong></h3>
<pre><code>页表大多驻留在内存中,在系统中设置页表寄存器PTR(Page–Table Register),在其中存放页表在内存中的始址和页表的长度
进程未执行时,页表的始址和页表长度存放在本进程的PCB中,当调度程序调度到某进程时,才将这两个数据装入页表寄存器
</code><button class="copy-code-button">复制</button></pre>
<h4 data-heading="<span style=&quot;background:rgba(5, 117, 197, 0.2)&quot;>无快表的情况</span>"><span style="background:rgba(5, 117, 197, 0.2)">无快表的情况</span></h4>
<p><img alt="屏幕截图 2023-10-06 112513.png" src="屏幕截图 2023-10-06 112513.png" class="internal-embed"></p>
<h4 data-heading="<span style=&quot;background:rgba(5, 117, 197, 0.2)&quot;>拥有快表的地址变换机构</span>"><span style="background:rgba(5, 117, 197, 0.2)">拥有快表的地址变换机构</span></h4>
<ul>
<li>为提高地址变换速度，在地址变换机构中增设一个具有并行查寻能力的高速缓冲寄存器，又称为“联想寄存器”(Associative Memory)或<span style="background:rgba(92, 92, 92, 0.2)">“快表”</span>，用以存放当前访问的那些页表项,价格贵。</li>
<li>快表组成：页号+块号（<strong>页号不可以省略</strong>，因为不是连续的）<br>
<img alt="Pasted image 20231006113803.png" src="Pasted image 20231006113803.png" class="internal-embed"></li>
</ul>
<h4 data-heading="具体求解方法">具体求解方法</h4>
<p><span style="background:rgba(92, 92, 92, 0.2)">PS：<code>可能的越界：逻辑地址中的页号大于页表的长度</code></span></p>
<ul>
<li><strong>首先根据给出的地址，得到页号/块号，页内偏移量</strong></li>
<li><strong>然后查询页表，得到对应的块号/页号</strong></li>
<li><strong>拼接页/块的基址和页内偏移量（说成相加也行），得到相对应的内存中的地址/逻辑地址</strong><br>
<span style="background:rgba(92, 92, 92, 0.2)">需要访问两次内存</span></li>
</ul>
<p><span style="background:#affad1">如何得到页号和页内偏移量？</span><br>
<span style="background:rgba(140, 140, 140, 0.12)">公式联想</span>：123 = 1 * 10<sup>2</sup> + 23  &lt;=&gt;  123 / 10<sup>2</sup> = 1.....23</p>
<p><span style="background:rgba(140, 140, 140, 0.12)">一般法：</span><br>
逻辑地址（十进制形式）除以页大小</p>
<ul>
<li>商——页号</li>
<li>余数——页内偏移量<br>
<span style="background:rgba(140, 140, 140, 0.12)">启发法：</span><br>
逻辑地址、页大小转换为2进制形式，假设页大小为2<sup>n</sup> B<br>
则：逻辑地址 = 页号 * 2<sup>n</sup>  + 页内偏移量（相对地址），相当于页号（B）左移了n位，低位补相对地址</li>
<li>低n位——页内偏移量</li>
<li>其余高位——页号（别管2<sup>n</sup>的位权了，直接数数）
<blockquote>
<pre><code>![[Pasted image 20231006111301.png]]
</code><button class="copy-code-button">复制</button></pre>
</blockquote>
</li>
</ul>
<h3 data-heading="两级和多级页表">两级和多级页表</h3>
<ul>
<li>现代的大多数计算机系统,都支持非常大的逻辑地址空间(2<sup>32</sup>~2<sup>64</sup>)。在这样的环境下,页表就变得非常大,要占用相当大的内存空间，并且，<span style="background:rgba(92, 92, 92, 0.2)">页表需要占据连续的内存空间</span></li>
<li>可以采用两个方法来解决这一问题
<ol>
<li>采用<strong>离散分配方式</strong>来解决难以找到一块连续的大内存空间的问题</li>
<li>只将当前需要的部分页表项调入内存,其余的页表项仍驻留在磁盘上,<strong>需要时再调入</strong></li>
</ol>
</li>
</ul>
<h2 data-heading="4.4 基本分段存储管理方式">4.4 基本分段存储管理方式</h2>
<p><strong>段大小不定</strong>，属于满足用户需要的存储管理方式，并不能实现提高内存利用率</p>
<p>可能的<span style="background:rgba(92, 92, 92, 0.2)">越界</span>：段号，段内偏移量<br>
段表元素：段号，段长，基址（主存内）</p>
<h2 data-heading="4.5 虚拟存储器的基本概念">4.5 虚拟存储器的基本概念</h2>
<p><strong>1.请求分页系统</strong><br>
在分页系统的基础上增加了<strong>请求调页功能</strong>和<strong>页面置换功能</strong></p>
<p><strong>(1)硬件支持</strong><br>
1. <strong>请求分页的页表机制</strong>,它是在纯分页的页表机制上增加若干项而形成的,作为请求分页的数据结构;<br>
<img alt="Pasted image 20231009092219.png" src="Pasted image 20231009092219.png" class="internal-embed"><br>
2. <strong>缺页中断机构</strong>,即每当用户程序<span style="background:rgba(92, 92, 92, 0.2)">要访问的页面尚未调入内存时</span>便产生一缺页中断,以请求OS将所缺的页调入内存（或者是页表中没有对应的块号时-&gt;缺页中断）<br>
3. <strong>地址变换机构</strong>,它同样是在纯分页地址变换机构的基础上发展形成的</p>
<p><strong>(2)实现请求分页的软件</strong><br>
用于实现请求调页的软件和实现页面置换的软件</p>
<p><strong>2.请求分段系统</strong><br>
在分段系统的基础上,增加了请求调段及分段置换功能</p>
<p><strong>(1)硬件支持</strong><br>
1. 请求分段的段表机制<br>
2. 缺段中断机构<br>
3. 地址变换机构</p>
<p><strong>(2)软件支持</strong><br>
用于实现请求调段的软件和实现分段置换的软件</p>
<h3 data-heading="4.5.3 虚拟存储器的特征">4.5.3 虚拟存储器的特征</h3>
<p>离散型，多次性，对换性，虚拟性</p>
<h2 data-heading="4.6 请求分页存储管理方式">4.6 请求分页存储管理方式</h2>
<h3 data-heading="**请求分页系统**"><strong>请求分页系统</strong></h3>
<p>在分页系统的基础上增加了<strong>请求调页功能</strong>和<strong>页面置换功能</strong></p>
<ul>
<li>请求调页功能：在发生<span style="background:rgba(92, 92, 92, 0.2)">缺页中断</span>时，将缺失页面从外存调入到内存中</li>
<li>页面置换功能：当分配的<span style="background:rgba(92, 92, 92, 0.2)">内存已满时</span>，将<span style="background:rgba(92, 92, 92, 0.2)">暂时用不到</span>的页面换出内存</li>
</ul>
<h4 data-heading="(1)硬件支持">(1)硬件支持</h4>
<h5 data-heading="1.**请求分页的页表机制**">1.<strong>请求分页的页表机制</strong></h5>
<p>它是在纯分页的页表机制上增加若干项而形成的,作为请求分页的数据结构;<br>
<img alt="Pasted image 20231009092219.png" src="Pasted image 20231009092219.png" class="internal-embed"></p>
<ul>
<li><strong>访问字段A</strong>：用于记录本页在一段时间内被<span style="background:rgba(92, 92, 92, 0.2)">访问的次数</span>,或记录本页在最近多长时间未被访问</li>
<li><strong>修改位M</strong>：表示该页在调入内存后<span style="background:rgba(92, 92, 92, 0.2)">是否被修改</span>过</li>
<li><strong>状态位P</strong>：用于指示该页<span style="background:rgba(92, 92, 92, 0.2)">是否已调入内存</span>，供程序访问时参考</li>
<li><strong>外存地址</strong>：该页在外存上的地址,通常是<span style="background:rgba(92, 92, 92, 0.2)">物理块号</span>,供调入该页时参考。<br>
<img alt="Pasted image 20231011152233.png" src="Pasted image 20231011152233.png" class="internal-embed"></li>
</ul>
<h5 data-heading="2.**缺页中断机构**">2.<strong>缺页中断机构</strong></h5>
<p>即每当用户程序<span style="background:rgba(92, 92, 92, 0.2)">要访问的页面尚未调入内存时</span>便产生<strong>缺页中断</strong>（属于<strong>内中断</strong>），以请求OS将所缺的页调入内存（或者是页表中没有对应的块号时-&gt;缺页中断）<br>
保存多次中断时的状态<br>
<img alt="Pasted image 20231011152451.png" src="Pasted image 20231011152451.png" class="internal-embed"></p>
<p><strong>缺页中断与一般中断的区别</strong><br>
1. 在<span style="background:rgba(92, 92, 92, 0.2)">指令执行期间</span>产生和处理中断信号（要用时发现不在内存-&gt;立即缺页中断）<br>
2. 一条指令在执行期间可能产生多次缺页中断<br>
<br>
<img alt="屏幕截图 2023-10-11 102204.png" src="屏幕截图 2023-10-11 102204.png" class="internal-embed"><br>
<br>
</p>
<h5 data-heading="3.==**地址变换机构**==">3.<mark><strong>地址变换机构</strong></mark></h5>
<p>它同样是在纯分页地址变换机构的基础上发展形成的<br>
相较于基本分页，请求分页（发生<strong>缺页中断</strong>时）的<strong>新增步骤</strong><br>
1. 请求调页（页表项P = 0时）<br>
2. 页面置换（需要调入页面到内存，但是没有空闲内存）<br>
3. 执行完请求分页后，需要<strong>修改页表</strong>中新增的表项</p>
<ul>
<li>检测是否越界中断（页号）</li>
<li>检索快表-访问内存</li>
<li>检索快表-检索页表（快表中没有，访问完后写入快表中）-访问内存</li>
<li>检索快表-检索页表-<strong>缺页中断，调页</strong>（页不在内存中，后修改页表，快表）-访问内存<br>
- <span style="background:rgba(92, 92, 92, 0.2)">缺页中断后得到一切需要的，不需要再访问快表、页表</span><br>
- 缺页中断换入换出——联系：<strong>页面置换算法</strong>，内存分配策略<br>
<img alt="Pasted image 20231011102530.png" src="Pasted image 20231011102530.png" class="internal-embed"><br>
<strong>PS：</strong></li>
</ul>
<ol>
<li>
<p>只有“写指令”才需要更改修改位；</p>
</li>
<li>
<p>缺页中断处理仍然需要保留CPU现场</p>
</li>
<li>
<p>需要用某种“<span style="background:rgba(92, 92, 92, 0.2)">页面置换算法</span>”来决定一个换出页面</p>
</li>
<li>
<p>页面调入到内存中时，需要修改慢表，同时<strong>更新快表</strong></p>
</li>
</ol>
<h4 data-heading="**(2)实现请求分页的软件**"><strong>(2)实现请求分页的软件</strong></h4>
<pre><code>用于实现请求调页的软件和实现页面置换的软件
</code><button class="copy-code-button">复制</button></pre>
<p>~<img alt="Pasted image 20231009092623.png" src="Pasted image 20231009092623.png" class="internal-embed"></p>
<hr>
<h3 data-heading="4.6.2 内存分配策略和分配算法">4.6.2 内存分配策略和分配算法</h3>
<h4 data-heading="1.最小物理块数的确定">1.最小物理块数的确定</h4>
<p><img alt="Pasted image 20231011103453.png" src="Pasted image 20231011103453.png" class="internal-embed"></p>
<h4 data-heading="2.物理块的分配策略">2.物理块的分配策略</h4>
<p><img alt="Pasted image 20231011103520.png" src="Pasted image 20231011103520.png" class="internal-embed"></p>
<h4 data-heading="3.物理块分配算法">3.物理块分配算法</h4>
<p><img alt="Pasted image 20231011103601.png" src="Pasted image 20231011103601.png" class="internal-embed"><br>
<img alt="Pasted image 20231011103620.png" src="Pasted image 20231011103620.png" class="internal-embed"><br>
<img alt="Pasted image 20231011103632.png" src="Pasted image 20231011103632.png" class="internal-embed"></p>
<h3 data-heading="4.6.3 页面调入策略">4.6.3 页面调入策略</h3>
<p><strong>主要问题：</strong><br>
1. 何时调入<br>
2. 何处调入<br>
3. 如何调入<br>
<strong>目标：</strong> 页面的换出、换入需要磁盘I/O，会有较大的开销，因此好的页面置换算法应该<strong>追求更少的缺页率</strong></p>
<h4 data-heading="1.何时调入页面">1.何时调入页面</h4>
<p><img alt="Pasted image 20231011104711.png" src="Pasted image 20231011104711.png" class="internal-embed"></p>
<h4 data-heading="2.何处调入页面">2.何处调入页面</h4>
<ul>
<li>
<p>在请求分页系统中的<span style="background:rgba(92, 92, 92, 0.2)">外存</span>分为两部分：用于存放文件的<span style="background:rgba(92, 92, 92, 0.2)">文件区</span>和用于存放对换页面的<span style="background:rgba(92, 92, 92, 0.2)">对换区</span>。<mark><strong>对换区的磁盘I/O速度比文件区的高</strong></mark></p>
</li>
<li>
<p>每当发生缺页请求时,系统应从何处将缺页调入内存,可分成如下三种情况</p>
<p>(1)系统拥有<strong>足够</strong>的对换区空间,这时可以全部从<strong>对换区</strong>调入所需页面,以提高调页速度。在进程运行前,文件由<span style="background:rgba(92, 92, 92, 0.2)">文件区-&gt;对换区</span>。</p>
<p>(2)系统<strong>缺少</strong>足够的对换区空间,这时凡是<strong>不会</strong>被修改的文件,都直接从<strong>文件区</strong>调入。凡是<strong>会</strong>被修改的文件,都直接从<strong>对换区</strong>调入。</p>
<p>(3)UNIX方式。开始时,由于与进程有关的文件都放在文件区,故凡是<strong>未运行过</strong>的页面,都应从<strong>文件区</strong>调入。换出到对换区,以后<strong>再调入</strong>就从<strong>对换区</strong>调入。</p>
</li>
</ul>
<h4 data-heading="3.如何调入页面">3.如何调入页面</h4>
<p><img alt="Pasted image 20231011104302.png" src="Pasted image 20231011104302.png" class="internal-embed"></p>
<h2 data-heading="4.7 页面置换算法">4.7 页面置换算法</h2>
<h3 data-heading="4.7.1 最佳置换算法和先进先出置换算法">4.7.1 最佳置换算法和先进先出置换算法</h3>
<h4 data-heading="最佳置换算法(预知未来)：">最佳置换算法(预知未来)：</h4>
<p>其所选择的被淘汰页面,将是<font color="#548dd4">以后永不使用</font>的, 或许是在(未来)<font color="#548dd4">最长时间内不再被访问</font>的页面</p>
<ul>
<li><span style="background:rgba(92, 92, 92, 0.2)">理论上的算法</span>（不能百分百的预知未来），<strong>无法实现</strong>
<blockquote>
<pre><code>需要调入页面2时：内存已满（0,1,7），&lt;font color="#548dd4"&gt;未来最长时间不再被访问&lt;/font&gt;的是页面7，因此淘汰页面7，调入页面2
![[Pasted image 20231011154825.png]]
![[Pasted image 20231011155206.png]]
</code><button class="copy-code-button">复制</button></pre>
</blockquote>
</li>
</ul>
<h4 data-heading="先进先出(FIFO)页面置换算法">先进先出(FIFO)页面置换算法</h4>
<p>每次选择<font color="#548dd4">淘汰的页面</font>是<font color="#548dd4">最早进入内存的页面</font>，实质上是<strong>淘汰在内存驻留时间最长（或最久未使用/未访问）</strong> 的页。（<mark>算法性能差</mark>）</p>
<p>实现方法：使用队列<br>
<span style="background:rgba(92, 92, 92, 0.2)">把调入内存的页面根据调入的先后顺序排成一个队列，需要换出页面时选择队头页面即可。队列的最大长度取决于系统为进程分配了多少个内存块</span></p>
<blockquote>
<pre><code>页面3最早进入内存，淘汰页面3
==方法：往前数访问页面号（该例子往前数三个），选当前内存中最前面的==
![[Pasted image 20231011160654.png]]
缺页次数：9
![[Pasted image 20231011161424.png]]
</code><button class="copy-code-button">复制</button></pre>
<p><span style="background:rgba(92, 92, 92, 0.2)">Belady异常</span>：<strong>使用FIFO时</strong>，分配的内存块增大时，缺页次数不减反增的异常现象</p>
</blockquote>
<h3 data-heading="4.7.2 最近最久未使用(LRU)置换算法">4.7.2 最近最久未使用(LRU)置换算法</h3>
<p>当需要置换一页时,选择在<strong>最近一段时间最久未使用（借助访问字段A）</strong> 的页面予以淘汰。<br>
性能最好，但实现困难，开销大（需要硬件支持）</p>
<blockquote>
<pre><code>==方法：逆向检查此时在内存中的机构页面号，选当前内存中最前面的（逆向扫描中最后一个出现的）==
![[Pasted image 20231011162203.png]]
</code><button class="copy-code-button">复制</button></pre>
</blockquote>
<h3 data-heading="4.7.3 CLOCK置换算法">4.7.3 CLOCK置换算法</h3>
<h4 data-heading="1.简单的Clock置换算法">1.简单的Clock置换算法</h4>
<p>引入:LRU算法有较多的硬件支持,成本高</p>
<ul>
<li>当采用简单的Clock算法时,只需为每页设置一位<strong>访问位</strong>,再将内存中的所有页面都通过链接指针链接成一个循环队列</li>
<li>当某页被访问时,其访问位被置 <strong>1</strong></li>
<li>置换算法在选择一页淘汰时,只需检查页的访问位</li>
<li><img alt="Pasted image 20231011164605.png" src="Pasted image 20231011164605.png" class="internal-embed"></li>
</ul>
<p>由于该算法是<font color="#548dd4">循环</font>地检查各页面的访问情况,故称为Clock算法,又称为<span style="background:rgba(92, 92, 92, 0.2)">最近未用算法NRU(Not Recently Used)</span></p>
<blockquote>
<pre><code>![[Pasted image 20231011164338.png]]
</code><button class="copy-code-button">复制</button></pre>
</blockquote>
<h4 data-heading="2.改进型Clock置换算法">2.改进型Clock置换算法</h4>
<p>由<strong>访问位A</strong>和<strong>修改位M</strong>可以组合成下面四种类型的页面</p>
<ul>
<li>
<p>1类(<span style="background:rgba(92, 92, 92, 0.2)">A=0,M=0</span>):表示该页最近<font color="#548dd4">既未被访问,又未被修改</font>,是最佳淘汰页</p>
</li>
<li>
<p>2类(<span style="background:rgba(92, 92, 92, 0.2)">A=0,M=1</span>):表示该页最近未被访问,但已被修改,并不是很好的淘汰页</p>
</li>
<li>
<p>3类(<span style="background:rgba(92, 92, 92, 0.2)">A=1,M=0</span>):最近已被访问,但未被修改,该页有可能再被访问</p>
</li>
<li>
<p>4类(<span style="background:rgba(92, 92, 92, 0.2)">A=1,M=1</span>):最近已被访问且被修改,该页可能再被访问</p>
<blockquote>
<pre><code>![[Pasted image 20231011164525.png]]
</code><button class="copy-code-button">复制</button></pre>
</blockquote>
</li>
</ul>
<h3 data-heading="4.7.4 其它置换算法">4.7.4 其它置换算法</h3>
<h2 data-heading="4.8 请求分段存储管理方式">4.8 请求分段存储管理方式</h2>
    </body>
</html>